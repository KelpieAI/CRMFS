var ad=e=>{throw TypeError(e)};var Uo=(e,t,r)=>t.has(e)||ad("Cannot "+r);var _=(e,t,r)=>(Uo(e,t,"read from private field"),r?r.call(e):t.get(e)),U=(e,t,r)=>t.has(e)?ad("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),I=(e,t,r,n)=>(Uo(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),W=(e,t,r)=>(Uo(e,t,"access private method"),r);var Gi=(e,t,r,n)=>({set _(s){I(e,t,s,r)},get _(){return _(e,t,n)}});function Eg(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Cg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wf={exports:{}},uo={},_f={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bi=Symbol.for("react.element"),Tg=Symbol.for("react.portal"),Pg=Symbol.for("react.fragment"),Og=Symbol.for("react.strict_mode"),Rg=Symbol.for("react.profiler"),Ag=Symbol.for("react.provider"),Ig=Symbol.for("react.context"),$g=Symbol.for("react.forward_ref"),Lg=Symbol.for("react.suspense"),Mg=Symbol.for("react.memo"),Ug=Symbol.for("react.lazy"),od=Symbol.iterator;function Dg(e){return e===null||typeof e!="object"?null:(e=od&&e[od]||e["@@iterator"],typeof e=="function"?e:null)}var bf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jf=Object.assign,Nf={};function Ps(e,t,r){this.props=e,this.context=t,this.refs=Nf,this.updater=r||bf}Ps.prototype.isReactComponent={};Ps.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ps.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kf(){}kf.prototype=Ps.prototype;function Fc(e,t,r){this.props=e,this.context=t,this.refs=Nf,this.updater=r||bf}var Wc=Fc.prototype=new kf;Wc.constructor=Fc;jf(Wc,Ps.prototype);Wc.isPureReactComponent=!0;var ld=Array.isArray,Sf=Object.prototype.hasOwnProperty,Kc={current:null},Ef={key:!0,ref:!0,__self:!0,__source:!0};function Cf(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Sf.call(t,n)&&!Ef.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Bi,type:e,key:i,ref:o,props:s,_owner:Kc.current}}function Bg(e,t){return{$$typeof:Bi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Hc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bi}function zg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var cd=/\/+/g;function Do(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zg(""+e.key):t.toString(36)}function va(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Bi:case Tg:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Do(o,0):n,ld(s)?(r="",e!=null&&(r=e.replace(cd,"$&/")+"/"),va(s,t,r,"",function(u){return u})):s!=null&&(Hc(s)&&(s=Bg(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(cd,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",ld(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Do(i,l);o+=va(i,t,r,c,s)}else if(c=Dg(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Do(i,l++),o+=va(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ji(e,t,r){if(e==null)return e;var n=[],s=0;return va(e,n,"","",function(i){return t.call(r,i,s++)}),n}function qg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ve={current:null},xa={transition:null},Vg={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:xa,ReactCurrentOwner:Kc};function Tf(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:Ji,forEach:function(e,t,r){Ji(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ji(e,function(){t++}),t},toArray:function(e){return Ji(e,function(t){return t})||[]},only:function(e){if(!Hc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};G.Component=Ps;G.Fragment=Pg;G.Profiler=Rg;G.PureComponent=Fc;G.StrictMode=Og;G.Suspense=Lg;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vg;G.act=Tf;G.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=jf({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Kc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Sf.call(t,c)&&!Ef.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Bi,type:e.type,key:s,ref:i,props:n,_owner:o}};G.createContext=function(e){return e={$$typeof:Ig,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ag,_context:e},e.Consumer=e};G.createElement=Cf;G.createFactory=function(e){var t=Cf.bind(null,e);return t.type=e,t};G.createRef=function(){return{current:null}};G.forwardRef=function(e){return{$$typeof:$g,render:e}};G.isValidElement=Hc;G.lazy=function(e){return{$$typeof:Ug,_payload:{_status:-1,_result:e},_init:qg}};G.memo=function(e,t){return{$$typeof:Mg,type:e,compare:t===void 0?null:t}};G.startTransition=function(e){var t=xa.transition;xa.transition={};try{e()}finally{xa.transition=t}};G.unstable_act=Tf;G.useCallback=function(e,t){return Ve.current.useCallback(e,t)};G.useContext=function(e){return Ve.current.useContext(e)};G.useDebugValue=function(){};G.useDeferredValue=function(e){return Ve.current.useDeferredValue(e)};G.useEffect=function(e,t){return Ve.current.useEffect(e,t)};G.useId=function(){return Ve.current.useId()};G.useImperativeHandle=function(e,t,r){return Ve.current.useImperativeHandle(e,t,r)};G.useInsertionEffect=function(e,t){return Ve.current.useInsertionEffect(e,t)};G.useLayoutEffect=function(e,t){return Ve.current.useLayoutEffect(e,t)};G.useMemo=function(e,t){return Ve.current.useMemo(e,t)};G.useReducer=function(e,t,r){return Ve.current.useReducer(e,t,r)};G.useRef=function(e){return Ve.current.useRef(e)};G.useState=function(e){return Ve.current.useState(e)};G.useSyncExternalStore=function(e,t,r){return Ve.current.useSyncExternalStore(e,t,r)};G.useTransition=function(){return Ve.current.useTransition()};G.version="18.3.1";_f.exports=G;var j=_f.exports;const Pf=Cg(j),Fg=Eg({__proto__:null,default:Pf},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg=j,Kg=Symbol.for("react.element"),Hg=Symbol.for("react.fragment"),Qg=Object.prototype.hasOwnProperty,Gg=Wg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jg={key:!0,ref:!0,__self:!0,__source:!0};function Of(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Qg.call(t,n)&&!Jg.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Kg,type:e,key:i,ref:o,props:s,_owner:Gg.current}}uo.Fragment=Hg;uo.jsx=Of;uo.jsxs=Of;wf.exports=uo;var a=wf.exports,_l={},Rf={exports:{}},at={},Af={exports:{}},If={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,E){var O=$.length;$.push(E);e:for(;0<O;){var K=O-1>>>1,H=$[K];if(0<s(H,E))$[K]=E,$[O]=H,O=K;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var E=$[0],O=$.pop();if(O!==E){$[0]=O;e:for(var K=0,H=$.length,Ce=H>>>1;K<Ce;){var We=2*(K+1)-1,Kt=$[We],lt=We+1,mr=$[lt];if(0>s(Kt,O))lt<H&&0>s(mr,Kt)?($[K]=mr,$[lt]=O,K=lt):($[K]=Kt,$[We]=O,K=We);else if(lt<H&&0>s(mr,O))$[K]=mr,$[lt]=O,K=lt;else break e}}return E}function s($,E){var O=$.sortIndex-E.sortIndex;return O!==0?O:$.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,m=3,y=!1,v=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g($){for(var E=r(u);E!==null;){if(E.callback===null)n(u);else if(E.startTime<=$)n(u),E.sortIndex=E.expirationTime,t(c,E);else break;E=r(u)}}function b($){if(w=!1,g($),!v)if(r(c)!==null)v=!0,hr(N);else{var E=r(u);E!==null&&fr(b,E.startTime-$)}}function N($,E){v=!1,w&&(w=!1,d(S),S=-1),y=!0;var O=m;try{for(g(E),f=r(c);f!==null&&(!(f.expirationTime>E)||$&&!Y());){var K=f.callback;if(typeof K=="function"){f.callback=null,m=f.priorityLevel;var H=K(f.expirationTime<=E);E=e.unstable_now(),typeof H=="function"?f.callback=H:f===r(c)&&n(c),g(E)}else n(c);f=r(c)}if(f!==null)var Ce=!0;else{var We=r(u);We!==null&&fr(b,We.startTime-E),Ce=!1}return Ce}finally{f=null,m=O,y=!1}}var k=!1,T=null,S=-1,A=5,R=-1;function Y(){return!(e.unstable_now()-R<A)}function ge(){if(T!==null){var $=e.unstable_now();R=$;var E=!0;try{E=T(!0,$)}finally{E?je():(k=!1,T=null)}}else k=!1}var je;if(typeof p=="function")je=function(){p(ge)};else if(typeof MessageChannel<"u"){var Ft=new MessageChannel,Wt=Ft.port2;Ft.port1.onmessage=ge,je=function(){Wt.postMessage(null)}}else je=function(){x(ge,0)};function hr($){T=$,k||(k=!0,je())}function fr($,E){S=x(function(){$(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,hr(N))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function($){switch(m){case 1:case 2:case 3:var E=3;break;default:E=m}var O=m;m=E;try{return $()}finally{m=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,E){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var O=m;m=$;try{return E()}finally{m=O}},e.unstable_scheduleCallback=function($,E,O){var K=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?K+O:K):O=K,$){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=O+H,$={id:h++,callback:E,priorityLevel:$,startTime:O,expirationTime:H,sortIndex:-1},O>K?($.sortIndex=O,t(u,$),r(c)===null&&$===r(u)&&(w?(d(S),S=-1):w=!0,fr(b,O-K))):($.sortIndex=H,t(c,$),v||y||(v=!0,hr(N))),$},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function($){var E=m;return function(){var O=m;m=E;try{return $.apply(this,arguments)}finally{m=O}}}})(If);Af.exports=If;var Yg=Af.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg=j,it=Yg;function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $f=new Set,ci={};function Tn(e,t){bs(e,t),bs(e+"Capture",t)}function bs(e,t){for(ci[e]=t,e=0;e<t.length;e++)$f.add(t[e])}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bl=Object.prototype.hasOwnProperty,Zg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ud={},dd={};function e0(e){return bl.call(dd,e)?!0:bl.call(ud,e)?!1:Zg.test(e)?dd[e]=!0:(ud[e]=!0,!1)}function t0(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function r0(e,t,r,n){if(t===null||typeof t>"u"||t0(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Fe(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ae[e]=new Fe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ae[t]=new Fe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ae[e]=new Fe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ae[e]=new Fe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ae[e]=new Fe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ae[e]=new Fe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ae[e]=new Fe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ae[e]=new Fe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ae[e]=new Fe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Qc=/[\-:]([a-z])/g;function Gc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Qc,Gc);Ae[t]=new Fe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Qc,Gc);Ae[t]=new Fe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Qc,Gc);Ae[t]=new Fe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ae[e]=new Fe(e,1,!1,e.toLowerCase(),null,!1,!1)});Ae.xlinkHref=new Fe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ae[e]=new Fe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Jc(e,t,r,n){var s=Ae.hasOwnProperty(t)?Ae[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(r0(t,r,s,n)&&(r=null),n||s===null?e0(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ur=Xg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yi=Symbol.for("react.element"),Fn=Symbol.for("react.portal"),Wn=Symbol.for("react.fragment"),Yc=Symbol.for("react.strict_mode"),jl=Symbol.for("react.profiler"),Lf=Symbol.for("react.provider"),Mf=Symbol.for("react.context"),Xc=Symbol.for("react.forward_ref"),Nl=Symbol.for("react.suspense"),kl=Symbol.for("react.suspense_list"),Zc=Symbol.for("react.memo"),yr=Symbol.for("react.lazy"),Uf=Symbol.for("react.offscreen"),hd=Symbol.iterator;function Ms(e){return e===null||typeof e!="object"?null:(e=hd&&e[hd]||e["@@iterator"],typeof e=="function"?e:null)}var ce=Object.assign,Bo;function Ws(e){if(Bo===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Bo=t&&t[1]||""}return`
`+Bo+e}var zo=!1;function qo(e,t){if(!e||zo)return"";zo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{zo=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ws(e):""}function n0(e){switch(e.tag){case 5:return Ws(e.type);case 16:return Ws("Lazy");case 13:return Ws("Suspense");case 19:return Ws("SuspenseList");case 0:case 2:case 15:return e=qo(e.type,!1),e;case 11:return e=qo(e.type.render,!1),e;case 1:return e=qo(e.type,!0),e;default:return""}}function Sl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wn:return"Fragment";case Fn:return"Portal";case jl:return"Profiler";case Yc:return"StrictMode";case Nl:return"Suspense";case kl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Mf:return(e.displayName||"Context")+".Consumer";case Lf:return(e._context.displayName||"Context")+".Provider";case Xc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Zc:return t=e.displayName||null,t!==null?t:Sl(e.type)||"Memo";case yr:t=e._payload,e=e._init;try{return Sl(e(t))}catch{}}return null}function s0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sl(t);case 8:return t===Yc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Wr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Df(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function i0(e){var t=Df(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xi(e){e._valueTracker||(e._valueTracker=i0(e))}function Bf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Df(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Oa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function El(e,t){var r=t.checked;return ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function fd(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Wr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function zf(e,t){t=t.checked,t!=null&&Jc(e,"checked",t,!1)}function Cl(e,t){zf(e,t);var r=Wr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Tl(e,t.type,r):t.hasOwnProperty("defaultValue")&&Tl(e,t.type,Wr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function md(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Tl(e,t,r){(t!=="number"||Oa(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ks=Array.isArray;function ns(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Wr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Pl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pd(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(P(92));if(Ks(r)){if(1<r.length)throw Error(P(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Wr(r)}}function qf(e,t){var r=Wr(t.value),n=Wr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function gd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Vf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ol(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Vf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zi,Ff=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zi=Zi||document.createElement("div"),Zi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ui(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ys={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},a0=["Webkit","ms","Moz","O"];Object.keys(Ys).forEach(function(e){a0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ys[t]=Ys[e]})});function Wf(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ys.hasOwnProperty(e)&&Ys[e]?(""+t).trim():t+"px"}function Kf(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Wf(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var o0=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rl(e,t){if(t){if(o0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function Al(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Il=null;function eu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $l=null,ss=null,is=null;function yd(e){if(e=Vi(e)){if(typeof $l!="function")throw Error(P(280));var t=e.stateNode;t&&(t=go(t),$l(e.stateNode,e.type,t))}}function Hf(e){ss?is?is.push(e):is=[e]:ss=e}function Qf(){if(ss){var e=ss,t=is;if(is=ss=null,yd(e),t)for(e=0;e<t.length;e++)yd(t[e])}}function Gf(e,t){return e(t)}function Jf(){}var Vo=!1;function Yf(e,t,r){if(Vo)return e(t,r);Vo=!0;try{return Gf(e,t,r)}finally{Vo=!1,(ss!==null||is!==null)&&(Jf(),Qf())}}function di(e,t){var r=e.stateNode;if(r===null)return null;var n=go(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(P(231,t,typeof r));return r}var Ll=!1;if(ir)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){Ll=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{Ll=!1}function l0(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(h){this.onError(h)}}var Xs=!1,Ra=null,Aa=!1,Ml=null,c0={onError:function(e){Xs=!0,Ra=e}};function u0(e,t,r,n,s,i,o,l,c){Xs=!1,Ra=null,l0.apply(c0,arguments)}function d0(e,t,r,n,s,i,o,l,c){if(u0.apply(this,arguments),Xs){if(Xs){var u=Ra;Xs=!1,Ra=null}else throw Error(P(198));Aa||(Aa=!0,Ml=u)}}function Pn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Xf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vd(e){if(Pn(e)!==e)throw Error(P(188))}function h0(e){var t=e.alternate;if(!t){if(t=Pn(e),t===null)throw Error(P(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return vd(s),e;if(i===n)return vd(s),t;i=i.sibling}throw Error(P(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(P(189))}}if(r.alternate!==n)throw Error(P(190))}if(r.tag!==3)throw Error(P(188));return r.stateNode.current===r?e:t}function Zf(e){return e=h0(e),e!==null?em(e):null}function em(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=em(e);if(t!==null)return t;e=e.sibling}return null}var tm=it.unstable_scheduleCallback,xd=it.unstable_cancelCallback,f0=it.unstable_shouldYield,m0=it.unstable_requestPaint,me=it.unstable_now,p0=it.unstable_getCurrentPriorityLevel,tu=it.unstable_ImmediatePriority,rm=it.unstable_UserBlockingPriority,Ia=it.unstable_NormalPriority,g0=it.unstable_LowPriority,nm=it.unstable_IdlePriority,ho=null,Bt=null;function y0(e){if(Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(ho,e,void 0,(e.current.flags&128)===128)}catch{}}var Ct=Math.clz32?Math.clz32:w0,v0=Math.log,x0=Math.LN2;function w0(e){return e>>>=0,e===0?32:31-(v0(e)/x0|0)|0}var ea=64,ta=4194304;function Hs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $a(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Hs(l):(i&=o,i!==0&&(n=Hs(i)))}else o=r&~s,o!==0?n=Hs(o):i!==0&&(n=Hs(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ct(t),s=1<<r,n|=e[r],t&=~s;return n}function _0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function b0(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ct(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=_0(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Ul(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sm(){var e=ea;return ea<<=1,!(ea&4194240)&&(ea=64),e}function Fo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function zi(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ct(t),e[t]=r}function j0(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Ct(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function ru(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ct(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var ee=0;function im(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var am,nu,om,lm,cm,Dl=!1,ra=[],$r=null,Lr=null,Mr=null,hi=new Map,fi=new Map,wr=[],N0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wd(e,t){switch(e){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":hi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fi.delete(t.pointerId)}}function Ds(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Vi(t),t!==null&&nu(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function k0(e,t,r,n,s){switch(t){case"focusin":return $r=Ds($r,e,t,r,n,s),!0;case"dragenter":return Lr=Ds(Lr,e,t,r,n,s),!0;case"mouseover":return Mr=Ds(Mr,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return hi.set(i,Ds(hi.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,fi.set(i,Ds(fi.get(i)||null,e,t,r,n,s)),!0}return!1}function um(e){var t=sn(e.target);if(t!==null){var r=Pn(t);if(r!==null){if(t=r.tag,t===13){if(t=Xf(r),t!==null){e.blockedOn=t,cm(e.priority,function(){om(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Bl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Il=n,r.target.dispatchEvent(n),Il=null}else return t=Vi(r),t!==null&&nu(t),e.blockedOn=r,!1;t.shift()}return!0}function _d(e,t,r){wa(e)&&r.delete(t)}function S0(){Dl=!1,$r!==null&&wa($r)&&($r=null),Lr!==null&&wa(Lr)&&(Lr=null),Mr!==null&&wa(Mr)&&(Mr=null),hi.forEach(_d),fi.forEach(_d)}function Bs(e,t){e.blockedOn===t&&(e.blockedOn=null,Dl||(Dl=!0,it.unstable_scheduleCallback(it.unstable_NormalPriority,S0)))}function mi(e){function t(s){return Bs(s,e)}if(0<ra.length){Bs(ra[0],e);for(var r=1;r<ra.length;r++){var n=ra[r];n.blockedOn===e&&(n.blockedOn=null)}}for($r!==null&&Bs($r,e),Lr!==null&&Bs(Lr,e),Mr!==null&&Bs(Mr,e),hi.forEach(t),fi.forEach(t),r=0;r<wr.length;r++)n=wr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<wr.length&&(r=wr[0],r.blockedOn===null);)um(r),r.blockedOn===null&&wr.shift()}var as=ur.ReactCurrentBatchConfig,La=!0;function E0(e,t,r,n){var s=ee,i=as.transition;as.transition=null;try{ee=1,su(e,t,r,n)}finally{ee=s,as.transition=i}}function C0(e,t,r,n){var s=ee,i=as.transition;as.transition=null;try{ee=4,su(e,t,r,n)}finally{ee=s,as.transition=i}}function su(e,t,r,n){if(La){var s=Bl(e,t,r,n);if(s===null)el(e,t,n,Ma,r),wd(e,n);else if(k0(s,e,t,r,n))n.stopPropagation();else if(wd(e,n),t&4&&-1<N0.indexOf(e)){for(;s!==null;){var i=Vi(s);if(i!==null&&am(i),i=Bl(e,t,r,n),i===null&&el(e,t,n,Ma,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else el(e,t,n,null,r)}}var Ma=null;function Bl(e,t,r,n){if(Ma=null,e=eu(n),e=sn(e),e!==null)if(t=Pn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Xf(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ma=e,null}function dm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p0()){case tu:return 1;case rm:return 4;case Ia:case g0:return 16;case nm:return 536870912;default:return 16}default:return 16}}var Rr=null,iu=null,_a=null;function hm(){if(_a)return _a;var e,t=iu,r=t.length,n,s="value"in Rr?Rr.value:Rr.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return _a=s.slice(e,1<n?1-n:void 0)}function ba(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function na(){return!0}function bd(){return!1}function ot(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?na:bd,this.isPropagationStopped=bd,this}return ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=na)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=na)},persist:function(){},isPersistent:na}),t}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},au=ot(Os),qi=ce({},Os,{view:0,detail:0}),T0=ot(qi),Wo,Ko,zs,fo=ce({},qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ou,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zs&&(zs&&e.type==="mousemove"?(Wo=e.screenX-zs.screenX,Ko=e.screenY-zs.screenY):Ko=Wo=0,zs=e),Wo)},movementY:function(e){return"movementY"in e?e.movementY:Ko}}),jd=ot(fo),P0=ce({},fo,{dataTransfer:0}),O0=ot(P0),R0=ce({},qi,{relatedTarget:0}),Ho=ot(R0),A0=ce({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),I0=ot(A0),$0=ce({},Os,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),L0=ot($0),M0=ce({},Os,{data:0}),Nd=ot(M0),U0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},D0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=B0[e])?!!t[e]:!1}function ou(){return z0}var q0=ce({},qi,{key:function(e){if(e.key){var t=U0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ba(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?D0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ou,charCode:function(e){return e.type==="keypress"?ba(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ba(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),V0=ot(q0),F0=ce({},fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kd=ot(F0),W0=ce({},qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ou}),K0=ot(W0),H0=ce({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q0=ot(H0),G0=ce({},fo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),J0=ot(G0),Y0=[9,13,27,32],lu=ir&&"CompositionEvent"in window,Zs=null;ir&&"documentMode"in document&&(Zs=document.documentMode);var X0=ir&&"TextEvent"in window&&!Zs,fm=ir&&(!lu||Zs&&8<Zs&&11>=Zs),Sd=" ",Ed=!1;function mm(e,t){switch(e){case"keyup":return Y0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kn=!1;function Z0(e,t){switch(e){case"compositionend":return pm(t);case"keypress":return t.which!==32?null:(Ed=!0,Sd);case"textInput":return e=t.data,e===Sd&&Ed?null:e;default:return null}}function ey(e,t){if(Kn)return e==="compositionend"||!lu&&mm(e,t)?(e=hm(),_a=iu=Rr=null,Kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fm&&t.locale!=="ko"?null:t.data;default:return null}}var ty={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ty[e.type]:t==="textarea"}function gm(e,t,r,n){Hf(n),t=Ua(t,"onChange"),0<t.length&&(r=new au("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ei=null,pi=null;function ry(e){Em(e,0)}function mo(e){var t=Gn(e);if(Bf(t))return e}function ny(e,t){if(e==="change")return t}var ym=!1;if(ir){var Qo;if(ir){var Go="oninput"in document;if(!Go){var Td=document.createElement("div");Td.setAttribute("oninput","return;"),Go=typeof Td.oninput=="function"}Qo=Go}else Qo=!1;ym=Qo&&(!document.documentMode||9<document.documentMode)}function Pd(){ei&&(ei.detachEvent("onpropertychange",vm),pi=ei=null)}function vm(e){if(e.propertyName==="value"&&mo(pi)){var t=[];gm(t,pi,e,eu(e)),Yf(ry,t)}}function sy(e,t,r){e==="focusin"?(Pd(),ei=t,pi=r,ei.attachEvent("onpropertychange",vm)):e==="focusout"&&Pd()}function iy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mo(pi)}function ay(e,t){if(e==="click")return mo(t)}function oy(e,t){if(e==="input"||e==="change")return mo(t)}function ly(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ot=typeof Object.is=="function"?Object.is:ly;function gi(e,t){if(Ot(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!bl.call(t,s)||!Ot(e[s],t[s]))return!1}return!0}function Od(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rd(e,t){var r=Od(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Od(r)}}function xm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wm(){for(var e=window,t=Oa();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Oa(e.document)}return t}function cu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function cy(e){var t=wm(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&xm(r.ownerDocument.documentElement,r)){if(n!==null&&cu(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Rd(r,i);var o=Rd(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var uy=ir&&"documentMode"in document&&11>=document.documentMode,Hn=null,zl=null,ti=null,ql=!1;function Ad(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ql||Hn==null||Hn!==Oa(n)||(n=Hn,"selectionStart"in n&&cu(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ti&&gi(ti,n)||(ti=n,n=Ua(zl,"onSelect"),0<n.length&&(t=new au("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Hn)))}function sa(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Qn={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionend:sa("Transition","TransitionEnd")},Jo={},_m={};ir&&(_m=document.createElement("div").style,"AnimationEvent"in window||(delete Qn.animationend.animation,delete Qn.animationiteration.animation,delete Qn.animationstart.animation),"TransitionEvent"in window||delete Qn.transitionend.transition);function po(e){if(Jo[e])return Jo[e];if(!Qn[e])return e;var t=Qn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in _m)return Jo[e]=t[r];return e}var bm=po("animationend"),jm=po("animationiteration"),Nm=po("animationstart"),km=po("transitionend"),Sm=new Map,Id="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hr(e,t){Sm.set(e,t),Tn(t,[e])}for(var Yo=0;Yo<Id.length;Yo++){var Xo=Id[Yo],dy=Xo.toLowerCase(),hy=Xo[0].toUpperCase()+Xo.slice(1);Hr(dy,"on"+hy)}Hr(bm,"onAnimationEnd");Hr(jm,"onAnimationIteration");Hr(Nm,"onAnimationStart");Hr("dblclick","onDoubleClick");Hr("focusin","onFocus");Hr("focusout","onBlur");Hr(km,"onTransitionEnd");bs("onMouseEnter",["mouseout","mouseover"]);bs("onMouseLeave",["mouseout","mouseover"]);bs("onPointerEnter",["pointerout","pointerover"]);bs("onPointerLeave",["pointerout","pointerover"]);Tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qs));function $d(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,d0(n,t,void 0,e),e.currentTarget=null}function Em(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;$d(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;$d(s,l,u),i=c}}}if(Aa)throw e=Ml,Aa=!1,Ml=null,e}function ne(e,t){var r=t[Hl];r===void 0&&(r=t[Hl]=new Set);var n=e+"__bubble";r.has(n)||(Cm(t,e,2,!1),r.add(n))}function Zo(e,t,r){var n=0;t&&(n|=4),Cm(r,e,n,t)}var ia="_reactListening"+Math.random().toString(36).slice(2);function yi(e){if(!e[ia]){e[ia]=!0,$f.forEach(function(r){r!=="selectionchange"&&(fy.has(r)||Zo(r,!1,e),Zo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ia]||(t[ia]=!0,Zo("selectionchange",!1,t))}}function Cm(e,t,r,n){switch(dm(t)){case 1:var s=E0;break;case 4:s=C0;break;default:s=su}r=s.bind(null,t,r,e),s=void 0,!Ll||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function el(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=sn(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Yf(function(){var u=i,h=eu(r),f=[];e:{var m=Sm.get(e);if(m!==void 0){var y=au,v=e;switch(e){case"keypress":if(ba(r)===0)break e;case"keydown":case"keyup":y=V0;break;case"focusin":v="focus",y=Ho;break;case"focusout":v="blur",y=Ho;break;case"beforeblur":case"afterblur":y=Ho;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=O0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=K0;break;case bm:case jm:case Nm:y=I0;break;case km:y=Q0;break;case"scroll":y=T0;break;case"wheel":y=J0;break;case"copy":case"cut":case"paste":y=L0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=kd}var w=(t&4)!==0,x=!w&&e==="scroll",d=w?m!==null?m+"Capture":null:m;w=[];for(var p=u,g;p!==null;){g=p;var b=g.stateNode;if(g.tag===5&&b!==null&&(g=b,d!==null&&(b=di(p,d),b!=null&&w.push(vi(p,b,g)))),x)break;p=p.return}0<w.length&&(m=new y(m,v,null,r,h),f.push({event:m,listeners:w}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&r!==Il&&(v=r.relatedTarget||r.fromElement)&&(sn(v)||v[ar]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(v=r.relatedTarget||r.toElement,y=u,v=v?sn(v):null,v!==null&&(x=Pn(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(w=jd,b="onMouseLeave",d="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(w=kd,b="onPointerLeave",d="onPointerEnter",p="pointer"),x=y==null?m:Gn(y),g=v==null?m:Gn(v),m=new w(b,p+"leave",y,r,h),m.target=x,m.relatedTarget=g,b=null,sn(h)===u&&(w=new w(d,p+"enter",v,r,h),w.target=g,w.relatedTarget=x,b=w),x=b,y&&v)t:{for(w=y,d=v,p=0,g=w;g;g=Rn(g))p++;for(g=0,b=d;b;b=Rn(b))g++;for(;0<p-g;)w=Rn(w),p--;for(;0<g-p;)d=Rn(d),g--;for(;p--;){if(w===d||d!==null&&w===d.alternate)break t;w=Rn(w),d=Rn(d)}w=null}else w=null;y!==null&&Ld(f,m,y,w,!1),v!==null&&x!==null&&Ld(f,x,v,w,!0)}}e:{if(m=u?Gn(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var N=ny;else if(Cd(m))if(ym)N=oy;else{N=iy;var k=sy}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=ay);if(N&&(N=N(e,u))){gm(f,N,r,h);break e}k&&k(e,m,u),e==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&Tl(m,"number",m.value)}switch(k=u?Gn(u):window,e){case"focusin":(Cd(k)||k.contentEditable==="true")&&(Hn=k,zl=u,ti=null);break;case"focusout":ti=zl=Hn=null;break;case"mousedown":ql=!0;break;case"contextmenu":case"mouseup":case"dragend":ql=!1,Ad(f,r,h);break;case"selectionchange":if(uy)break;case"keydown":case"keyup":Ad(f,r,h)}var T;if(lu)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Kn?mm(e,r)&&(S="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(fm&&r.locale!=="ko"&&(Kn||S!=="onCompositionStart"?S==="onCompositionEnd"&&Kn&&(T=hm()):(Rr=h,iu="value"in Rr?Rr.value:Rr.textContent,Kn=!0)),k=Ua(u,S),0<k.length&&(S=new Nd(S,e,null,r,h),f.push({event:S,listeners:k}),T?S.data=T:(T=pm(r),T!==null&&(S.data=T)))),(T=X0?Z0(e,r):ey(e,r))&&(u=Ua(u,"onBeforeInput"),0<u.length&&(h=new Nd("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:u}),h.data=T))}Em(f,t)})}function vi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ua(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=di(e,r),i!=null&&n.unshift(vi(e,i,s)),i=di(e,t),i!=null&&n.push(vi(e,i,s))),e=e.return}return n}function Rn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ld(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=di(r,i),c!=null&&o.unshift(vi(r,c,l))):s||(c=di(r,i),c!=null&&o.push(vi(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var my=/\r\n?/g,py=/\u0000|\uFFFD/g;function Md(e){return(typeof e=="string"?e:""+e).replace(my,`
`).replace(py,"")}function aa(e,t,r){if(t=Md(t),Md(e)!==t&&r)throw Error(P(425))}function Da(){}var Vl=null,Fl=null;function Wl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Kl=typeof setTimeout=="function"?setTimeout:void 0,gy=typeof clearTimeout=="function"?clearTimeout:void 0,Ud=typeof Promise=="function"?Promise:void 0,yy=typeof queueMicrotask=="function"?queueMicrotask:typeof Ud<"u"?function(e){return Ud.resolve(null).then(e).catch(vy)}:Kl;function vy(e){setTimeout(function(){throw e})}function tl(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),mi(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);mi(t)}function Ur(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Dd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Rs=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Rs,xi="__reactProps$"+Rs,ar="__reactContainer$"+Rs,Hl="__reactEvents$"+Rs,xy="__reactListeners$"+Rs,wy="__reactHandles$"+Rs;function sn(e){var t=e[Ut];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ar]||r[Ut]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Dd(e);e!==null;){if(r=e[Ut])return r;e=Dd(e)}return t}e=r,r=e.parentNode}return null}function Vi(e){return e=e[Ut]||e[ar],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function go(e){return e[xi]||null}var Ql=[],Jn=-1;function Qr(e){return{current:e}}function se(e){0>Jn||(e.current=Ql[Jn],Ql[Jn]=null,Jn--)}function re(e,t){Jn++,Ql[Jn]=e.current,e.current=t}var Kr={},Me=Qr(Kr),Je=Qr(!1),bn=Kr;function js(e,t){var r=e.type.contextTypes;if(!r)return Kr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ye(e){return e=e.childContextTypes,e!=null}function Ba(){se(Je),se(Me)}function Bd(e,t,r){if(Me.current!==Kr)throw Error(P(168));re(Me,t),re(Je,r)}function Tm(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(P(108,s0(e)||"Unknown",s));return ce({},r,n)}function za(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kr,bn=Me.current,re(Me,e),re(Je,Je.current),!0}function zd(e,t,r){var n=e.stateNode;if(!n)throw Error(P(169));r?(e=Tm(e,t,bn),n.__reactInternalMemoizedMergedChildContext=e,se(Je),se(Me),re(Me,e)):se(Je),re(Je,r)}var Jt=null,yo=!1,rl=!1;function Pm(e){Jt===null?Jt=[e]:Jt.push(e)}function _y(e){yo=!0,Pm(e)}function Gr(){if(!rl&&Jt!==null){rl=!0;var e=0,t=ee;try{var r=Jt;for(ee=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Jt=null,yo=!1}catch(s){throw Jt!==null&&(Jt=Jt.slice(e+1)),tm(tu,Gr),s}finally{ee=t,rl=!1}}return null}var Yn=[],Xn=0,qa=null,Va=0,ht=[],ft=0,jn=null,tr=1,rr="";function Zr(e,t){Yn[Xn++]=Va,Yn[Xn++]=qa,qa=e,Va=t}function Om(e,t,r){ht[ft++]=tr,ht[ft++]=rr,ht[ft++]=jn,jn=e;var n=tr;e=rr;var s=32-Ct(n)-1;n&=~(1<<s),r+=1;var i=32-Ct(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,tr=1<<32-Ct(t)+s|r<<s|n,rr=i+e}else tr=1<<i|r<<s|n,rr=e}function uu(e){e.return!==null&&(Zr(e,1),Om(e,1,0))}function du(e){for(;e===qa;)qa=Yn[--Xn],Yn[Xn]=null,Va=Yn[--Xn],Yn[Xn]=null;for(;e===jn;)jn=ht[--ft],ht[ft]=null,rr=ht[--ft],ht[ft]=null,tr=ht[--ft],ht[ft]=null}var st=null,nt=null,ie=!1,Et=null;function Rm(e,t){var r=mt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function qd(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,st=e,nt=Ur(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,st=e,nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=jn!==null?{id:tr,overflow:rr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=mt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,st=e,nt=null,!0):!1;default:return!1}}function Gl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Jl(e){if(ie){var t=nt;if(t){var r=t;if(!qd(e,t)){if(Gl(e))throw Error(P(418));t=Ur(r.nextSibling);var n=st;t&&qd(e,t)?Rm(n,r):(e.flags=e.flags&-4097|2,ie=!1,st=e)}}else{if(Gl(e))throw Error(P(418));e.flags=e.flags&-4097|2,ie=!1,st=e}}}function Vd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;st=e}function oa(e){if(e!==st)return!1;if(!ie)return Vd(e),ie=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Wl(e.type,e.memoizedProps)),t&&(t=nt)){if(Gl(e))throw Am(),Error(P(418));for(;t;)Rm(e,t),t=Ur(t.nextSibling)}if(Vd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){nt=Ur(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}nt=null}}else nt=st?Ur(e.stateNode.nextSibling):null;return!0}function Am(){for(var e=nt;e;)e=Ur(e.nextSibling)}function Ns(){nt=st=null,ie=!1}function hu(e){Et===null?Et=[e]:Et.push(e)}var by=ur.ReactCurrentBatchConfig;function qs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(P(309));var n=r.stateNode}if(!n)throw Error(P(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(P(284));if(!r._owner)throw Error(P(290,e))}return e}function la(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Fd(e){var t=e._init;return t(e._payload)}function Im(e){function t(d,p){if(e){var g=d.deletions;g===null?(d.deletions=[p],d.flags|=16):g.push(p)}}function r(d,p){if(!e)return null;for(;p!==null;)t(d,p),p=p.sibling;return null}function n(d,p){for(d=new Map;p!==null;)p.key!==null?d.set(p.key,p):d.set(p.index,p),p=p.sibling;return d}function s(d,p){return d=qr(d,p),d.index=0,d.sibling=null,d}function i(d,p,g){return d.index=g,e?(g=d.alternate,g!==null?(g=g.index,g<p?(d.flags|=2,p):g):(d.flags|=2,p)):(d.flags|=1048576,p)}function o(d){return e&&d.alternate===null&&(d.flags|=2),d}function l(d,p,g,b){return p===null||p.tag!==6?(p=cl(g,d.mode,b),p.return=d,p):(p=s(p,g),p.return=d,p)}function c(d,p,g,b){var N=g.type;return N===Wn?h(d,p,g.props.children,b,g.key):p!==null&&(p.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===yr&&Fd(N)===p.type)?(b=s(p,g.props),b.ref=qs(d,p,g),b.return=d,b):(b=Ta(g.type,g.key,g.props,null,d.mode,b),b.ref=qs(d,p,g),b.return=d,b)}function u(d,p,g,b){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=ul(g,d.mode,b),p.return=d,p):(p=s(p,g.children||[]),p.return=d,p)}function h(d,p,g,b,N){return p===null||p.tag!==7?(p=wn(g,d.mode,b,N),p.return=d,p):(p=s(p,g),p.return=d,p)}function f(d,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=cl(""+p,d.mode,g),p.return=d,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Yi:return g=Ta(p.type,p.key,p.props,null,d.mode,g),g.ref=qs(d,null,p),g.return=d,g;case Fn:return p=ul(p,d.mode,g),p.return=d,p;case yr:var b=p._init;return f(d,b(p._payload),g)}if(Ks(p)||Ms(p))return p=wn(p,d.mode,g,null),p.return=d,p;la(d,p)}return null}function m(d,p,g,b){var N=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return N!==null?null:l(d,p,""+g,b);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Yi:return g.key===N?c(d,p,g,b):null;case Fn:return g.key===N?u(d,p,g,b):null;case yr:return N=g._init,m(d,p,N(g._payload),b)}if(Ks(g)||Ms(g))return N!==null?null:h(d,p,g,b,null);la(d,g)}return null}function y(d,p,g,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return d=d.get(g)||null,l(p,d,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Yi:return d=d.get(b.key===null?g:b.key)||null,c(p,d,b,N);case Fn:return d=d.get(b.key===null?g:b.key)||null,u(p,d,b,N);case yr:var k=b._init;return y(d,p,g,k(b._payload),N)}if(Ks(b)||Ms(b))return d=d.get(g)||null,h(p,d,b,N,null);la(p,b)}return null}function v(d,p,g,b){for(var N=null,k=null,T=p,S=p=0,A=null;T!==null&&S<g.length;S++){T.index>S?(A=T,T=null):A=T.sibling;var R=m(d,T,g[S],b);if(R===null){T===null&&(T=A);break}e&&T&&R.alternate===null&&t(d,T),p=i(R,p,S),k===null?N=R:k.sibling=R,k=R,T=A}if(S===g.length)return r(d,T),ie&&Zr(d,S),N;if(T===null){for(;S<g.length;S++)T=f(d,g[S],b),T!==null&&(p=i(T,p,S),k===null?N=T:k.sibling=T,k=T);return ie&&Zr(d,S),N}for(T=n(d,T);S<g.length;S++)A=y(T,d,S,g[S],b),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?S:A.key),p=i(A,p,S),k===null?N=A:k.sibling=A,k=A);return e&&T.forEach(function(Y){return t(d,Y)}),ie&&Zr(d,S),N}function w(d,p,g,b){var N=Ms(g);if(typeof N!="function")throw Error(P(150));if(g=N.call(g),g==null)throw Error(P(151));for(var k=N=null,T=p,S=p=0,A=null,R=g.next();T!==null&&!R.done;S++,R=g.next()){T.index>S?(A=T,T=null):A=T.sibling;var Y=m(d,T,R.value,b);if(Y===null){T===null&&(T=A);break}e&&T&&Y.alternate===null&&t(d,T),p=i(Y,p,S),k===null?N=Y:k.sibling=Y,k=Y,T=A}if(R.done)return r(d,T),ie&&Zr(d,S),N;if(T===null){for(;!R.done;S++,R=g.next())R=f(d,R.value,b),R!==null&&(p=i(R,p,S),k===null?N=R:k.sibling=R,k=R);return ie&&Zr(d,S),N}for(T=n(d,T);!R.done;S++,R=g.next())R=y(T,d,S,R.value,b),R!==null&&(e&&R.alternate!==null&&T.delete(R.key===null?S:R.key),p=i(R,p,S),k===null?N=R:k.sibling=R,k=R);return e&&T.forEach(function(ge){return t(d,ge)}),ie&&Zr(d,S),N}function x(d,p,g,b){if(typeof g=="object"&&g!==null&&g.type===Wn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Yi:e:{for(var N=g.key,k=p;k!==null;){if(k.key===N){if(N=g.type,N===Wn){if(k.tag===7){r(d,k.sibling),p=s(k,g.props.children),p.return=d,d=p;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===yr&&Fd(N)===k.type){r(d,k.sibling),p=s(k,g.props),p.ref=qs(d,k,g),p.return=d,d=p;break e}r(d,k);break}else t(d,k);k=k.sibling}g.type===Wn?(p=wn(g.props.children,d.mode,b,g.key),p.return=d,d=p):(b=Ta(g.type,g.key,g.props,null,d.mode,b),b.ref=qs(d,p,g),b.return=d,d=b)}return o(d);case Fn:e:{for(k=g.key;p!==null;){if(p.key===k)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){r(d,p.sibling),p=s(p,g.children||[]),p.return=d,d=p;break e}else{r(d,p);break}else t(d,p);p=p.sibling}p=ul(g,d.mode,b),p.return=d,d=p}return o(d);case yr:return k=g._init,x(d,p,k(g._payload),b)}if(Ks(g))return v(d,p,g,b);if(Ms(g))return w(d,p,g,b);la(d,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(r(d,p.sibling),p=s(p,g),p.return=d,d=p):(r(d,p),p=cl(g,d.mode,b),p.return=d,d=p),o(d)):r(d,p)}return x}var ks=Im(!0),$m=Im(!1),Fa=Qr(null),Wa=null,Zn=null,fu=null;function mu(){fu=Zn=Wa=null}function pu(e){var t=Fa.current;se(Fa),e._currentValue=t}function Yl(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function os(e,t){Wa=e,fu=Zn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ge=!0),e.firstContext=null)}function yt(e){var t=e._currentValue;if(fu!==e)if(e={context:e,memoizedValue:t,next:null},Zn===null){if(Wa===null)throw Error(P(308));Zn=e,Wa.dependencies={lanes:0,firstContext:e}}else Zn=Zn.next=e;return t}var an=null;function gu(e){an===null?an=[e]:an.push(e)}function Lm(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,gu(t)):(r.next=s.next,s.next=r),t.interleaved=r,or(e,n)}function or(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var vr=!1;function yu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Dr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,X&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,or(e,r)}return s=n.interleaved,s===null?(t.next=t,gu(n)):(t.next=s.next,s.next=t),n.interleaved=t,or(e,r)}function ja(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ru(e,r)}}function Wd(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ka(e,t,r,n){var s=e.updateQueue;vr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,l=i;do{var m=l.lane,y=l.eventTime;if((n&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,w=l;switch(m=t,y=r,w.tag){case 1:if(v=w.payload,typeof v=="function"){f=v.call(y,f,m);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,m=typeof v=="function"?v.call(y,f,m):v,m==null)break e;f=ce({},f,m);break e;case 2:vr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=y,c=f):h=h.next=y,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);kn|=o,e.lanes=o,e.memoizedState=f}}function Kd(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(P(191,s));s.call(n)}}}var Fi={},zt=Qr(Fi),wi=Qr(Fi),_i=Qr(Fi);function on(e){if(e===Fi)throw Error(P(174));return e}function vu(e,t){switch(re(_i,t),re(wi,e),re(zt,Fi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ol(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ol(t,e)}se(zt),re(zt,t)}function Ss(){se(zt),se(wi),se(_i)}function Um(e){on(_i.current);var t=on(zt.current),r=Ol(t,e.type);t!==r&&(re(wi,e),re(zt,r))}function xu(e){wi.current===e&&(se(zt),se(wi))}var oe=Qr(0);function Ha(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var nl=[];function wu(){for(var e=0;e<nl.length;e++)nl[e]._workInProgressVersionPrimary=null;nl.length=0}var Na=ur.ReactCurrentDispatcher,sl=ur.ReactCurrentBatchConfig,Nn=0,le=null,we=null,Se=null,Qa=!1,ri=!1,bi=0,jy=0;function Ie(){throw Error(P(321))}function _u(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ot(e[r],t[r]))return!1;return!0}function bu(e,t,r,n,s,i){if(Nn=i,le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Na.current=e===null||e.memoizedState===null?Ey:Cy,e=r(n,s),ri){i=0;do{if(ri=!1,bi=0,25<=i)throw Error(P(301));i+=1,Se=we=null,t.updateQueue=null,Na.current=Ty,e=r(n,s)}while(ri)}if(Na.current=Ga,t=we!==null&&we.next!==null,Nn=0,Se=we=le=null,Qa=!1,t)throw Error(P(300));return e}function ju(){var e=bi!==0;return bi=0,e}function It(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?le.memoizedState=Se=e:Se=Se.next=e,Se}function vt(){if(we===null){var e=le.alternate;e=e!==null?e.memoizedState:null}else e=we.next;var t=Se===null?le.memoizedState:Se.next;if(t!==null)Se=t,we=e;else{if(e===null)throw Error(P(310));we=e,e={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},Se===null?le.memoizedState=Se=e:Se=Se.next=e}return Se}function ji(e,t){return typeof t=="function"?t(e):t}function il(e){var t=vt(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=we,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((Nn&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,le.lanes|=h,kn|=h}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Ot(n,t.memoizedState)||(Ge=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,le.lanes|=i,kn|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function al(e){var t=vt(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Ot(i,t.memoizedState)||(Ge=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Dm(){}function Bm(e,t){var r=le,n=vt(),s=t(),i=!Ot(n.memoizedState,s);if(i&&(n.memoizedState=s,Ge=!0),n=n.queue,Nu(Vm.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Se!==null&&Se.memoizedState.tag&1){if(r.flags|=2048,Ni(9,qm.bind(null,r,n,s,t),void 0,null),Ee===null)throw Error(P(349));Nn&30||zm(r,t,s)}return s}function zm(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=le.updateQueue,t===null?(t={lastEffect:null,stores:null},le.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function qm(e,t,r,n){t.value=r,t.getSnapshot=n,Fm(t)&&Wm(e)}function Vm(e,t,r){return r(function(){Fm(t)&&Wm(e)})}function Fm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ot(e,r)}catch{return!0}}function Wm(e){var t=or(e,1);t!==null&&Tt(t,e,1,-1)}function Hd(e){var t=It();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:e},t.queue=e,e=e.dispatch=Sy.bind(null,le,e),[t.memoizedState,e]}function Ni(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=le.updateQueue,t===null?(t={lastEffect:null,stores:null},le.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Km(){return vt().memoizedState}function ka(e,t,r,n){var s=It();le.flags|=e,s.memoizedState=Ni(1|t,r,void 0,n===void 0?null:n)}function vo(e,t,r,n){var s=vt();n=n===void 0?null:n;var i=void 0;if(we!==null){var o=we.memoizedState;if(i=o.destroy,n!==null&&_u(n,o.deps)){s.memoizedState=Ni(t,r,i,n);return}}le.flags|=e,s.memoizedState=Ni(1|t,r,i,n)}function Qd(e,t){return ka(8390656,8,e,t)}function Nu(e,t){return vo(2048,8,e,t)}function Hm(e,t){return vo(4,2,e,t)}function Qm(e,t){return vo(4,4,e,t)}function Gm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jm(e,t,r){return r=r!=null?r.concat([e]):null,vo(4,4,Gm.bind(null,t,e),r)}function ku(){}function Ym(e,t){var r=vt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&_u(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Xm(e,t){var r=vt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&_u(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Zm(e,t,r){return Nn&21?(Ot(r,t)||(r=sm(),le.lanes|=r,kn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ge=!0),e.memoizedState=r)}function Ny(e,t){var r=ee;ee=r!==0&&4>r?r:4,e(!0);var n=sl.transition;sl.transition={};try{e(!1),t()}finally{ee=r,sl.transition=n}}function ep(){return vt().memoizedState}function ky(e,t,r){var n=zr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},tp(e))rp(t,r);else if(r=Lm(e,t,r,n),r!==null){var s=qe();Tt(r,e,n,s),np(r,t,n)}}function Sy(e,t,r){var n=zr(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(tp(e))rp(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,Ot(l,o)){var c=t.interleaved;c===null?(s.next=s,gu(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Lm(e,t,s,n),r!==null&&(s=qe(),Tt(r,e,n,s),np(r,t,n))}}function tp(e){var t=e.alternate;return e===le||t!==null&&t===le}function rp(e,t){ri=Qa=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function np(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ru(e,r)}}var Ga={readContext:yt,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},Ey={readContext:yt,useCallback:function(e,t){return It().memoizedState=[e,t===void 0?null:t],e},useContext:yt,useEffect:Qd,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ka(4194308,4,Gm.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ka(4194308,4,e,t)},useInsertionEffect:function(e,t){return ka(4,2,e,t)},useMemo:function(e,t){var r=It();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=It();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ky.bind(null,le,e),[n.memoizedState,e]},useRef:function(e){var t=It();return e={current:e},t.memoizedState=e},useState:Hd,useDebugValue:ku,useDeferredValue:function(e){return It().memoizedState=e},useTransition:function(){var e=Hd(!1),t=e[0];return e=Ny.bind(null,e[1]),It().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=le,s=It();if(ie){if(r===void 0)throw Error(P(407));r=r()}else{if(r=t(),Ee===null)throw Error(P(349));Nn&30||zm(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Qd(Vm.bind(null,n,i,e),[e]),n.flags|=2048,Ni(9,qm.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=It(),t=Ee.identifierPrefix;if(ie){var r=rr,n=tr;r=(n&~(1<<32-Ct(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=bi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=jy++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Cy={readContext:yt,useCallback:Ym,useContext:yt,useEffect:Nu,useImperativeHandle:Jm,useInsertionEffect:Hm,useLayoutEffect:Qm,useMemo:Xm,useReducer:il,useRef:Km,useState:function(){return il(ji)},useDebugValue:ku,useDeferredValue:function(e){var t=vt();return Zm(t,we.memoizedState,e)},useTransition:function(){var e=il(ji)[0],t=vt().memoizedState;return[e,t]},useMutableSource:Dm,useSyncExternalStore:Bm,useId:ep,unstable_isNewReconciler:!1},Ty={readContext:yt,useCallback:Ym,useContext:yt,useEffect:Nu,useImperativeHandle:Jm,useInsertionEffect:Hm,useLayoutEffect:Qm,useMemo:Xm,useReducer:al,useRef:Km,useState:function(){return al(ji)},useDebugValue:ku,useDeferredValue:function(e){var t=vt();return we===null?t.memoizedState=e:Zm(t,we.memoizedState,e)},useTransition:function(){var e=al(ji)[0],t=vt().memoizedState;return[e,t]},useMutableSource:Dm,useSyncExternalStore:Bm,useId:ep,unstable_isNewReconciler:!1};function _t(e,t){if(e&&e.defaultProps){t=ce({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Xl(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ce({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var xo={isMounted:function(e){return(e=e._reactInternals)?Pn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=qe(),s=zr(e),i=nr(n,s);i.payload=t,r!=null&&(i.callback=r),t=Dr(e,i,s),t!==null&&(Tt(t,e,s,n),ja(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=qe(),s=zr(e),i=nr(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Dr(e,i,s),t!==null&&(Tt(t,e,s,n),ja(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=qe(),n=zr(e),s=nr(r,n);s.tag=2,t!=null&&(s.callback=t),t=Dr(e,s,n),t!==null&&(Tt(t,e,n,r),ja(t,e,n))}};function Gd(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!gi(r,n)||!gi(s,i):!0}function sp(e,t,r){var n=!1,s=Kr,i=t.contextType;return typeof i=="object"&&i!==null?i=yt(i):(s=Ye(t)?bn:Me.current,n=t.contextTypes,i=(n=n!=null)?js(e,s):Kr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=xo,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Jd(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&xo.enqueueReplaceState(t,t.state,null)}function Zl(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},yu(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=yt(i):(i=Ye(t)?bn:Me.current,s.context=js(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Xl(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&xo.enqueueReplaceState(s,s.state,null),Ka(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Es(e,t){try{var r="",n=t;do r+=n0(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function ol(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ec(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Py=typeof WeakMap=="function"?WeakMap:Map;function ip(e,t,r){r=nr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ya||(Ya=!0,uc=n),ec(e,t)},r}function ap(e,t,r){r=nr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){ec(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ec(e,t),typeof n!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Yd(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Py;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Fy.bind(null,e,t,r),t.then(e,e))}function Xd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zd(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=nr(-1,1),t.tag=2,Dr(r,t,1))),r.lanes|=1),e)}var Oy=ur.ReactCurrentOwner,Ge=!1;function Be(e,t,r,n){t.child=e===null?$m(t,null,r,n):ks(t,e.child,r,n)}function eh(e,t,r,n,s){r=r.render;var i=t.ref;return os(t,s),n=bu(e,t,r,n,i,s),r=ju(),e!==null&&!Ge?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,lr(e,t,s)):(ie&&r&&uu(t),t.flags|=1,Be(e,t,n,s),t.child)}function th(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Au(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,op(e,t,i,n,s)):(e=Ta(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:gi,r(o,n)&&e.ref===t.ref)return lr(e,t,s)}return t.flags|=1,e=qr(i,n),e.ref=t.ref,e.return=t,t.child=e}function op(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(gi(i,n)&&e.ref===t.ref)if(Ge=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Ge=!0);else return t.lanes=e.lanes,lr(e,t,s)}return tc(e,t,r,n,s)}function lp(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(ts,et),et|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,re(ts,et),et|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,re(ts,et),et|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,re(ts,et),et|=n;return Be(e,t,s,r),t.child}function cp(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function tc(e,t,r,n,s){var i=Ye(r)?bn:Me.current;return i=js(t,i),os(t,s),r=bu(e,t,r,n,i,s),n=ju(),e!==null&&!Ge?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,lr(e,t,s)):(ie&&n&&uu(t),t.flags|=1,Be(e,t,r,s),t.child)}function rh(e,t,r,n,s){if(Ye(r)){var i=!0;za(t)}else i=!1;if(os(t,s),t.stateNode===null)Sa(e,t),sp(t,r,n),Zl(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=yt(u):(u=Ye(r)?bn:Me.current,u=js(t,u));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Jd(t,o,n,u),vr=!1;var m=t.memoizedState;o.state=m,Ka(t,n,o,s),c=t.memoizedState,l!==n||m!==c||Je.current||vr?(typeof h=="function"&&(Xl(t,r,h,n),c=t.memoizedState),(l=vr||Gd(t,r,l,n,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Mm(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:_t(t.type,l),o.props=u,f=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=yt(c):(c=Ye(r)?bn:Me.current,c=js(t,c));var y=r.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Jd(t,o,n,c),vr=!1,m=t.memoizedState,o.state=m,Ka(t,n,o,s);var v=t.memoizedState;l!==f||m!==v||Je.current||vr?(typeof y=="function"&&(Xl(t,r,y,n),v=t.memoizedState),(u=vr||Gd(t,r,u,n,m,v,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return rc(e,t,r,n,i,s)}function rc(e,t,r,n,s,i){cp(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&zd(t,r,!1),lr(e,t,i);n=t.stateNode,Oy.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=ks(t,e.child,null,i),t.child=ks(t,null,l,i)):Be(e,t,l,i),t.memoizedState=n.state,s&&zd(t,r,!0),t.child}function up(e){var t=e.stateNode;t.pendingContext?Bd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Bd(e,t.context,!1),vu(e,t.containerInfo)}function nh(e,t,r,n,s){return Ns(),hu(s),t.flags|=256,Be(e,t,r,n),t.child}var nc={dehydrated:null,treeContext:null,retryLane:0};function sc(e){return{baseLanes:e,cachePool:null,transitions:null}}function dp(e,t,r){var n=t.pendingProps,s=oe.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),re(oe,s&1),e===null)return Jl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=bo(o,n,0,null),e=wn(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=sc(r),t.memoizedState=nc,e):Su(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Ry(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=qr(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=qr(l,i):(i=wn(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?sc(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=nc,n}return i=e.child,e=i.sibling,n=qr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Su(e,t){return t=bo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ca(e,t,r,n){return n!==null&&hu(n),ks(t,e.child,null,r),e=Su(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ry(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=ol(Error(P(422))),ca(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=bo({mode:"visible",children:n.children},s,0,null),i=wn(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&ks(t,e.child,null,o),t.child.memoizedState=sc(o),t.memoizedState=nc,i);if(!(t.mode&1))return ca(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(P(419)),n=ol(i,n,void 0),ca(e,t,o,n)}if(l=(o&e.childLanes)!==0,Ge||l){if(n=Ee,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,or(e,s),Tt(n,e,s,-1))}return Ru(),n=ol(Error(P(421))),ca(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Wy.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,nt=Ur(s.nextSibling),st=t,ie=!0,Et=null,e!==null&&(ht[ft++]=tr,ht[ft++]=rr,ht[ft++]=jn,tr=e.id,rr=e.overflow,jn=t),t=Su(t,n.children),t.flags|=4096,t)}function sh(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Yl(e.return,t,r)}function ll(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function hp(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Be(e,t,n.children,r),n=oe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sh(e,r,t);else if(e.tag===19)sh(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(re(oe,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Ha(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),ll(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ha(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}ll(t,!0,r,null,i);break;case"together":ll(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function lr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),kn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,r=qr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=qr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Ay(e,t,r){switch(t.tag){case 3:up(t),Ns();break;case 5:Um(t);break;case 1:Ye(t.type)&&za(t);break;case 4:vu(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;re(Fa,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(re(oe,oe.current&1),t.flags|=128,null):r&t.child.childLanes?dp(e,t,r):(re(oe,oe.current&1),e=lr(e,t,r),e!==null?e.sibling:null);re(oe,oe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return hp(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),re(oe,oe.current),n)break;return null;case 22:case 23:return t.lanes=0,lp(e,t,r)}return lr(e,t,r)}var fp,ic,mp,pp;fp=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ic=function(){};mp=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,on(zt.current);var i=null;switch(r){case"input":s=El(e,s),n=El(e,n),i=[];break;case"select":s=ce({},s,{value:void 0}),n=ce({},n,{value:void 0}),i=[];break;case"textarea":s=Pl(e,s),n=Pl(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Da)}Rl(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ci.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ci.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ne("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};pp=function(e,t,r,n){r!==n&&(t.flags|=4)};function Vs(e,t){if(!ie)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function $e(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Iy(e,t,r){var n=t.pendingProps;switch(du(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(t),null;case 1:return Ye(t.type)&&Ba(),$e(t),null;case 3:return n=t.stateNode,Ss(),se(Je),se(Me),wu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(oa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Et!==null&&(fc(Et),Et=null))),ic(e,t),$e(t),null;case 5:xu(t);var s=on(_i.current);if(r=t.type,e!==null&&t.stateNode!=null)mp(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(P(166));return $e(t),null}if(e=on(zt.current),oa(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Ut]=t,n[xi]=i,e=(t.mode&1)!==0,r){case"dialog":ne("cancel",n),ne("close",n);break;case"iframe":case"object":case"embed":ne("load",n);break;case"video":case"audio":for(s=0;s<Qs.length;s++)ne(Qs[s],n);break;case"source":ne("error",n);break;case"img":case"image":case"link":ne("error",n),ne("load",n);break;case"details":ne("toggle",n);break;case"input":fd(n,i),ne("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ne("invalid",n);break;case"textarea":pd(n,i),ne("invalid",n)}Rl(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&aa(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&aa(n.textContent,l,e),s=["children",""+l]):ci.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ne("scroll",n)}switch(r){case"input":Xi(n),md(n,i,!0);break;case"textarea":Xi(n),gd(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Da)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Vf(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Ut]=t,e[xi]=n,fp(e,t,!1,!1),t.stateNode=e;e:{switch(o=Al(r,n),r){case"dialog":ne("cancel",e),ne("close",e),s=n;break;case"iframe":case"object":case"embed":ne("load",e),s=n;break;case"video":case"audio":for(s=0;s<Qs.length;s++)ne(Qs[s],e);s=n;break;case"source":ne("error",e),s=n;break;case"img":case"image":case"link":ne("error",e),ne("load",e),s=n;break;case"details":ne("toggle",e),s=n;break;case"input":fd(e,n),s=El(e,n),ne("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ce({},n,{value:void 0}),ne("invalid",e);break;case"textarea":pd(e,n),s=Pl(e,n),ne("invalid",e);break;default:s=n}Rl(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Kf(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ff(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ui(e,c):typeof c=="number"&&ui(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ci.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ne("scroll",e):c!=null&&Jc(e,i,c,o))}switch(r){case"input":Xi(e),md(e,n,!1);break;case"textarea":Xi(e),gd(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Wr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?ns(e,!!n.multiple,i,!1):n.defaultValue!=null&&ns(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Da)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $e(t),null;case 6:if(e&&t.stateNode!=null)pp(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(P(166));if(r=on(_i.current),on(zt.current),oa(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ut]=t,(i=n.nodeValue!==r)&&(e=st,e!==null))switch(e.tag){case 3:aa(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&aa(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ut]=t,t.stateNode=n}return $e(t),null;case 13:if(se(oe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ie&&nt!==null&&t.mode&1&&!(t.flags&128))Am(),Ns(),t.flags|=98560,i=!1;else if(i=oa(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(P(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[Ut]=t}else Ns(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$e(t),i=!1}else Et!==null&&(fc(Et),Et=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||oe.current&1?be===0&&(be=3):Ru())),t.updateQueue!==null&&(t.flags|=4),$e(t),null);case 4:return Ss(),ic(e,t),e===null&&yi(t.stateNode.containerInfo),$e(t),null;case 10:return pu(t.type._context),$e(t),null;case 17:return Ye(t.type)&&Ba(),$e(t),null;case 19:if(se(oe),i=t.memoizedState,i===null)return $e(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Vs(i,!1);else{if(be!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ha(e),o!==null){for(t.flags|=128,Vs(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return re(oe,oe.current&1|2),t.child}e=e.sibling}i.tail!==null&&me()>Cs&&(t.flags|=128,n=!0,Vs(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ha(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Vs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ie)return $e(t),null}else 2*me()-i.renderingStartTime>Cs&&r!==1073741824&&(t.flags|=128,n=!0,Vs(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=me(),t.sibling=null,r=oe.current,re(oe,n?r&1|2:r&1),t):($e(t),null);case 22:case 23:return Ou(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?et&1073741824&&($e(t),t.subtreeFlags&6&&(t.flags|=8192)):$e(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function $y(e,t){switch(du(t),t.tag){case 1:return Ye(t.type)&&Ba(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ss(),se(Je),se(Me),wu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return xu(t),null;case 13:if(se(oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));Ns()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return se(oe),null;case 4:return Ss(),null;case 10:return pu(t.type._context),null;case 22:case 23:return Ou(),null;case 24:return null;default:return null}}var ua=!1,Le=!1,Ly=typeof WeakSet=="function"?WeakSet:Set,L=null;function es(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){he(e,t,n)}else r.current=null}function ac(e,t,r){try{r()}catch(n){he(e,t,n)}}var ih=!1;function My(e,t){if(Vl=La,e=wm(),cu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=e,m=null;t:for(;;){for(var y;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===e)break t;if(m===r&&++u===s&&(l=o),m===i&&++h===n&&(c=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Fl={focusedElem:e,selectionRange:r},La=!1,L=t;L!==null;)if(t=L,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,L=e;else for(;L!==null;){t=L;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,x=v.memoizedState,d=t.stateNode,p=d.getSnapshotBeforeUpdate(t.elementType===t.type?w:_t(t.type,w),x);d.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(b){he(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,L=e;break}L=t.return}return v=ih,ih=!1,v}function ni(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&ac(t,r,i)}s=s.next}while(s!==n)}}function wo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function oc(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function gp(e){var t=e.alternate;t!==null&&(e.alternate=null,gp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ut],delete t[xi],delete t[Hl],delete t[xy],delete t[wy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yp(e){return e.tag===5||e.tag===3||e.tag===4}function ah(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Da));else if(n!==4&&(e=e.child,e!==null))for(lc(e,t,r),e=e.sibling;e!==null;)lc(e,t,r),e=e.sibling}function cc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(cc(e,t,r),e=e.sibling;e!==null;)cc(e,t,r),e=e.sibling}var Oe=null,kt=!1;function pr(e,t,r){for(r=r.child;r!==null;)vp(e,t,r),r=r.sibling}function vp(e,t,r){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(ho,r)}catch{}switch(r.tag){case 5:Le||es(r,t);case 6:var n=Oe,s=kt;Oe=null,pr(e,t,r),Oe=n,kt=s,Oe!==null&&(kt?(e=Oe,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Oe.removeChild(r.stateNode));break;case 18:Oe!==null&&(kt?(e=Oe,r=r.stateNode,e.nodeType===8?tl(e.parentNode,r):e.nodeType===1&&tl(e,r),mi(e)):tl(Oe,r.stateNode));break;case 4:n=Oe,s=kt,Oe=r.stateNode.containerInfo,kt=!0,pr(e,t,r),Oe=n,kt=s;break;case 0:case 11:case 14:case 15:if(!Le&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ac(r,t,o),s=s.next}while(s!==n)}pr(e,t,r);break;case 1:if(!Le&&(es(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){he(r,t,l)}pr(e,t,r);break;case 21:pr(e,t,r);break;case 22:r.mode&1?(Le=(n=Le)||r.memoizedState!==null,pr(e,t,r),Le=n):pr(e,t,r);break;default:pr(e,t,r)}}function oh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Ly),t.forEach(function(n){var s=Ky.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function xt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Oe=l.stateNode,kt=!1;break e;case 3:Oe=l.stateNode.containerInfo,kt=!0;break e;case 4:Oe=l.stateNode.containerInfo,kt=!0;break e}l=l.return}if(Oe===null)throw Error(P(160));vp(i,o,s),Oe=null,kt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){he(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)xp(t,e),t=t.sibling}function xp(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xt(t,e),Rt(e),n&4){try{ni(3,e,e.return),wo(3,e)}catch(w){he(e,e.return,w)}try{ni(5,e,e.return)}catch(w){he(e,e.return,w)}}break;case 1:xt(t,e),Rt(e),n&512&&r!==null&&es(r,r.return);break;case 5:if(xt(t,e),Rt(e),n&512&&r!==null&&es(r,r.return),e.flags&32){var s=e.stateNode;try{ui(s,"")}catch(w){he(e,e.return,w)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&zf(s,i),Al(l,o);var u=Al(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?Kf(s,f):h==="dangerouslySetInnerHTML"?Ff(s,f):h==="children"?ui(s,f):Jc(s,h,f,u)}switch(l){case"input":Cl(s,i);break;case"textarea":qf(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?ns(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?ns(s,!!i.multiple,i.defaultValue,!0):ns(s,!!i.multiple,i.multiple?[]:"",!1))}s[xi]=i}catch(w){he(e,e.return,w)}}break;case 6:if(xt(t,e),Rt(e),n&4){if(e.stateNode===null)throw Error(P(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){he(e,e.return,w)}}break;case 3:if(xt(t,e),Rt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{mi(t.containerInfo)}catch(w){he(e,e.return,w)}break;case 4:xt(t,e),Rt(e);break;case 13:xt(t,e),Rt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Tu=me())),n&4&&oh(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(Le=(u=Le)||h,xt(t,e),Le=u):xt(t,e),Rt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(L=e,h=e.child;h!==null;){for(f=L=h;L!==null;){switch(m=L,y=m.child,m.tag){case 0:case 11:case 14:case 15:ni(4,m,m.return);break;case 1:es(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(w){he(n,r,w)}}break;case 5:es(m,m.return);break;case 22:if(m.memoizedState!==null){ch(f);continue}}y!==null?(y.return=m,L=y):ch(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Wf("display",o))}catch(w){he(e,e.return,w)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){he(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:xt(t,e),Rt(e),n&4&&oh(e);break;case 21:break;default:xt(t,e),Rt(e)}}function Rt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(yp(r)){var n=r;break e}r=r.return}throw Error(P(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(ui(s,""),n.flags&=-33);var i=ah(e);cc(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=ah(e);lc(e,l,o);break;default:throw Error(P(161))}}catch(c){he(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Uy(e,t,r){L=e,wp(e)}function wp(e,t,r){for(var n=(e.mode&1)!==0;L!==null;){var s=L,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||ua;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Le;l=ua;var u=Le;if(ua=o,(Le=c)&&!u)for(L=s;L!==null;)o=L,c=o.child,o.tag===22&&o.memoizedState!==null?uh(s):c!==null?(c.return=o,L=c):uh(s);for(;i!==null;)L=i,wp(i),i=i.sibling;L=s,ua=l,Le=u}lh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,L=i):lh(e)}}function lh(e){for(;L!==null;){var t=L;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Le||wo(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Le)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:_t(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Kd(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Kd(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&mi(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}Le||t.flags&512&&oc(t)}catch(m){he(t,t.return,m)}}if(t===e){L=null;break}if(r=t.sibling,r!==null){r.return=t.return,L=r;break}L=t.return}}function ch(e){for(;L!==null;){var t=L;if(t===e){L=null;break}var r=t.sibling;if(r!==null){r.return=t.return,L=r;break}L=t.return}}function uh(e){for(;L!==null;){var t=L;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{wo(4,t)}catch(c){he(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){he(t,s,c)}}var i=t.return;try{oc(t)}catch(c){he(t,i,c)}break;case 5:var o=t.return;try{oc(t)}catch(c){he(t,o,c)}}}catch(c){he(t,t.return,c)}if(t===e){L=null;break}var l=t.sibling;if(l!==null){l.return=t.return,L=l;break}L=t.return}}var Dy=Math.ceil,Ja=ur.ReactCurrentDispatcher,Eu=ur.ReactCurrentOwner,gt=ur.ReactCurrentBatchConfig,X=0,Ee=null,ve=null,Re=0,et=0,ts=Qr(0),be=0,ki=null,kn=0,_o=0,Cu=0,si=null,Qe=null,Tu=0,Cs=1/0,Qt=null,Ya=!1,uc=null,Br=null,da=!1,Ar=null,Xa=0,ii=0,dc=null,Ea=-1,Ca=0;function qe(){return X&6?me():Ea!==-1?Ea:Ea=me()}function zr(e){return e.mode&1?X&2&&Re!==0?Re&-Re:by.transition!==null?(Ca===0&&(Ca=sm()),Ca):(e=ee,e!==0||(e=window.event,e=e===void 0?16:dm(e.type)),e):1}function Tt(e,t,r,n){if(50<ii)throw ii=0,dc=null,Error(P(185));zi(e,r,n),(!(X&2)||e!==Ee)&&(e===Ee&&(!(X&2)&&(_o|=r),be===4&&_r(e,Re)),Xe(e,n),r===1&&X===0&&!(t.mode&1)&&(Cs=me()+500,yo&&Gr()))}function Xe(e,t){var r=e.callbackNode;b0(e,t);var n=$a(e,e===Ee?Re:0);if(n===0)r!==null&&xd(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&xd(r),t===1)e.tag===0?_y(dh.bind(null,e)):Pm(dh.bind(null,e)),yy(function(){!(X&6)&&Gr()}),r=null;else{switch(im(n)){case 1:r=tu;break;case 4:r=rm;break;case 16:r=Ia;break;case 536870912:r=nm;break;default:r=Ia}r=Cp(r,_p.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function _p(e,t){if(Ea=-1,Ca=0,X&6)throw Error(P(327));var r=e.callbackNode;if(ls()&&e.callbackNode!==r)return null;var n=$a(e,e===Ee?Re:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Za(e,n);else{t=n;var s=X;X|=2;var i=jp();(Ee!==e||Re!==t)&&(Qt=null,Cs=me()+500,xn(e,t));do try{qy();break}catch(l){bp(e,l)}while(!0);mu(),Ja.current=i,X=s,ve!==null?t=0:(Ee=null,Re=0,t=be)}if(t!==0){if(t===2&&(s=Ul(e),s!==0&&(n=s,t=hc(e,s))),t===1)throw r=ki,xn(e,0),_r(e,n),Xe(e,me()),r;if(t===6)_r(e,n);else{if(s=e.current.alternate,!(n&30)&&!By(s)&&(t=Za(e,n),t===2&&(i=Ul(e),i!==0&&(n=i,t=hc(e,i))),t===1))throw r=ki,xn(e,0),_r(e,n),Xe(e,me()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(P(345));case 2:en(e,Qe,Qt);break;case 3:if(_r(e,n),(n&130023424)===n&&(t=Tu+500-me(),10<t)){if($a(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){qe(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Kl(en.bind(null,e,Qe,Qt),t);break}en(e,Qe,Qt);break;case 4:if(_r(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Ct(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=me()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Dy(n/1960))-n,10<n){e.timeoutHandle=Kl(en.bind(null,e,Qe,Qt),n);break}en(e,Qe,Qt);break;case 5:en(e,Qe,Qt);break;default:throw Error(P(329))}}}return Xe(e,me()),e.callbackNode===r?_p.bind(null,e):null}function hc(e,t){var r=si;return e.current.memoizedState.isDehydrated&&(xn(e,t).flags|=256),e=Za(e,t),e!==2&&(t=Qe,Qe=r,t!==null&&fc(t)),e}function fc(e){Qe===null?Qe=e:Qe.push.apply(Qe,e)}function By(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Ot(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _r(e,t){for(t&=~Cu,t&=~_o,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ct(t),n=1<<r;e[r]=-1,t&=~n}}function dh(e){if(X&6)throw Error(P(327));ls();var t=$a(e,0);if(!(t&1))return Xe(e,me()),null;var r=Za(e,t);if(e.tag!==0&&r===2){var n=Ul(e);n!==0&&(t=n,r=hc(e,n))}if(r===1)throw r=ki,xn(e,0),_r(e,t),Xe(e,me()),r;if(r===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,en(e,Qe,Qt),Xe(e,me()),null}function Pu(e,t){var r=X;X|=1;try{return e(t)}finally{X=r,X===0&&(Cs=me()+500,yo&&Gr())}}function Sn(e){Ar!==null&&Ar.tag===0&&!(X&6)&&ls();var t=X;X|=1;var r=gt.transition,n=ee;try{if(gt.transition=null,ee=1,e)return e()}finally{ee=n,gt.transition=r,X=t,!(X&6)&&Gr()}}function Ou(){et=ts.current,se(ts)}function xn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,gy(r)),ve!==null)for(r=ve.return;r!==null;){var n=r;switch(du(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ba();break;case 3:Ss(),se(Je),se(Me),wu();break;case 5:xu(n);break;case 4:Ss();break;case 13:se(oe);break;case 19:se(oe);break;case 10:pu(n.type._context);break;case 22:case 23:Ou()}r=r.return}if(Ee=e,ve=e=qr(e.current,null),Re=et=t,be=0,ki=null,Cu=_o=kn=0,Qe=si=null,an!==null){for(t=0;t<an.length;t++)if(r=an[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}an=null}return e}function bp(e,t){do{var r=ve;try{if(mu(),Na.current=Ga,Qa){for(var n=le.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Qa=!1}if(Nn=0,Se=we=le=null,ri=!1,bi=0,Eu.current=null,r===null||r.return===null){be=1,ki=t,ve=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Re,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Xd(o);if(y!==null){y.flags&=-257,Zd(y,o,l,i,t),y.mode&1&&Yd(i,u,t),t=y,c=u;var v=t.updateQueue;if(v===null){var w=new Set;w.add(c),t.updateQueue=w}else v.add(c);break e}else{if(!(t&1)){Yd(i,u,t),Ru();break e}c=Error(P(426))}}else if(ie&&l.mode&1){var x=Xd(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Zd(x,o,l,i,t),hu(Es(c,l));break e}}i=c=Es(c,l),be!==4&&(be=2),si===null?si=[i]:si.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var d=ip(i,c,t);Wd(i,d);break e;case 1:l=c;var p=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Br===null||!Br.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var b=ap(i,l,t);Wd(i,b);break e}}i=i.return}while(i!==null)}kp(r)}catch(N){t=N,ve===r&&r!==null&&(ve=r=r.return);continue}break}while(!0)}function jp(){var e=Ja.current;return Ja.current=Ga,e===null?Ga:e}function Ru(){(be===0||be===3||be===2)&&(be=4),Ee===null||!(kn&268435455)&&!(_o&268435455)||_r(Ee,Re)}function Za(e,t){var r=X;X|=2;var n=jp();(Ee!==e||Re!==t)&&(Qt=null,xn(e,t));do try{zy();break}catch(s){bp(e,s)}while(!0);if(mu(),X=r,Ja.current=n,ve!==null)throw Error(P(261));return Ee=null,Re=0,be}function zy(){for(;ve!==null;)Np(ve)}function qy(){for(;ve!==null&&!f0();)Np(ve)}function Np(e){var t=Ep(e.alternate,e,et);e.memoizedProps=e.pendingProps,t===null?kp(e):ve=t,Eu.current=null}function kp(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=$y(r,t),r!==null){r.flags&=32767,ve=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{be=6,ve=null;return}}else if(r=Iy(r,t,et),r!==null){ve=r;return}if(t=t.sibling,t!==null){ve=t;return}ve=t=e}while(t!==null);be===0&&(be=5)}function en(e,t,r){var n=ee,s=gt.transition;try{gt.transition=null,ee=1,Vy(e,t,r,n)}finally{gt.transition=s,ee=n}return null}function Vy(e,t,r,n){do ls();while(Ar!==null);if(X&6)throw Error(P(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(j0(e,i),e===Ee&&(ve=Ee=null,Re=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||da||(da=!0,Cp(Ia,function(){return ls(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=gt.transition,gt.transition=null;var o=ee;ee=1;var l=X;X|=4,Eu.current=null,My(e,r),xp(r,e),cy(Fl),La=!!Vl,Fl=Vl=null,e.current=r,Uy(r),m0(),X=l,ee=o,gt.transition=i}else e.current=r;if(da&&(da=!1,Ar=e,Xa=s),i=e.pendingLanes,i===0&&(Br=null),y0(r.stateNode),Xe(e,me()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ya)throw Ya=!1,e=uc,uc=null,e;return Xa&1&&e.tag!==0&&ls(),i=e.pendingLanes,i&1?e===dc?ii++:(ii=0,dc=e):ii=0,Gr(),null}function ls(){if(Ar!==null){var e=im(Xa),t=gt.transition,r=ee;try{if(gt.transition=null,ee=16>e?16:e,Ar===null)var n=!1;else{if(e=Ar,Ar=null,Xa=0,X&6)throw Error(P(331));var s=X;for(X|=4,L=e.current;L!==null;){var i=L,o=i.child;if(L.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(L=u;L!==null;){var h=L;switch(h.tag){case 0:case 11:case 15:ni(8,h,i)}var f=h.child;if(f!==null)f.return=h,L=f;else for(;L!==null;){h=L;var m=h.sibling,y=h.return;if(gp(h),h===u){L=null;break}if(m!==null){m.return=y,L=m;break}L=y}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}L=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,L=o;else e:for(;L!==null;){if(i=L,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ni(9,i,i.return)}var d=i.sibling;if(d!==null){d.return=i.return,L=d;break e}L=i.return}}var p=e.current;for(L=p;L!==null;){o=L;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,L=g;else e:for(o=p;L!==null;){if(l=L,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:wo(9,l)}}catch(N){he(l,l.return,N)}if(l===o){L=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,L=b;break e}L=l.return}}if(X=s,Gr(),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(ho,e)}catch{}n=!0}return n}finally{ee=r,gt.transition=t}}return!1}function hh(e,t,r){t=Es(r,t),t=ip(e,t,1),e=Dr(e,t,1),t=qe(),e!==null&&(zi(e,1,t),Xe(e,t))}function he(e,t,r){if(e.tag===3)hh(e,e,r);else for(;t!==null;){if(t.tag===3){hh(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Br===null||!Br.has(n))){e=Es(r,e),e=ap(t,e,1),t=Dr(t,e,1),e=qe(),t!==null&&(zi(t,1,e),Xe(t,e));break}}t=t.return}}function Fy(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=qe(),e.pingedLanes|=e.suspendedLanes&r,Ee===e&&(Re&r)===r&&(be===4||be===3&&(Re&130023424)===Re&&500>me()-Tu?xn(e,0):Cu|=r),Xe(e,t)}function Sp(e,t){t===0&&(e.mode&1?(t=ta,ta<<=1,!(ta&130023424)&&(ta=4194304)):t=1);var r=qe();e=or(e,t),e!==null&&(zi(e,t,r),Xe(e,r))}function Wy(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Sp(e,r)}function Ky(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(P(314))}n!==null&&n.delete(t),Sp(e,r)}var Ep;Ep=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Je.current)Ge=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ge=!1,Ay(e,t,r);Ge=!!(e.flags&131072)}else Ge=!1,ie&&t.flags&1048576&&Om(t,Va,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Sa(e,t),e=t.pendingProps;var s=js(t,Me.current);os(t,r),s=bu(null,t,n,e,s,r);var i=ju();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ye(n)?(i=!0,za(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,yu(t),s.updater=xo,t.stateNode=s,s._reactInternals=t,Zl(t,n,e,r),t=rc(null,t,n,!0,i,r)):(t.tag=0,ie&&i&&uu(t),Be(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Sa(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Qy(n),e=_t(n,e),s){case 0:t=tc(null,t,n,e,r);break e;case 1:t=rh(null,t,n,e,r);break e;case 11:t=eh(null,t,n,e,r);break e;case 14:t=th(null,t,n,_t(n.type,e),r);break e}throw Error(P(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:_t(n,s),tc(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:_t(n,s),rh(e,t,n,s,r);case 3:e:{if(up(t),e===null)throw Error(P(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Mm(e,t),Ka(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Es(Error(P(423)),t),t=nh(e,t,n,r,s);break e}else if(n!==s){s=Es(Error(P(424)),t),t=nh(e,t,n,r,s);break e}else for(nt=Ur(t.stateNode.containerInfo.firstChild),st=t,ie=!0,Et=null,r=$m(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ns(),n===s){t=lr(e,t,r);break e}Be(e,t,n,r)}t=t.child}return t;case 5:return Um(t),e===null&&Jl(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Wl(n,s)?o=null:i!==null&&Wl(n,i)&&(t.flags|=32),cp(e,t),Be(e,t,o,r),t.child;case 6:return e===null&&Jl(t),null;case 13:return dp(e,t,r);case 4:return vu(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ks(t,null,n,r):Be(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:_t(n,s),eh(e,t,n,s,r);case 7:return Be(e,t,t.pendingProps,r),t.child;case 8:return Be(e,t,t.pendingProps.children,r),t.child;case 12:return Be(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,re(Fa,n._currentValue),n._currentValue=o,i!==null)if(Ot(i.value,o)){if(i.children===s.children&&!Je.current){t=lr(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=nr(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Yl(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(P(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Yl(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Be(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,os(t,r),s=yt(s),n=n(s),t.flags|=1,Be(e,t,n,r),t.child;case 14:return n=t.type,s=_t(n,t.pendingProps),s=_t(n.type,s),th(e,t,n,s,r);case 15:return op(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:_t(n,s),Sa(e,t),t.tag=1,Ye(n)?(e=!0,za(t)):e=!1,os(t,r),sp(t,n,s),Zl(t,n,s,r),rc(null,t,n,!0,e,r);case 19:return hp(e,t,r);case 22:return lp(e,t,r)}throw Error(P(156,t.tag))};function Cp(e,t){return tm(e,t)}function Hy(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mt(e,t,r,n){return new Hy(e,t,r,n)}function Au(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qy(e){if(typeof e=="function")return Au(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Xc)return 11;if(e===Zc)return 14}return 2}function qr(e,t){var r=e.alternate;return r===null?(r=mt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ta(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")Au(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Wn:return wn(r.children,s,i,t);case Yc:o=8,s|=8;break;case jl:return e=mt(12,r,t,s|2),e.elementType=jl,e.lanes=i,e;case Nl:return e=mt(13,r,t,s),e.elementType=Nl,e.lanes=i,e;case kl:return e=mt(19,r,t,s),e.elementType=kl,e.lanes=i,e;case Uf:return bo(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Lf:o=10;break e;case Mf:o=9;break e;case Xc:o=11;break e;case Zc:o=14;break e;case yr:o=16,n=null;break e}throw Error(P(130,e==null?e:typeof e,""))}return t=mt(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function wn(e,t,r,n){return e=mt(7,e,n,t),e.lanes=r,e}function bo(e,t,r,n){return e=mt(22,e,n,t),e.elementType=Uf,e.lanes=r,e.stateNode={isHidden:!1},e}function cl(e,t,r){return e=mt(6,e,null,t),e.lanes=r,e}function ul(e,t,r){return t=mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gy(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fo(0),this.expirationTimes=Fo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fo(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Iu(e,t,r,n,s,i,o,l,c){return e=new Gy(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=mt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},yu(i),e}function Jy(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Tp(e){if(!e)return Kr;e=e._reactInternals;e:{if(Pn(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ye(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var r=e.type;if(Ye(r))return Tm(e,r,t)}return t}function Pp(e,t,r,n,s,i,o,l,c){return e=Iu(r,n,!0,e,s,i,o,l,c),e.context=Tp(null),r=e.current,n=qe(),s=zr(r),i=nr(n,s),i.callback=t??null,Dr(r,i,s),e.current.lanes=s,zi(e,s,n),Xe(e,n),e}function jo(e,t,r,n){var s=t.current,i=qe(),o=zr(s);return r=Tp(r),t.context===null?t.context=r:t.pendingContext=r,t=nr(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Dr(s,t,o),e!==null&&(Tt(e,s,o,i),ja(e,s,o)),o}function eo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function $u(e,t){fh(e,t),(e=e.alternate)&&fh(e,t)}function Yy(){return null}var Op=typeof reportError=="function"?reportError:function(e){console.error(e)};function Lu(e){this._internalRoot=e}No.prototype.render=Lu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));jo(e,t,null,null)};No.prototype.unmount=Lu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sn(function(){jo(null,e,null,null)}),t[ar]=null}};function No(e){this._internalRoot=e}No.prototype.unstable_scheduleHydration=function(e){if(e){var t=lm();e={blockedOn:null,target:e,priority:t};for(var r=0;r<wr.length&&t!==0&&t<wr[r].priority;r++);wr.splice(r,0,e),r===0&&um(e)}};function Mu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ko(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mh(){}function Xy(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=eo(o);i.call(u)}}var o=Pp(t,n,e,0,null,!1,!1,"",mh);return e._reactRootContainer=o,e[ar]=o.current,yi(e.nodeType===8?e.parentNode:e),Sn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=eo(c);l.call(u)}}var c=Iu(e,0,!1,null,null,!1,!1,"",mh);return e._reactRootContainer=c,e[ar]=c.current,yi(e.nodeType===8?e.parentNode:e),Sn(function(){jo(t,c,r,n)}),c}function So(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=eo(o);l.call(c)}}jo(t,o,e,s)}else o=Xy(r,t,e,s,n);return eo(o)}am=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Hs(t.pendingLanes);r!==0&&(ru(t,r|1),Xe(t,me()),!(X&6)&&(Cs=me()+500,Gr()))}break;case 13:Sn(function(){var n=or(e,1);if(n!==null){var s=qe();Tt(n,e,1,s)}}),$u(e,1)}};nu=function(e){if(e.tag===13){var t=or(e,134217728);if(t!==null){var r=qe();Tt(t,e,134217728,r)}$u(e,134217728)}};om=function(e){if(e.tag===13){var t=zr(e),r=or(e,t);if(r!==null){var n=qe();Tt(r,e,t,n)}$u(e,t)}};lm=function(){return ee};cm=function(e,t){var r=ee;try{return ee=e,t()}finally{ee=r}};$l=function(e,t,r){switch(t){case"input":if(Cl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=go(n);if(!s)throw Error(P(90));Bf(n),Cl(n,s)}}}break;case"textarea":qf(e,r);break;case"select":t=r.value,t!=null&&ns(e,!!r.multiple,t,!1)}};Gf=Pu;Jf=Sn;var Zy={usingClientEntryPoint:!1,Events:[Vi,Gn,go,Hf,Qf,Pu]},Fs={findFiberByHostInstance:sn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ev={bundleType:Fs.bundleType,version:Fs.version,rendererPackageName:Fs.rendererPackageName,rendererConfig:Fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zf(e),e===null?null:e.stateNode},findFiberByHostInstance:Fs.findFiberByHostInstance||Yy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ha=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ha.isDisabled&&ha.supportsFiber)try{ho=ha.inject(ev),Bt=ha}catch{}}at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zy;at.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mu(t))throw Error(P(200));return Jy(e,t,null,r)};at.createRoot=function(e,t){if(!Mu(e))throw Error(P(299));var r=!1,n="",s=Op;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Iu(e,1,!1,null,null,r,!1,n,s),e[ar]=t.current,yi(e.nodeType===8?e.parentNode:e),new Lu(t)};at.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=Zf(t),e=e===null?null:e.stateNode,e};at.flushSync=function(e){return Sn(e)};at.hydrate=function(e,t,r){if(!ko(t))throw Error(P(200));return So(null,e,t,!0,r)};at.hydrateRoot=function(e,t,r){if(!Mu(e))throw Error(P(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Op;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Pp(t,null,e,1,r??null,s,!1,i,o),e[ar]=t.current,yi(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new No(t)};at.render=function(e,t,r){if(!ko(t))throw Error(P(200));return So(null,e,t,!1,r)};at.unmountComponentAtNode=function(e){if(!ko(e))throw Error(P(40));return e._reactRootContainer?(Sn(function(){So(null,null,e,!1,function(){e._reactRootContainer=null,e[ar]=null})}),!0):!1};at.unstable_batchedUpdates=Pu;at.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ko(r))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return So(e,t,r,!1,n)};at.version="18.3.1-next-f1338f8080-20240426";function Rp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rp)}catch(e){console.error(e)}}Rp(),Rf.exports=at;var tv=Rf.exports,ph=tv;_l.createRoot=ph.createRoot,_l.hydrateRoot=ph.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Si(){return Si=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Si.apply(this,arguments)}var Ir;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ir||(Ir={}));const gh="popstate";function rv(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return mc("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:to(s)}return sv(t,r,null,e)}function pe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Uu(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function nv(){return Math.random().toString(36).substr(2,8)}function yh(e,t){return{usr:e.state,key:e.key,idx:t}}function mc(e,t,r,n){return r===void 0&&(r=null),Si({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?As(t):t,{state:r,key:t&&t.key||n||nv()})}function to(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function As(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function sv(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=Ir.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(Si({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){l=Ir.Pop;let x=h(),d=x==null?null:x-u;u=x,c&&c({action:l,location:w.location,delta:d})}function m(x,d){l=Ir.Push;let p=mc(w.location,x,d);u=h()+1;let g=yh(p,u),b=w.createHref(p);try{o.pushState(g,"",b)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(b)}i&&c&&c({action:l,location:w.location,delta:1})}function y(x,d){l=Ir.Replace;let p=mc(w.location,x,d);u=h();let g=yh(p,u),b=w.createHref(p);o.replaceState(g,"",b),i&&c&&c({action:l,location:w.location,delta:0})}function v(x){let d=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof x=="string"?x:to(x);return p=p.replace(/ $/,"%20"),pe(d,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,d)}let w={get action(){return l},get location(){return e(s,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(gh,f),c=x,()=>{s.removeEventListener(gh,f),c=null}},createHref(x){return t(s,x)},createURL:v,encodeLocation(x){let d=v(x);return{pathname:d.pathname,search:d.search,hash:d.hash}},push:m,replace:y,go(x){return o.go(x)}};return w}var vh;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(vh||(vh={}));function iv(e,t,r){return r===void 0&&(r="/"),av(e,t,r)}function av(e,t,r,n){let s=typeof t=="string"?As(t):t,i=Du(s.pathname||"/",r);if(i==null)return null;let o=Ap(e);ov(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=xv(i);l=gv(o[c],u)}return l}function Ap(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(pe(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Vr([n,c.relativePath]),h=r.concat(c);i.children&&i.children.length>0&&(pe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Ap(i.children,t,h,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:mv(u,i.index),routesMeta:h})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of Ip(i.path))s(i,o,c)}),t}function Ip(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Ip(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function ov(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:pv(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const lv=/^:[\w-]+$/,cv=3,uv=2,dv=1,hv=10,fv=-2,xh=e=>e==="*";function mv(e,t){let r=e.split("/"),n=r.length;return r.some(xh)&&(n+=fv),t&&(n+=uv),r.filter(s=>!xh(s)).reduce((s,i)=>s+(lv.test(i)?cv:i===""?dv:hv),n)}function pv(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function gv(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,h=i==="/"?t:t.slice(i.length)||"/",f=yv({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Vr([i,f.pathname]),pathnameBase:Nv(Vr([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Vr([i,f.pathnameBase]))}return o}function yv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=vv(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,h,f)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let w=l[f]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const v=l[f];return y&&!v?u[m]=void 0:u[m]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function vv(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Uu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function xv(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Uu(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Du(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const wv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_v=e=>wv.test(e);function bv(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?As(e):e,i;if(r)if(_v(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Uu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=wh(r.substring(1),"/"):i=wh(r,t)}else i=t;return{pathname:i,search:kv(n),hash:Sv(s)}}function wh(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function dl(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jv(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Bu(e,t){let r=jv(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function zu(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=As(e):(s=Si({},e),pe(!s.pathname||!s.pathname.includes("?"),dl("?","pathname","search",s)),pe(!s.pathname||!s.pathname.includes("#"),dl("#","pathname","hash",s)),pe(!s.search||!s.search.includes("#"),dl("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=bv(s,l),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Vr=e=>e.join("/").replace(/\/\/+/g,"/"),Nv=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),kv=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Sv=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Ev(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const $p=["post","put","patch","delete"];new Set($p);const Cv=["get",...$p];new Set(Cv);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ei(){return Ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ei.apply(this,arguments)}const qu=j.createContext(null),Tv=j.createContext(null),Jr=j.createContext(null),Eo=j.createContext(null),Vt=j.createContext({outlet:null,matches:[],isDataRoute:!1}),Lp=j.createContext(null);function Pv(e,t){let{relative:r}=t===void 0?{}:t;Is()||pe(!1);let{basename:n,navigator:s}=j.useContext(Jr),{hash:i,pathname:o,search:l}=Up(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Vr([n,o])),s.createHref({pathname:c,search:l,hash:i})}function Is(){return j.useContext(Eo)!=null}function On(){return Is()||pe(!1),j.useContext(Eo).location}function Mp(e){j.useContext(Jr).static||j.useLayoutEffect(e)}function $s(){let{isDataRoute:e}=j.useContext(Vt);return e?Kv():Ov()}function Ov(){Is()||pe(!1);let e=j.useContext(qu),{basename:t,future:r,navigator:n}=j.useContext(Jr),{matches:s}=j.useContext(Vt),{pathname:i}=On(),o=JSON.stringify(Bu(s,r.v7_relativeSplatPath)),l=j.useRef(!1);return Mp(()=>{l.current=!0}),j.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=zu(u,JSON.parse(o),i,h.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Vr([t,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[t,n,o,i,e])}const Rv=j.createContext(null);function Av(e){let t=j.useContext(Vt).outlet;return t&&j.createElement(Rv.Provider,{value:e},t)}function Iv(){let{matches:e}=j.useContext(Vt),t=e[e.length-1];return t?t.params:{}}function Up(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=j.useContext(Jr),{matches:s}=j.useContext(Vt),{pathname:i}=On(),o=JSON.stringify(Bu(s,n.v7_relativeSplatPath));return j.useMemo(()=>zu(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function $v(e,t){return Lv(e,t)}function Lv(e,t,r,n){Is()||pe(!1);let{navigator:s}=j.useContext(Jr),{matches:i}=j.useContext(Vt),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=On(),h;if(t){var f;let x=typeof t=="string"?As(t):t;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||pe(!1),h=x}else h=u;let m=h.pathname||"/",y=m;if(c!=="/"){let x=c.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=iv(e,{pathname:y}),w=zv(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Vr([c,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Vr([c,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,r,n);return t&&w?j.createElement(Eo.Provider,{value:{location:Ei({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ir.Pop}},w):w}function Mv(){let e=Wv(),t=Ev(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),r?j.createElement("pre",{style:s},r):null,null)}const Uv=j.createElement(Mv,null);class Dv extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?j.createElement(Vt.Provider,{value:this.props.routeContext},j.createElement(Lp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Bv(e){let{routeContext:t,match:r,children:n}=e,s=j.useContext(qu);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),j.createElement(Vt.Provider,{value:t},n)}function zv(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||pe(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:m,errors:y}=r,v=f.route.loader&&m[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let y,v=!1,w=null,x=null;r&&(y=l&&f.route.id?l[f.route.id]:void 0,w=f.route.errorElement||Uv,c&&(u<0&&m===0?(Hv("route-fallback"),v=!0,x=null):u===m&&(v=!0,x=f.route.hydrateFallbackElement||null)));let d=t.concat(o.slice(0,m+1)),p=()=>{let g;return y?g=w:v?g=x:f.route.Component?g=j.createElement(f.route.Component,null):f.route.element?g=f.route.element:g=h,j.createElement(Bv,{match:f,routeContext:{outlet:h,matches:d,isDataRoute:r!=null},children:g})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?j.createElement(Dv,{location:r.location,revalidation:r.revalidation,component:w,error:y,children:p(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):p()},null)}var Dp=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Dp||{}),Bp=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Bp||{});function qv(e){let t=j.useContext(qu);return t||pe(!1),t}function Vv(e){let t=j.useContext(Tv);return t||pe(!1),t}function Fv(e){let t=j.useContext(Vt);return t||pe(!1),t}function zp(e){let t=Fv(),r=t.matches[t.matches.length-1];return r.route.id||pe(!1),r.route.id}function Wv(){var e;let t=j.useContext(Lp),r=Vv(),n=zp();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Kv(){let{router:e}=qv(Dp.UseNavigateStable),t=zp(Bp.UseNavigateStable),r=j.useRef(!1);return Mp(()=>{r.current=!0}),j.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ei({fromRouteId:t},i)))},[e,t])}const _h={};function Hv(e,t,r){_h[e]||(_h[e]=!0)}function Qv(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function qp(e){let{to:t,replace:r,state:n,relative:s}=e;Is()||pe(!1);let{future:i,static:o}=j.useContext(Jr),{matches:l}=j.useContext(Vt),{pathname:c}=On(),u=$s(),h=zu(t,Bu(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return j.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function Gv(e){return Av(e.context)}function At(e){pe(!1)}function Jv(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Ir.Pop,navigator:i,static:o=!1,future:l}=e;Is()&&pe(!1);let c=t.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:c,navigator:i,static:o,future:Ei({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=As(n));let{pathname:h="/",search:f="",hash:m="",state:y=null,key:v="default"}=n,w=j.useMemo(()=>{let x=Du(h,c);return x==null?null:{location:{pathname:x,search:f,hash:m,state:y,key:v},navigationType:s}},[c,h,f,m,y,v,s]);return w==null?null:j.createElement(Jr.Provider,{value:u},j.createElement(Eo.Provider,{children:r,value:w}))}function Yv(e){let{children:t,location:r}=e;return $v(pc(t),r)}new Promise(()=>{});function pc(e,t){t===void 0&&(t=[]);let r=[];return j.Children.forEach(e,(n,s)=>{if(!j.isValidElement(n))return;let i=[...t,s];if(n.type===j.Fragment){r.push.apply(r,pc(n.props.children,i));return}n.type!==At&&pe(!1),!n.props.index||!n.props.children||pe(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=pc(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gc(){return gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gc.apply(this,arguments)}function Xv(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Zv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ex(e,t){return e.button===0&&(!t||t==="_self")&&!Zv(e)}const tx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rx="6";try{window.__reactRouterVersion=rx}catch{}const nx="startTransition",bh=Fg[nx];function sx(e){let{basename:t,children:r,future:n,window:s}=e,i=j.useRef();i.current==null&&(i.current=rv({window:s,v5Compat:!0}));let o=i.current,[l,c]=j.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},h=j.useCallback(f=>{u&&bh?bh(()=>c(f)):c(f)},[c,u]);return j.useLayoutEffect(()=>o.listen(h),[o,h]),j.useEffect(()=>Qv(n),[n]),j.createElement(Jv,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const ix=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ax=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dt=j.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f}=t,m=Xv(t,tx),{basename:y}=j.useContext(Jr),v,w=!1;if(typeof u=="string"&&ax.test(u)&&(v=u,ix))try{let g=new URL(window.location.href),b=u.startsWith("//")?new URL(g.protocol+u):new URL(u),N=Du(b.pathname,y);b.origin===g.origin&&N!=null?u=N+b.search+b.hash:w=!0}catch{}let x=Pv(u,{relative:s}),d=ox(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function p(g){n&&n(g),g.defaultPrevented||d(g)}return j.createElement("a",gc({},m,{href:v||x,onClick:w||i?n:p,ref:r,target:c}))});var jh;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(jh||(jh={}));var Nh;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Nh||(Nh={}));function ox(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=$s(),u=On(),h=Up(e,{relative:o});return j.useCallback(f=>{if(ex(f,r)){f.preventDefault();let m=n!==void 0?n:to(u)===to(h);c(e,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,h,n,s,r,e,i,o,l])}var Ls=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},lx={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},jr,Vc,cf,cx=(cf=class{constructor(){U(this,jr,lx);U(this,Vc,!1)}setTimeoutProvider(e){I(this,jr,e)}setTimeout(e,t){return _(this,jr).setTimeout(e,t)}clearTimeout(e){_(this,jr).clearTimeout(e)}setInterval(e,t){return _(this,jr).setInterval(e,t)}clearInterval(e){_(this,jr).clearInterval(e)}},jr=new WeakMap,Vc=new WeakMap,cf),ln=new cx;function ux(e){setTimeout(e,0)}var En=typeof window>"u"||"Deno"in globalThis;function ze(){}function dx(e,t){return typeof e=="function"?e(t):e}function yc(e){return typeof e=="number"&&e>=0&&e!==1/0}function Vp(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Fr(e,t){return typeof e=="function"?e(t):e}function dt(e,t){return typeof e=="function"?e(t):e}function kh(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==Vu(o,t.options))return!1}else if(!Ci(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function Sh(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Cn(t.options.mutationKey)!==Cn(i))return!1}else if(!Ci(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function Vu(e,t){return((t==null?void 0:t.queryKeyHashFn)||Cn)(e)}function Cn(e){return JSON.stringify(e,(t,r)=>vc(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Ci(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Ci(e[r],t[r])):!1}var hx=Object.prototype.hasOwnProperty;function Fp(e,t){if(e===t)return e;const r=Eh(e)&&Eh(t);if(!r&&!(vc(e)&&vc(t)))return t;const s=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let c=0;for(let u=0;u<o;u++){const h=r?u:i[u],f=e[h],m=t[h];if(f===m){l[h]=f,(r?u<s:hx.call(e,h))&&c++;continue}if(f===null||m===null||typeof f!="object"||typeof m!="object"){l[h]=m;continue}const y=Fp(f,m);l[h]=y,y===f&&c++}return s===o&&c===s?e:l}function ro(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Eh(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function vc(e){if(!Ch(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Ch(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Ch(e){return Object.prototype.toString.call(e)==="[object Object]"}function fx(e){return new Promise(t=>{ln.setTimeout(t,e)})}function xc(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Fp(e,t):t}function mx(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function px(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Fu=Symbol();function Wp(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Fu?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Kp(e,t){return typeof e=="function"?e(...t):!!e}var un,Nr,us,uf,gx=(uf=class extends Ls{constructor(){super();U(this,un);U(this,Nr);U(this,us);I(this,us,t=>{if(!En&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){_(this,Nr)||this.setEventListener(_(this,us))}onUnsubscribe(){var t;this.hasListeners()||((t=_(this,Nr))==null||t.call(this),I(this,Nr,void 0))}setEventListener(t){var r;I(this,us,t),(r=_(this,Nr))==null||r.call(this),I(this,Nr,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){_(this,un)!==t&&(I(this,un,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof _(this,un)=="boolean"?_(this,un):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},un=new WeakMap,Nr=new WeakMap,us=new WeakMap,uf),Wu=new gx;function wc(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}var yx=ux;function vx(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=yx;const i=l=>{t?e.push(l):s(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var _e=vx(),ds,kr,hs,df,xx=(df=class extends Ls{constructor(){super();U(this,ds,!0);U(this,kr);U(this,hs);I(this,hs,t=>{if(!En&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){_(this,kr)||this.setEventListener(_(this,hs))}onUnsubscribe(){var t;this.hasListeners()||((t=_(this,kr))==null||t.call(this),I(this,kr,void 0))}setEventListener(t){var r;I(this,hs,t),(r=_(this,kr))==null||r.call(this),I(this,kr,t(this.setOnline.bind(this)))}setOnline(t){_(this,ds)!==t&&(I(this,ds,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return _(this,ds)}},ds=new WeakMap,kr=new WeakMap,hs=new WeakMap,df),no=new xx;function wx(e){return Math.min(1e3*2**e,3e4)}function Hp(e){return(e??"online")==="online"?no.isOnline():!0}var _c=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Qp(e){let t=!1,r=0,n;const s=wc(),i=()=>s.status!=="pending",o=w=>{var x;if(!i()){const d=new _c(w);m(d),(x=e.onCancel)==null||x.call(e,d)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>Wu.isFocused()&&(e.networkMode==="always"||no.isOnline())&&e.canRun(),h=()=>Hp(e.networkMode)&&e.canRun(),f=w=>{i()||(n==null||n(),s.resolve(w))},m=w=>{i()||(n==null||n(),s.reject(w))},y=()=>new Promise(w=>{var x;n=d=>{(i()||u())&&w(d)},(x=e.onPause)==null||x.call(e)}).then(()=>{var w;n=void 0,i()||(w=e.onContinue)==null||w.call(e)}),v=()=>{if(i())return;let w;const x=r===0?e.initialPromise:void 0;try{w=x??e.fn()}catch(d){w=Promise.reject(d)}Promise.resolve(w).then(f).catch(d=>{var k;if(i())return;const p=e.retry??(En?0:3),g=e.retryDelay??wx,b=typeof g=="function"?g(r,d):g,N=p===!0||typeof p=="number"&&r<p||typeof p=="function"&&p(r,d);if(t||!N){m(d);return}r++,(k=e.onFail)==null||k.call(e,r,d),fx(b).then(()=>u()?void 0:y()).then(()=>{t?m(d):v()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(n==null||n(),s),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?v():y().then(v),s)}}var dn,hf,Gp=(hf=class{constructor(){U(this,dn)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),yc(this.gcTime)&&I(this,dn,ln.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(En?1/0:5*60*1e3))}clearGcTimeout(){_(this,dn)&&(ln.clearTimeout(_(this,dn)),I(this,dn,void 0))}},dn=new WeakMap,hf),hn,fs,ut,fn,ke,$i,mn,jt,Ht,ff,_x=(ff=class extends Gp{constructor(t){super();U(this,jt);U(this,hn);U(this,fs);U(this,ut);U(this,fn);U(this,ke);U(this,$i);U(this,mn);I(this,mn,!1),I(this,$i,t.defaultOptions),this.setOptions(t.options),this.observers=[],I(this,fn,t.client),I(this,ut,_(this,fn).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,I(this,hn,Ph(this.options)),this.state=t.state??_(this,hn),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=_(this,ke))==null?void 0:t.promise}setOptions(t){if(this.options={..._(this,$i),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Ph(this.options);r.data!==void 0&&(this.setState(Th(r.data,r.dataUpdatedAt)),I(this,hn,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&_(this,ut).remove(this)}setData(t,r){const n=xc(this.state.data,t,this.options);return W(this,jt,Ht).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){W(this,jt,Ht).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=_(this,ke))==null?void 0:n.promise;return(s=_(this,ke))==null||s.cancel(t),r?r.then(ze).catch(ze):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(_(this,hn))}isActive(){return this.observers.some(t=>dt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Fu||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Fr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Vp(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=_(this,ke))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=_(this,ke))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),_(this,ut).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(_(this,ke)&&(_(this,mn)?_(this,ke).cancel({revert:!0}):_(this,ke).cancelRetry()),this.scheduleGc()),_(this,ut).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||W(this,jt,Ht).call(this,{type:"invalidate"})}async fetch(t,r){var c,u,h,f,m,y,v,w,x,d,p,g;if(this.state.fetchStatus!=="idle"&&((c=_(this,ke))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(_(this,ke))return _(this,ke).continueRetry(),_(this,ke).promise}if(t&&this.setOptions(t),!this.options.queryFn){const b=this.observers.find(N=>N.options.queryFn);b&&this.setOptions(b.options)}const n=new AbortController,s=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(I(this,mn,!0),n.signal)})},i=()=>{const b=Wp(this.options,r),k=(()=>{const T={client:_(this,fn),queryKey:this.queryKey,meta:this.meta};return s(T),T})();return I(this,mn,!1),this.options.persister?this.options.persister(b,k,this):b(k)},l=(()=>{const b={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:_(this,fn),state:this.state,fetchFn:i};return s(b),b})();(u=this.options.behavior)==null||u.onFetch(l,this),I(this,fs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&W(this,jt,Ht).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),I(this,ke,Qp({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:b=>{b instanceof _c&&b.revert&&this.setState({..._(this,fs),fetchStatus:"idle"}),n.abort()},onFail:(b,N)=>{W(this,jt,Ht).call(this,{type:"failed",failureCount:b,error:N})},onPause:()=>{W(this,jt,Ht).call(this,{type:"pause"})},onContinue:()=>{W(this,jt,Ht).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const b=await _(this,ke).start();if(b===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(b),(y=(m=_(this,ut).config).onSuccess)==null||y.call(m,b,this),(w=(v=_(this,ut).config).onSettled)==null||w.call(v,b,this.state.error,this),b}catch(b){if(b instanceof _c){if(b.silent)return _(this,ke).promise;if(b.revert){if(this.state.data===void 0)throw b;return this.state.data}}throw W(this,jt,Ht).call(this,{type:"error",error:b}),(d=(x=_(this,ut).config).onError)==null||d.call(x,b,this),(g=(p=_(this,ut).config).onSettled)==null||g.call(p,this.state.data,b,this),b}finally{this.scheduleGc()}}},hn=new WeakMap,fs=new WeakMap,ut=new WeakMap,fn=new WeakMap,ke=new WeakMap,$i=new WeakMap,mn=new WeakMap,jt=new WeakSet,Ht=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Jp(n.data,this.options),fetchMeta:t.meta??null};case"success":const s={...n,...Th(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return I(this,fs,t.manual?s:void 0),s;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),_e.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),_(this,ut).notify({query:this,type:"updated",action:t})})},ff);function Jp(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Hp(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Th(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Ph(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ke,J,Li,Ue,pn,ms,Yt,Sr,Mi,ps,gs,gn,yn,Er,ys,Z,Gs,bc,jc,Nc,kc,Sc,Ec,Cc,Yp,mf,bx=(mf=class extends Ls{constructor(t,r){super();U(this,Z);U(this,Ke);U(this,J);U(this,Li);U(this,Ue);U(this,pn);U(this,ms);U(this,Yt);U(this,Sr);U(this,Mi);U(this,ps);U(this,gs);U(this,gn);U(this,yn);U(this,Er);U(this,ys,new Set);this.options=r,I(this,Ke,t),I(this,Sr,null),I(this,Yt,wc()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(_(this,J).addObserver(this),Oh(_(this,J),this.options)?W(this,Z,Gs).call(this):this.updateResult(),W(this,Z,kc).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Tc(_(this,J),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Tc(_(this,J),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,W(this,Z,Sc).call(this),W(this,Z,Ec).call(this),_(this,J).removeObserver(this)}setOptions(t){const r=this.options,n=_(this,J);if(this.options=_(this,Ke).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof dt(this.options.enabled,_(this,J))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");W(this,Z,Cc).call(this),_(this,J).setOptions(this.options),r._defaulted&&!ro(this.options,r)&&_(this,Ke).getQueryCache().notify({type:"observerOptionsUpdated",query:_(this,J),observer:this});const s=this.hasListeners();s&&Rh(_(this,J),n,this.options,r)&&W(this,Z,Gs).call(this),this.updateResult(),s&&(_(this,J)!==n||dt(this.options.enabled,_(this,J))!==dt(r.enabled,_(this,J))||Fr(this.options.staleTime,_(this,J))!==Fr(r.staleTime,_(this,J)))&&W(this,Z,bc).call(this);const i=W(this,Z,jc).call(this);s&&(_(this,J)!==n||dt(this.options.enabled,_(this,J))!==dt(r.enabled,_(this,J))||i!==_(this,Er))&&W(this,Z,Nc).call(this,i)}getOptimisticResult(t){const r=_(this,Ke).getQueryCache().build(_(this,Ke),t),n=this.createResult(r,t);return Nx(this,n)&&(I(this,Ue,n),I(this,ms,this.options),I(this,pn,_(this,J).state)),n}getCurrentResult(){return _(this,Ue)}trackResult(t,r){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),r==null||r(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&_(this,Yt).status==="pending"&&_(this,Yt).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,s))})}trackProp(t){_(this,ys).add(t)}getCurrentQuery(){return _(this,J)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=_(this,Ke).defaultQueryOptions(t),n=_(this,Ke).getQueryCache().build(_(this,Ke),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return W(this,Z,Gs).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),_(this,Ue)))}createResult(t,r){var A;const n=_(this,J),s=this.options,i=_(this,Ue),o=_(this,pn),l=_(this,ms),u=t!==n?t.state:_(this,Li),{state:h}=t;let f={...h},m=!1,y;if(r._optimisticResults){const R=this.hasListeners(),Y=!R&&Oh(t,r),ge=R&&Rh(t,n,r,s);(Y||ge)&&(f={...f,...Jp(h.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:v,errorUpdatedAt:w,status:x}=f;y=f.data;let d=!1;if(r.placeholderData!==void 0&&y===void 0&&x==="pending"){let R;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(R=i.data,d=!0):R=typeof r.placeholderData=="function"?r.placeholderData((A=_(this,gs))==null?void 0:A.state.data,_(this,gs)):r.placeholderData,R!==void 0&&(x="success",y=xc(i==null?void 0:i.data,R,r),m=!0)}if(r.select&&y!==void 0&&!d)if(i&&y===(o==null?void 0:o.data)&&r.select===_(this,Mi))y=_(this,ps);else try{I(this,Mi,r.select),y=r.select(y),y=xc(i==null?void 0:i.data,y,r),I(this,ps,y),I(this,Sr,null)}catch(R){I(this,Sr,R)}_(this,Sr)&&(v=_(this,Sr),y=_(this,ps),w=Date.now(),x="error");const p=f.fetchStatus==="fetching",g=x==="pending",b=x==="error",N=g&&p,k=y!==void 0,S={status:x,fetchStatus:f.fetchStatus,isPending:g,isSuccess:x==="success",isError:b,isInitialLoading:N,isLoading:N,data:y,dataUpdatedAt:f.dataUpdatedAt,error:v,errorUpdatedAt:w,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:p,isRefetching:p&&!g,isLoadingError:b&&!k,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:b&&k,isStale:Ku(t,r),refetch:this.refetch,promise:_(this,Yt),isEnabled:dt(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const R=je=>{S.status==="error"?je.reject(S.error):S.data!==void 0&&je.resolve(S.data)},Y=()=>{const je=I(this,Yt,S.promise=wc());R(je)},ge=_(this,Yt);switch(ge.status){case"pending":t.queryHash===n.queryHash&&R(ge);break;case"fulfilled":(S.status==="error"||S.data!==ge.value)&&Y();break;case"rejected":(S.status!=="error"||S.error!==ge.reason)&&Y();break}}return S}updateResult(){const t=_(this,Ue),r=this.createResult(_(this,J),this.options);if(I(this,pn,_(this,J).state),I(this,ms,this.options),_(this,pn).data!==void 0&&I(this,gs,_(this,J)),ro(r,t))return;I(this,Ue,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!_(this,ys).size)return!0;const o=new Set(i??_(this,ys));return this.options.throwOnError&&o.add("error"),Object.keys(_(this,Ue)).some(l=>{const c=l;return _(this,Ue)[c]!==t[c]&&o.has(c)})};W(this,Z,Yp).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&W(this,Z,kc).call(this)}},Ke=new WeakMap,J=new WeakMap,Li=new WeakMap,Ue=new WeakMap,pn=new WeakMap,ms=new WeakMap,Yt=new WeakMap,Sr=new WeakMap,Mi=new WeakMap,ps=new WeakMap,gs=new WeakMap,gn=new WeakMap,yn=new WeakMap,Er=new WeakMap,ys=new WeakMap,Z=new WeakSet,Gs=function(t){W(this,Z,Cc).call(this);let r=_(this,J).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(ze)),r},bc=function(){W(this,Z,Sc).call(this);const t=Fr(this.options.staleTime,_(this,J));if(En||_(this,Ue).isStale||!yc(t))return;const n=Vp(_(this,Ue).dataUpdatedAt,t)+1;I(this,gn,ln.setTimeout(()=>{_(this,Ue).isStale||this.updateResult()},n))},jc=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(_(this,J)):this.options.refetchInterval)??!1},Nc=function(t){W(this,Z,Ec).call(this),I(this,Er,t),!(En||dt(this.options.enabled,_(this,J))===!1||!yc(_(this,Er))||_(this,Er)===0)&&I(this,yn,ln.setInterval(()=>{(this.options.refetchIntervalInBackground||Wu.isFocused())&&W(this,Z,Gs).call(this)},_(this,Er)))},kc=function(){W(this,Z,bc).call(this),W(this,Z,Nc).call(this,W(this,Z,jc).call(this))},Sc=function(){_(this,gn)&&(ln.clearTimeout(_(this,gn)),I(this,gn,void 0))},Ec=function(){_(this,yn)&&(ln.clearInterval(_(this,yn)),I(this,yn,void 0))},Cc=function(){const t=_(this,Ke).getQueryCache().build(_(this,Ke),this.options);if(t===_(this,J))return;const r=_(this,J);I(this,J,t),I(this,Li,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Yp=function(t){_e.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(_(this,Ue))}),_(this,Ke).getQueryCache().notify({query:_(this,J),type:"observerResultsUpdated"})})},mf);function jx(e,t){return dt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Oh(e,t){return jx(e,t)||e.state.data!==void 0&&Tc(e,t,t.refetchOnMount)}function Tc(e,t,r){if(dt(t.enabled,e)!==!1&&Fr(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Ku(e,t)}return!1}function Rh(e,t,r,n){return(e!==t||dt(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Ku(e,r)}function Ku(e,t){return dt(t.enabled,e)!==!1&&e.isStaleByTime(Fr(t.staleTime,e))}function Nx(e,t){return!ro(e.getCurrentResult(),t)}function Ah(e){return{onFetch:(t,r)=>{var h,f,m,y,v;const n=t.options,s=(m=(f=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((y=t.state.data)==null?void 0:y.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let w=!1;const x=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(t.signal.aborted?w=!0:t.signal.addEventListener("abort",()=>{w=!0}),t.signal)})},d=Wp(t.options,t.fetchOptions),p=async(g,b,N)=>{if(w)return Promise.reject();if(b==null&&g.pages.length)return Promise.resolve(g);const T=(()=>{const Y={client:t.client,queryKey:t.queryKey,pageParam:b,direction:N?"backward":"forward",meta:t.options.meta};return x(Y),Y})(),S=await d(T),{maxPages:A}=t.options,R=N?px:mx;return{pages:R(g.pages,S,A),pageParams:R(g.pageParams,b,A)}};if(s&&i.length){const g=s==="backward",b=g?kx:Ih,N={pages:i,pageParams:o},k=b(n,N);l=await p(N,k,g)}else{const g=e??i.length;do{const b=c===0?o[0]??n.initialPageParam:Ih(n,l);if(c>0&&b==null)break;l=await p(l,b),c++}while(c<g)}return l};t.options.persister?t.fetchFn=()=>{var w,x;return(x=(w=t.options).persister)==null?void 0:x.call(w,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function Ih(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function kx(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Ui,$t,De,vn,Lt,gr,pf,Sx=(pf=class extends Gp{constructor(t){super();U(this,Lt);U(this,Ui);U(this,$t);U(this,De);U(this,vn);I(this,Ui,t.client),this.mutationId=t.mutationId,I(this,De,t.mutationCache),I(this,$t,[]),this.state=t.state||Xp(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){_(this,$t).includes(t)||(_(this,$t).push(t),this.clearGcTimeout(),_(this,De).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){I(this,$t,_(this,$t).filter(r=>r!==t)),this.scheduleGc(),_(this,De).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){_(this,$t).length||(this.state.status==="pending"?this.scheduleGc():_(this,De).remove(this))}continue(){var t;return((t=_(this,vn))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,u,h,f,m,y,v,w,x,d,p,g,b,N,k,T,S,A;const r=()=>{W(this,Lt,gr).call(this,{type:"continue"})},n={client:_(this,Ui),meta:this.options.meta,mutationKey:this.options.mutationKey};I(this,vn,Qp({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(R,Y)=>{W(this,Lt,gr).call(this,{type:"failed",failureCount:R,error:Y})},onPause:()=>{W(this,Lt,gr).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>_(this,De).canRun(this)}));const s=this.state.status==="pending",i=!_(this,vn).canStart();try{if(s)r();else{W(this,Lt,gr).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=_(this,De).config).onMutate)==null?void 0:l.call(o,t,this,n));const Y=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,n));Y!==this.state.context&&W(this,Lt,gr).call(this,{type:"pending",context:Y,variables:t,isPaused:i})}const R=await _(this,vn).start();return await((f=(h=_(this,De).config).onSuccess)==null?void 0:f.call(h,R,t,this.state.context,this,n)),await((y=(m=this.options).onSuccess)==null?void 0:y.call(m,R,t,this.state.context,n)),await((w=(v=_(this,De).config).onSettled)==null?void 0:w.call(v,R,null,this.state.variables,this.state.context,this,n)),await((d=(x=this.options).onSettled)==null?void 0:d.call(x,R,null,t,this.state.context,n)),W(this,Lt,gr).call(this,{type:"success",data:R}),R}catch(R){try{throw await((g=(p=_(this,De).config).onError)==null?void 0:g.call(p,R,t,this.state.context,this,n)),await((N=(b=this.options).onError)==null?void 0:N.call(b,R,t,this.state.context,n)),await((T=(k=_(this,De).config).onSettled)==null?void 0:T.call(k,void 0,R,this.state.variables,this.state.context,this,n)),await((A=(S=this.options).onSettled)==null?void 0:A.call(S,void 0,R,t,this.state.context,n)),R}finally{W(this,Lt,gr).call(this,{type:"error",error:R})}}finally{_(this,De).runNext(this)}}},Ui=new WeakMap,$t=new WeakMap,De=new WeakMap,vn=new WeakMap,Lt=new WeakSet,gr=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),_e.batch(()=>{_(this,$t).forEach(n=>{n.onMutationUpdate(t)}),_(this,De).notify({mutation:this,type:"updated",action:t})})},pf);function Xp(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Xt,Nt,Di,gf,Ex=(gf=class extends Ls{constructor(t={}){super();U(this,Xt);U(this,Nt);U(this,Di);this.config=t,I(this,Xt,new Set),I(this,Nt,new Map),I(this,Di,0)}build(t,r,n){const s=new Sx({client:t,mutationCache:this,mutationId:++Gi(this,Di)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){_(this,Xt).add(t);const r=fa(t);if(typeof r=="string"){const n=_(this,Nt).get(r);n?n.push(t):_(this,Nt).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(_(this,Xt).delete(t)){const r=fa(t);if(typeof r=="string"){const n=_(this,Nt).get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&_(this,Nt).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=fa(t);if(typeof r=="string"){const n=_(this,Nt).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const r=fa(t);if(typeof r=="string"){const s=(n=_(this,Nt).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){_e.batch(()=>{_(this,Xt).forEach(t=>{this.notify({type:"removed",mutation:t})}),_(this,Xt).clear(),_(this,Nt).clear()})}getAll(){return Array.from(_(this,Xt))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Sh(r,n))}findAll(t={}){return this.getAll().filter(r=>Sh(t,r))}notify(t){_e.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return _e.batch(()=>Promise.all(t.map(r=>r.continue().catch(ze))))}},Xt=new WeakMap,Nt=new WeakMap,Di=new WeakMap,gf);function fa(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Zt,Cr,He,er,sr,Pa,Pc,yf,Cx=(yf=class extends Ls{constructor(r,n){super();U(this,sr);U(this,Zt);U(this,Cr);U(this,He);U(this,er);I(this,Zt,r),this.setOptions(n),this.bindMethods(),W(this,sr,Pa).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=_(this,Zt).defaultMutationOptions(r),ro(this.options,n)||_(this,Zt).getMutationCache().notify({type:"observerOptionsUpdated",mutation:_(this,He),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Cn(n.mutationKey)!==Cn(this.options.mutationKey)?this.reset():((s=_(this,He))==null?void 0:s.state.status)==="pending"&&_(this,He).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=_(this,He))==null||r.removeObserver(this)}onMutationUpdate(r){W(this,sr,Pa).call(this),W(this,sr,Pc).call(this,r)}getCurrentResult(){return _(this,Cr)}reset(){var r;(r=_(this,He))==null||r.removeObserver(this),I(this,He,void 0),W(this,sr,Pa).call(this),W(this,sr,Pc).call(this)}mutate(r,n){var s;return I(this,er,n),(s=_(this,He))==null||s.removeObserver(this),I(this,He,_(this,Zt).getMutationCache().build(_(this,Zt),this.options)),_(this,He).addObserver(this),_(this,He).execute(r)}},Zt=new WeakMap,Cr=new WeakMap,He=new WeakMap,er=new WeakMap,sr=new WeakSet,Pa=function(){var n;const r=((n=_(this,He))==null?void 0:n.state)??Xp();I(this,Cr,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Pc=function(r){_e.batch(()=>{var n,s,i,o,l,c,u,h;if(_(this,er)&&this.hasListeners()){const f=_(this,Cr).variables,m=_(this,Cr).context,y={client:_(this,Zt),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((s=(n=_(this,er)).onSuccess)==null||s.call(n,r.data,f,m,y),(o=(i=_(this,er)).onSettled)==null||o.call(i,r.data,null,f,m,y)):(r==null?void 0:r.type)==="error"&&((c=(l=_(this,er)).onError)==null||c.call(l,r.error,f,m,y),(h=(u=_(this,er)).onSettled)==null||h.call(u,void 0,r.error,f,m,y))}this.listeners.forEach(f=>{f(_(this,Cr))})})},yf),Mt,vf,Tx=(vf=class extends Ls{constructor(t={}){super();U(this,Mt);this.config=t,I(this,Mt,new Map)}build(t,r,n){const s=r.queryKey,i=r.queryHash??Vu(s,r);let o=this.get(i);return o||(o=new _x({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){_(this,Mt).has(t.queryHash)||(_(this,Mt).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=_(this,Mt).get(t.queryHash);r&&(t.destroy(),r===t&&_(this,Mt).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){_e.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return _(this,Mt).get(t)}getAll(){return[..._(this,Mt).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>kh(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>kh(t,n)):r}notify(t){_e.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){_e.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){_e.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Mt=new WeakMap,vf),ue,Tr,Pr,vs,xs,Or,ws,_s,xf,Px=(xf=class{constructor(e={}){U(this,ue);U(this,Tr);U(this,Pr);U(this,vs);U(this,xs);U(this,Or);U(this,ws);U(this,_s);I(this,ue,e.queryCache||new Tx),I(this,Tr,e.mutationCache||new Ex),I(this,Pr,e.defaultOptions||{}),I(this,vs,new Map),I(this,xs,new Map),I(this,Or,0)}mount(){Gi(this,Or)._++,_(this,Or)===1&&(I(this,ws,Wu.subscribe(async e=>{e&&(await this.resumePausedMutations(),_(this,ue).onFocus())})),I(this,_s,no.subscribe(async e=>{e&&(await this.resumePausedMutations(),_(this,ue).onOnline())})))}unmount(){var e,t;Gi(this,Or)._--,_(this,Or)===0&&((e=_(this,ws))==null||e.call(this),I(this,ws,void 0),(t=_(this,_s))==null||t.call(this),I(this,_s,void 0))}isFetching(e){return _(this,ue).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return _(this,Tr).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=_(this,ue).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=_(this,ue).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Fr(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return _(this,ue).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=_(this,ue).get(n.queryHash),i=s==null?void 0:s.state.data,o=dx(t,i);if(o!==void 0)return _(this,ue).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return _e.batch(()=>_(this,ue).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=_(this,ue).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=_(this,ue);_e.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=_(this,ue);return _e.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=_e.batch(()=>_(this,ue).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(ze).catch(ze)}invalidateQueries(e,t={}){return _e.batch(()=>(_(this,ue).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=_e.batch(()=>_(this,ue).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(ze)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(ze)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=_(this,ue).build(this,t);return r.isStaleByTime(Fr(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ze).catch(ze)}fetchInfiniteQuery(e){return e.behavior=Ah(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ze).catch(ze)}ensureInfiniteQueryData(e){return e.behavior=Ah(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return no.isOnline()?_(this,Tr).resumePausedMutations():Promise.resolve()}getQueryCache(){return _(this,ue)}getMutationCache(){return _(this,Tr)}getDefaultOptions(){return _(this,Pr)}setDefaultOptions(e){I(this,Pr,e)}setQueryDefaults(e,t){_(this,vs).set(Cn(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[..._(this,vs).values()],r={};return t.forEach(n=>{Ci(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){_(this,xs).set(Cn(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[..._(this,xs).values()],r={};return t.forEach(n=>{Ci(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={..._(this,Pr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Vu(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Fu&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{..._(this,Pr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){_(this,ue).clear(),_(this,Tr).clear()}},ue=new WeakMap,Tr=new WeakMap,Pr=new WeakMap,vs=new WeakMap,xs=new WeakMap,Or=new WeakMap,ws=new WeakMap,_s=new WeakMap,xf),Zp=j.createContext(void 0),Co=e=>{const t=j.useContext(Zp);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Ox=({client:e,children:t})=>(j.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(Zp.Provider,{value:e,children:t})),eg=j.createContext(!1),Rx=()=>j.useContext(eg);eg.Provider;function Ax(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Ix=j.createContext(Ax()),$x=()=>j.useContext(Ix),Lx=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Mx=e=>{j.useEffect(()=>{e.clearReset()},[e])},Ux=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||Kp(r,[e.error,n])),Dx=e=>{if(e.suspense){const r=s=>s==="static"?s:Math.max(s??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...s)=>r(n(...s)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Bx=(e,t)=>e.isLoading&&e.isFetching&&!t,zx=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,$h=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function qx(e,t,r){var f,m,y,v,w;const n=Rx(),s=$x(),i=Co(),o=i.defaultQueryOptions(e);(m=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||m.call(f,o),o._optimisticResults=n?"isRestoring":"optimistic",Dx(o),Lx(o,s),Mx(s);const l=!i.getQueryCache().get(o.queryHash),[c]=j.useState(()=>new t(i,o)),u=c.getOptimisticResult(o),h=!n&&e.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(x=>{const d=h?c.subscribe(_e.batchCalls(x)):ze;return c.updateResult(),d},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),j.useEffect(()=>{c.setOptions(o)},[o,c]),zx(o,u))throw $h(o,c,s);if(Ux({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((v=(y=i.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||v.call(y,o,u),o.experimental_prefetchInRender&&!En&&Bx(u,n)){const x=l?$h(o,c,s):(w=i.getQueryCache().get(o.queryHash))==null?void 0:w.promise;x==null||x.catch(ze).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function qt(e,t){return qx(e,bx)}function so(e,t){const r=Co(),[n]=j.useState(()=>new Cx(r,e));j.useEffect(()=>{n.setOptions(e)},[n,e]);const s=j.useSyncExternalStore(j.useCallback(o=>n.subscribe(_e.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=j.useCallback((o,l)=>{n.mutate(o,l).catch(ze)},[n]);if(s.error&&Kp(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function To(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function Vx(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(h){try{u(n.next(h))}catch(f){o(f)}}function c(h){try{u(n.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}const Fx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Hu extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Wx extends Hu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Lh extends Hu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Mh extends Hu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Oc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Oc||(Oc={}));class Kx{constructor(t,{headers:r={},customFetch:n,region:s=Oc.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Fx(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Vx(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:l,method:c,body:u,signal:h,timeout:f}=n;let m={},{region:y}=n;y||(y=this.region);const v=new URL(`${this.url}/${r}`);y&&y!=="any"&&(m["x-region"]=y,v.searchParams.set("forceFunctionRegion",y));let w;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",w=u):typeof u=="string"?(m["Content-Type"]="text/plain",w=u):typeof FormData<"u"&&u instanceof FormData?w=u:(m["Content-Type"]="application/json",w=JSON.stringify(u)):w=u;let x=h;f&&(o=new AbortController,i=setTimeout(()=>o.abort(),f),h?(x=o.signal,h.addEventListener("abort",()=>o.abort())):x=o.signal);const d=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:w,signal:x}).catch(N=>{throw new Wx(N)}),p=d.headers.get("x-relay-error");if(p&&p==="true")throw new Lh(d);if(!d.ok)throw new Mh(d);let g=((s=d.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return g==="application/json"?b=yield d.json():g==="application/octet-stream"||g==="application/pdf"?b=yield d.blob():g==="text/event-stream"?b=d:g==="multipart/form-data"?b=yield d.formData():b=yield d.text(),{data:b,error:null,response:d}}catch(l){return{data:null,error:l,response:l instanceof Mh||l instanceof Lh?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var Hx=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Qx=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,u=i.status,h=i.statusText;if(i.ok){var f,m;if(r.method!=="HEAD"){var y;const d=await i.text();d===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((y=r.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?l=d:l=JSON.parse(d))}const w=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),x=(m=i.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");w&&x&&x.length>1&&(c=parseInt(x[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,h="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var v;const w=await i.text();try{o=JSON.parse(w),Array.isArray(o)&&i.status===404&&(l=[],o=null,u=200,h="OK")}catch{i.status===404&&w===""?(u=204,h="No Content"):o={message:w}}if(o&&r.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,u=200,h="OK"),o&&r.shouldThrowOnError)throw new Hx(o)}return{error:o,data:l,count:c,status:u,statusText:h}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let l="";const c=i==null?void 0:i.cause;if(c){var u,h,f,m;const v=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",w=(h=c==null?void 0:c.code)!==null&&h!==void 0?h:"";l=`${(f=i==null?void 0:i.name)!==null&&f!==void 0?f:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(m=c==null?void 0:c.name)!==null&&m!==void 0?m:"Error"}: ${v}`,w&&(l+=` (${w})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var y;l=(y=i==null?void 0:i.stack)!==null&&y!==void 0?y:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},Gx=class extends Qx{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Uh=new RegExp("[,()]");var zn=class extends Gx{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Uh.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Uh.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},Jx=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new zn({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(i.length>0){const o=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new zn({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new zn({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new zn({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new zn({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Yx=class tg{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Jx(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new tg(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([f,m])=>m!==void 0).map(([f,m])=>[f,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([f,m])=>{c.searchParams.append(f,m)})):(l="POST",u=r);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new zn({method:l,url:c,headers:h,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class Xx{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Zx="2.89.0",ew=`realtime-js/${Zx}`,rg="1.0.0",tw="2.0.0",Dh=rg,Rc=1e4,rw=1e3,nw=100;var xr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(xr||(xr={}));var xe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(xe||(xe={}));var St;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(St||(St={}));var Ac;(function(e){e.websocket="websocket"})(Ac||(Ac={}));var rn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(rn||(rn={}));class sw{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,i;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(h).length===0?"":JSON.stringify(h);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+f.length,y=new ArrayBuffer(this.HEADER_LENGTH+m);let v=new DataView(y),w=0;v.setUint8(w++,this.KINDS.userBroadcastPush),v.setUint8(w++,c.length),v.setUint8(w++,l.length),v.setUint8(w++,o.length),v.setUint8(w++,u.length),v.setUint8(w++,f.length),v.setUint8(w++,r),Array.from(c,d=>v.setUint8(w++,d.charCodeAt(0))),Array.from(l,d=>v.setUint8(w++,d.charCodeAt(0))),Array.from(o,d=>v.setUint8(w++,d.charCodeAt(0))),Array.from(u,d=>v.setUint8(w++,d.charCodeAt(0))),Array.from(f,d=>v.setUint8(w++,d.charCodeAt(0)));var x=new Uint8Array(y.byteLength+n.byteLength);return x.set(new Uint8Array(y),0),x.set(new Uint8Array(n),y.byteLength),x.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,l,c]=n;return r({join_ref:s,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+s));c=c+s;const h=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+o));c=c+o;const m=t.slice(c,t.byteLength),y=l===this.JSON_ENCODING?JSON.parse(n.decode(m)):m,v={type:this.BROADCAST_EVENT,event:h,payload:y};return o>0&&(v.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class ng{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var te;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(te||(te={}));const Bh=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=iw(o,e,t,s),i),{}):{}},iw=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?sg(i,o):Ic(o)},sg=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return cw(t,r)}switch(e){case te.bool:return aw(t);case te.float4:case te.float8:case te.int2:case te.int4:case te.int8:case te.numeric:case te.oid:return ow(t);case te.json:case te.jsonb:return lw(t);case te.timestamp:return uw(t);case te.abstime:case te.date:case te.daterange:case te.int4range:case te.int8range:case te.money:case te.reltime:case te.text:case te.time:case te.timestamptz:case te.timetz:case te.tsrange:case te.tstzrange:return Ic(t);default:return Ic(t)}},Ic=e=>e,aw=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ow=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},lw=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},cw=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>sg(t,l))}return e},uw=e=>typeof e=="string"?e.replace(" ","T"):e,ig=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class hl{constructor(t,r,n={},s=Rc){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var zh;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(zh||(zh={}));class ai{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ai.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=ai.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ai.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,h)=>{o[u]||(c[u]=h)}),this.map(o,(u,h)=>{const f=i[u];if(f){const m=h.map(x=>x.presence_ref),y=f.map(x=>x.presence_ref),v=h.filter(x=>y.indexOf(x.presence_ref)<0),w=f.filter(x=>m.indexOf(x.presence_ref)<0);v.length>0&&(l[u]=v),w.length>0&&(c[u]=w)}else l[u]=h}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const h=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),h.length>0){const f=t[l].map(y=>y.presence_ref),m=h.filter(y=>f.indexOf(y.presence_ref)<0);t[l].unshift(...m)}n(l,h,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const h=c.map(f=>f.presence_ref);u=u.filter(f=>h.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var qh;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(qh||(qh={}));var oi;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(oi||(oi={}));var Gt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Gt||(Gt={}));class rs{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new hl(this,St.join,this.params,this.timeout),this.rejoinTimer=new ng(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xe.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(St.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new ai(this),this.broadcastEndpointURL=ig(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==xe.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(y=>y.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[oi.PRESENCE]&&this.bindings[oi.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(Gt.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(Gt.CLOSED)),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:y})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),y===void 0){t==null||t(Gt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,x=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,d=[];for(let p=0;p<x;p++){const g=w[p],{filter:{event:b,schema:N,table:k,filter:T}}=g,S=y&&y[p];if(S&&S.event===b&&rs.isFilterValueEqual(S.schema,N)&&rs.isFilterValueEqual(S.table,k)&&rs.isFilterValueEqual(S.filter,T))d.push(Object.assign(Object.assign({},g),{id:S.id}));else{this.unsubscribe(),this.state=xe.errored,t==null||t(Gt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=d,t&&t(Gt.SUBSCRIBED);return}}).receive("error",y=>{this.state=xe.errored,t==null||t(Gt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Gt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===xe.joined&&t===oi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=xe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(St.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new hl(this,St.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xe.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new hl(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>nw){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:h}=St;if(n&&[l,c,u,h].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var v,w,x;return((v=y.filter)===null||v===void 0?void 0:v.event)==="*"||((x=(w=y.filter)===null||w===void 0?void 0:w.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(y=>y.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var v,w,x,d,p,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const b=y.id,N=(v=y.filter)===null||v===void 0?void 0:v.event;return b&&((w=r.ids)===null||w===void 0?void 0:w.includes(b))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const b=(p=(d=y==null?void 0:y.filter)===null||d===void 0?void 0:d.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return b==="*"||b===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:w,table:x,commit_timestamp:d,type:p,errors:g}=v;m=Object.assign(Object.assign({},{schema:w,table:x,commit_timestamp:d,eventType:p,new:{},old:{},errors:g}),this._getPayloadRecords(v))}y.callback(m,n)})}_isClosed(){return this.state===xe.closed}_isJoined(){return this.state===xe.joined}_isJoining(){return this.state===xe.joining}_isLeaving(){return this.state===xe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&rs.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(St.close,{},t)}_onError(t){this._on(St.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Bh(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Bh(t.columns,t.old_record)),r}}const fl=()=>{},ma={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},dw=[1e3,2e3,5e3,1e4],hw=1e4,fw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class mw{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Rc,this.transport=null,this.heartbeatIntervalMs=ma.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=fl,this.ref=0,this.reconnectTimer=null,this.vsn=Dh,this.logger=fl,this.conn=null,this.sendBuffer=[],this.serializer=new sw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Ac.websocket}`,this.httpEndpoint=ig(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Xx.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case xr.connecting:return rn.Connecting;case xr.open:return rn.Open;case xr.closing:return rn.Closing;default:return rn.Closed}}isConnected(){return this.connectionState()===rn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new rs(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(rw,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ma.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===xr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===xr.open||this.conn.readyState===xr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(St.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([fw],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:ew};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(St.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new ng(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ma.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,c,u,h,f,m,y;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Rc,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:ma.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:fl,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Dh,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:v=>dw[v-1]||hw,this.vsn){case rg:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(v,w)=>w(JSON.stringify(v)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(v,w)=>w(JSON.parse(v));break;case tw:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Ti=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function pw(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function gw(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function yw(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const l=pw(e.baseUrl,n,s),c=await gw(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),h=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),m=f&&h?JSON.parse(h):h;if(!u.ok){const y=f?m:void 0,v=y==null?void 0:y.error;throw new Ti((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:y})}return{status:u.status,headers:u.headers,data:m}}}}function pa(e){return e.join("")}var vw=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:pa(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${pa(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pa(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${pa(e.namespace)}`}),!0}catch(t){if(t instanceof Ti&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Ti&&r.status===409)return;throw r}}};function An(e){return e.join("")}var xw=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${An(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${An(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${An(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${An(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${An(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${An(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Ti&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Ti&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},ww=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=yw({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new vw(this.client,t),this.tableOps=new xw(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Po=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function ae(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var _w=class extends Po{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},$c=class extends Po{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Qu=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),bw=()=>Response,Lc=e=>{if(Array.isArray(e))return e.map(r=>Lc(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Lc(n)}),t},jw=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Nw=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Pi(e){"@babel/helpers - typeof";return Pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pi(e)}function kw(e,t){if(Pi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sw(e){var t=kw(e,"string");return Pi(t)=="symbol"?t:t+""}function Ew(e,t,r){return(t=Sw(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vh(Object(r),!0).forEach(function(n){Ew(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const ml=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Cw=async(e,t,r)=>{e instanceof await bw()&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const s=e.status||500,i=(n==null?void 0:n.statusCode)||s+"";t(new _w(ml(n),s,i))}).catch(n=>{t(new $c(ml(n),n))}):t(new $c(ml(e),e))},Tw=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(jw(n)?(s.headers=B({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),B(B({},s),r))};async function Wi(e,t,r,n,s,i){return new Promise((o,l)=>{e(r,Tw(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Cw(c,l,n))})}async function Oi(e,t,r,n){return Wi(e,"GET",t,r,n)}async function bt(e,t,r,n,s){return Wi(e,"POST",t,n,s,r)}async function Mc(e,t,r,n,s){return Wi(e,"PUT",t,n,s,r)}async function Pw(e,t,r,n){return Wi(e,"HEAD",t,B(B({},r),{},{noResolveJson:!0}),n)}async function Gu(e,t,r,n,s){return Wi(e,"DELETE",t,n,s,r)}var Ow=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ae(t))return{data:null,error:t};throw t}}};let ag;ag=Symbol.toStringTag;var Rw=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[ag]="BlobDownloadBuilder",this.promise=null}asStream(){return new Ow(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ae(t))return{data:null,error:t};throw t}}};const Aw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Iw=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Qu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var s=this;try{let i;const o=B(B({},Fh),n);let l=B(B({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",s.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=B(B({},l),n.headers));const u=s._removeEmptyFolders(t),h=s._getFinalPath(u),f=await(e=="PUT"?Mc:bt)(s.fetch,`${s.url}/object/${h}`,i,B({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(ae(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const u=B({upsert:Fh.upsert},n),h=B(B({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType),{data:{path:i,fullPath:(await Mc(s.fetch,l.toString(),c,{headers:h})).Key},error:null}}catch(c){if(s.shouldThrowOnError)throw c;if(ae(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const s=B({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await bt(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new Po("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ae(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await bt(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ae(s))return{data:null,error:s};throw s}}async copy(e,t,r){var n=this;try{return{data:{path:(await bt(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ae(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,r){var n=this;try{let s=n._getFinalPath(e),i=await bt(n.fetch,`${n.url}/object/sign/${s}`,B({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ae(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,r){var n=this;try{const s=await bt(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>B(B({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ae(s))return{data:null,error:s};throw s}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>Oi(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new Rw(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:Lc(await Oi(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ae(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await Pw(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ae(n)&&n instanceof $c){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;try{return{data:await Gu(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const s=B(B(B({},Aw),t),{},{prefix:e||""});return{data:await bt(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ae(s))return{data:null,error:s};throw s}}async listV2(e,t){var r=this;try{const n=B({},e);return{data:await bt(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ae(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const og="2.89.0",lg={"X-Client-Info":`storage-js/${og}`};var $w=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=B(B({},lg),t),this.fetch=Qu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await Oi(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Oi(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await bt(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ae(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await Mc(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ae(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await bt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Gu(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Lw=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=B(B({},lg),t),this.fetch=Qu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await bt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await Oi(t.fetch,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Gu(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!Nw(e))throw new Po("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new ww({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}};const Ju={"X-Client-Info":`storage-js/${og}`,"Content-Type":"application/json"};var cg=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function tt(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var pl=class extends cg{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Mw=class extends cg{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Yu=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Uw=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Wh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Dw=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";t(new pl(Wh(i),n,o))}).catch(()=>{const i=n+"";t(new pl(s.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new pl(s.statusText||`HTTP ${n} error`,n,i))}}else t(new Mw(Wh(e),e))},Bw=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(Uw(n)?(s.headers=B({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,B(B({},s),r)):s};async function zw(e,t,r,n,s,i){return new Promise((o,l)=>{e(r,Bw(t,n,s,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>Dw(c,l,n))})}async function rt(e,t,r,n,s){return zw(e,"POST",t,n,s,r)}var qw=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=B(B({},Ju),t),this.fetch=Yu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await rt(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await rt(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await rt(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await rt(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}}},Vw=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=B(B({},Ju),t),this.fetch=Yu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await rt(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await rt(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await rt(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await rt(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await rt(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}},Fw=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=B(B({},Ju),t),this.fetch=Yu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await rt(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await rt(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await rt(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await rt(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}},Ww=class extends Fw{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Kw(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},Kw=class extends qw{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,B(B({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,B(B({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new Hw(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Hw=class extends Vw{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,B(B({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,B(B({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,B(B({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,B(B({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,B(B({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Qw=class extends $w{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new Iw(this.url,this.headers,e,this.fetch)}get vectors(){return new Ww(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Lw(this.url+"/iceberg",this.headers,this.fetch)}};const ug="2.89.0",qn=30*1e3,Uc=3,gl=Uc*qn,Gw="http://localhost:9999",Jw="supabase.auth.token",Yw={"X-Client-Info":`gotrue-js/${ug}`},Dc="X-Supabase-Api-Version",dg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Xw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Zw=10*60*1e3;class Ri extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function M(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class e_ extends Ri{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function t_(e){return M(e)&&e.name==="AuthApiError"}class nn extends Ri{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class dr extends Ri{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Ze extends dr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function r_(e){return M(e)&&e.name==="AuthSessionMissingError"}class In extends dr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ga extends dr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ya extends dr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function n_(e){return M(e)&&e.name==="AuthImplicitGrantRedirectError"}class Kh extends dr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class s_ extends dr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Bc extends dr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function yl(e){return M(e)&&e.name==="AuthRetryableFetchError"}class Hh extends dr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class zc extends dr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const io="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qh=` 	
\r=`.split(""),i_=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Qh.length;t+=1)e[Qh[t].charCodeAt(0)]=-2;for(let t=0;t<io.length;t+=1)e[io[t].charCodeAt(0)]=t;return e})();function Gh(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(io[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(io[n]),t.queuedBits-=6}}function hg(e,t,r){const n=i_[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Jh(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{l_(o,n,r)};for(let o=0;o<e.length;o+=1)hg(e.charCodeAt(o),s,i);return t.join("")}function a_(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function o_(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}a_(n,t)}}function l_(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function cs(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)hg(e.charCodeAt(s),r,n);return new Uint8Array(t)}function c_(e){const t=[];return o_(e,r=>t.push(r)),new Uint8Array(t)}function cn(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Gh(s,r,n)),Gh(null,r,n),t.join("")}function u_(e){return Math.round(Date.now()/1e3)+e}function d_(){return Symbol("auth-callback")}const Pe=()=>typeof window<"u"&&typeof document<"u",Yr={tested:!1,writable:!1},fg=()=>{if(!Pe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yr.tested)return Yr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Yr.tested=!0,Yr.writable=!0}catch{Yr.tested=!0,Yr.writable=!1}return Yr.writable};function h_(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const mg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),f_=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Vn=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Xr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Te=async(e,t)=>{await e.removeItem(t)};class Oo{constructor(){this.promise=new Oo.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Oo.promiseConstructor=Promise;function vl(e){const t=e.split(".");if(t.length!==3)throw new zc("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Xw.test(t[n]))throw new zc("JWT not in base64url format");return{header:JSON.parse(Jh(t[0])),payload:JSON.parse(Jh(t[1])),signature:cs(t[2]),raw:{header:t[0],payload:t[1]}}}async function m_(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function p_(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function g_(e){return("0"+e.toString(16)).substr(-2)}function y_(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,g_).join("")}async function v_(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function x_(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await v_(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $n(e,t,r=!1){const n=y_();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Vn(e,`${t}-code-verifier`,s);const i=await x_(n);return[i,n===i?"plain":"s256"]}const w_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function __(e){const t=e.headers.get(Dc);if(!t||!t.match(w_))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function b_(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function j_(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const N_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ln(e){if(!N_.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xl(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function k_(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function Yh(e){return JSON.parse(JSON.stringify(e))}const tn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),S_=[502,503,504];async function Xh(e){var t;if(!f_(e))throw new Bc(tn(e),0);if(S_.includes(e.status))throw new Bc(tn(e),e.status);let r;try{r=await e.json()}catch(i){throw new nn(tn(i),i)}let n;const s=__(e);if(s&&s.getTime()>=dg["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Hh(tn(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ze}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Hh(tn(r),e.status,r.weak_password.reasons);throw new e_(tn(r),e.status||500,n)}const E_=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function D(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Dc]||(i[Dc]=dg["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await C_(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function C_(e,t,r,n,s,i){const o=E_(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Bc(tn(c),0)}if(l.ok||await Xh(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Xh(c)}}function wt(e){var t;let r=null;O_(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=u_(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Zh(e){const t=wt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function br(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function T_(e){return{data:e,error:null}}function P_(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=To(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function ef(e){return e}function O_(e){return e.access_token&&e.refresh_token&&e.expires_in}const wl=["global","local","others"];class R_{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=mg(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=wl[0]){if(wl.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${wl.join(", ")}`);try{return await D(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await D(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:br})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=To(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await D(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:P_,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(M(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await D(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:br})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await D(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:ef});if(h.error)throw h.error;const f=await h.json(),m=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);u[`${x}Page`]=w}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(M(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ln(t);try{return await D(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:br})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ln(t);try{return await D(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:br})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ln(t);try{return await D(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:br})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ln(t.userId);try{const{data:r,error:n}=await D(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(M(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ln(t.userId),Ln(t.id);try{return{data:await D(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await D(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:ef});if(h.error)throw h.error;const f=await h.json(),m=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);u[`${x}Page`]=w}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(M(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await D(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(M(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await D(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(M(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await D(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(M(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await D(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await D(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(M(r))return{data:null,error:r};throw r}}}function tf(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Mn={debug:!!(globalThis&&fg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class A_ extends pg{}async function I_(e,t,r){Mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Mn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new A_(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Mn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function $_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function gg(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function L_(e){return parseInt(e,16)}function M_(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function U_(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:h,uri:f,version:m}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=gg(e.address),v=h?`${h}://${n}`:n,w=e.statement?`${e.statement}
`:"",x=`${v} wants you to sign in with your Ethereum account:
${y}

${w}`;let d=`URI: ${f}
Version: ${m}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(d+=`
Expiration Time: ${s.toISOString()}`),l&&(d+=`
Not Before: ${l.toISOString()}`),c&&(d+=`
Request ID: ${c}`),u){let p=`
Resources:`;for(const g of u){if(!g||typeof g!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${g}`);p+=`
- ${g}`}d+=p}return`${x}
${d}`}class ye extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class ao extends ye{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function D_({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ye({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ye({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ye({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ye({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ye({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ye({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new ye({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ye({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(yg(o)){if(i.rp.id!==o)return new ye({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ye({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ye({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function B_({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ye({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ye({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(yg(n)){if(r.rpId!==n)return new ye({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ye({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class z_{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const q_=new z_;function V_(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=To(e,["challenge","user","excludeCredentials"]),i=cs(t).buffer,o=Object.assign(Object.assign({},r),{id:cs(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:cs(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function F_(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=To(e,["challenge","allowCredentials"]),s=cs(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:cs(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function W_(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:cn(new Uint8Array(e.response.attestationObject)),clientDataJSON:cn(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function K_(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:cn(new Uint8Array(s.authenticatorData)),clientDataJSON:cn(new Uint8Array(s.clientDataJSON)),signature:cn(new Uint8Array(s.signature)),userHandle:s.userHandle?cn(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function yg(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function rf(){var e,t;return!!(Pe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function H_(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ao("Browser returned unexpected credential type",t)}:{data:null,error:new ao("Empty credential response",t)}}catch(t){return{data:null,error:D_({error:t,options:e})}}}async function Q_(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ao("Browser returned unexpected credential type",t)}:{data:null,error:new ao("Empty credential response",t)}}catch(t){return{data:null,error:B_({error:t,options:e})}}}const G_={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},J_={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function oo(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=oo(l,o):n[i]=oo(o)}else n[i]=o}return n}function Y_(e,t){return oo(G_,e,t||{})}function X_(e,t){return oo(J_,e,t||{})}class Z_{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=s??q_.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=Y_(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:h,error:f}=await H_({publicKey:u,signal:c});return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const u=X_(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:h,error:f}=await Q_(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(o){return M(o)?{data:null,error:o}:{data:null,error:new nn("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Ri("rpId is required for WebAuthn authentication")};try{if(!rf())return{data:null,error:new nn("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return M(o)?{data:null,error:o}:{data:null,error:new nn("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Ri("rpId is required for WebAuthn registration")};try{if(!rf())return{data:null,error:new nn("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return M(o)?{data:null,error:o}:{data:null,error:new nn("Unexpected error in register",o)}}}}$_();const eb={url:Gw,storageKey:Jw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Yw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function nf(e,t,r){return await r()}const Un={};class Ai{get jwks(){var t,r;return(r=(t=Un[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Un[this.storageKey]=Object.assign(Object.assign({},Un[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Un[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Un[this.storageKey]=Object.assign(Object.assign({},Un[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},eb),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Ai.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Ai.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Pe()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new R_({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=mg(i.fetch),this.lock=i.lock||nf,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Pe()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=I_:this.lock=nf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Z_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:fg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=tf(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=tf(this.memoryStorage)),Pe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ug}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Pe()&&(r=h_(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Pe()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),n_(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return M(r)?this._returnResult({error:r}):this._returnResult({error:new nn("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await D(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:wt}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(M(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:h,password:f,options:m}=t;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await $n(this.storage,this.storageKey)),i=await D(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:v},xform:wt})}else if("phone"in t){const{phone:h,password:f,options:m}=t;i=await D(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:wt})}else throw new ga("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await Te(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await Te(this.storage,`${this.storageKey}-code-verifier`),M(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await D(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Zh})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await D(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Zh})}else throw new ga("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new In;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(M(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,l,c,u,h,f,m;let y,v;if("message"in t)y=t.message,v=t.signature;else{const{chain:w,wallet:x,statement:d,options:p}=t;let g;if(Pe())if(typeof x=="object")g=x;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")g=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=x}const b=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href),N=await g.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=gg(N[0]);let T=(n=p==null?void 0:p.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!T){const A=await g.request({method:"eth_chainId"});T=L_(A)}const S={domain:b.host,address:k,statement:d,uri:b.href,version:"1",chainId:T,nonce:(s=p==null?void 0:p.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=p==null?void 0:p.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=p==null?void 0:p.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=p==null?void 0:p.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=p==null?void 0:p.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=p==null?void 0:p.signInWithEthereum)===null||h===void 0?void 0:h.resources};y=U_(S),v=await g.request({method:"personal_sign",params:[M_(y),k]})}try{const{data:w,error:x}=await D(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:v},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:wt});if(x)throw x;if(!w||!w.session||!w.user){const d=new In;return this._returnResult({data:{user:null,session:null},error:d})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:x})}catch(w){if(M(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var r,n,s,i,o,l,c,u,h,f,m,y;let v,w;if("message"in t)v=t.message,w=t.signature;else{const{chain:x,wallet:d,statement:p,options:g}=t;let b;if(Pe())if(typeof d=="object")b=d;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))b=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof d!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=d}const N=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const k=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),p?{statement:p}:null));let T;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")T=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)T=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)v=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),w=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${N.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((f=(h=g==null?void 0:g.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...g.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const k=await b.signMessage(new TextEncoder().encode(v),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=k}}try{const{data:x,error:d}=await D(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:cn(w)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:wt});if(d)throw d;if(!x||!x.session||!x.user){const p=new In;return this._returnResult({data:{user:null,session:null},error:p})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:d})}catch(x){if(M(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(t){const r=await Xr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new s_;const{data:i,error:o}=await D(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:wt});if(await Te(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new In;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Te(this.storage,`${this.storageKey}-code-verifier`),M(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await D(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:wt}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const h=new In;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(M(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await $n(this.storage,this.storageKey));const{error:f}=await D(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:h}=await D(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new ga("You must provide either an email or phone number.")}catch(l){if(await Te(this.storage,`${this.storageKey}-code-verifier`),M(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await D(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:wt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(M(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await $n(this.storage,this.storageKey));const u=await D(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:T_});return!((i=u.data)===null||i===void 0)&&i.url&&Pe()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Te(this.storage,`${this.storageKey}-code-verifier`),M(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ze;const{error:s}=await D(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(M(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await D(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await D(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new ga("You must provide either an email or phone number and a type")}catch(r){if(M(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Xr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<gl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Xr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=xl()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=k_(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await D(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:br}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ze}:await D(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:br})})}catch(r){if(M(r))return r_(r)&&(await this._removeSession(),await Te(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ze;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await $n(this.storage,this.storageKey));const{data:u,error:h}=await D(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:br});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Te(this.storage,`${this.storageKey}-code-verifier`),M(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ze;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=vl(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(M(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ze;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(M(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Pe())throw new ya("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ya(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Kh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ya("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Kh("No code detected.");const{data:p,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new ya("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(l);let m=h+f;c&&(m=parseInt(c));const y=m-h;y*1e3<=qn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${f}s`);const v=m-f;h-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,h):h-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,h);const{data:w,error:x}=await this._getUser(i);if(x)throw x;const d={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:d,redirectType:t.type},error:null})}catch(n){if(M(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Xr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(t_(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Te(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=d_(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await $n(this.storage,this.storageKey,!0));try{return await D(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Te(this.storage,`${this.storageKey}-code-verifier`),M(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,h;const{data:f,error:m}=i;if(m)throw m;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await D(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return Pe()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(M(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:l,token:c,access_token:u,nonce:h}=t,f=await D(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:wt}),{data:m,error:y}=f;return y?this._returnResult({data:{user:null,session:null},error:y}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new In}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:y}))}catch(s){if(await Te(this.storage,`${this.storageKey}-code-verifier`),M(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await D(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await p_(async s=>(s>0&&await m_(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await D(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:wt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&yl(i)&&Date.now()+o-n<qn})}catch(n){if(this._debug(r,"error",n),M(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Pe()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Xr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Xr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Vn(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:xl()}else if(s&&!s.user&&!s.user){const o=await Xr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Te(this.storage,this.storageKey+"-user"),await Vn(this.storage,this.storageKey,s)):s.user=xl()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<gl;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${gl}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),yl(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ze;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Oo;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ze;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),M(i)){const o={data:null,error:i};return yl(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Te(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Vn(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Yh(s);await Vn(this.storage,this.storageKey,i)}else{const s=Yh(r);await Vn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Te(this.storage,this.storageKey),await Te(this.storage,this.storageKey+"-code-verifier"),await Te(this.storage,this.storageKey+"-user"),this.userStorage&&await Te(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Pe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),qn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/qn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${qn}ms, refresh threshold is ${Uc} ticks`),s<=Uc&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof pg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await $n(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await D(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await D(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?W_(t.webauthn.credential_response):K_(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await D(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await D(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:V_(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:F_(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=vl(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await D(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ze})})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ze});const o=await D(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Pe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(M(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ze});const o=await D(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Pe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(M(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await D(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ze})})}catch(t){if(M(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await D(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ze})})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+Zw>s)return n;const{data:i,error:o}=await D(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:y,error:v}=await this.getSession();if(v||!y.session)return this._returnResult({data:null,error:v});n=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=vl(n);r!=null&&r.allowExpired||b_(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const h=j_(s.alg),f=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,o,c_(`${l}.${c}`)))throw new zc("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(M(n))return this._returnResult({data:null,error:n});throw n}}}Ai.nextInstanceID={};const tb=Ai,rb="2.89.0";let Js="";typeof Deno<"u"?Js="deno":typeof document<"u"?Js="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Js="react-native":Js="node";const nb={"X-Client-Info":`supabase-js-${Js}/${rb}`},sb={headers:nb},ib={schema:"public"},ab={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ob={};function Ii(e){"@babel/helpers - typeof";return Ii=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ii(e)}function lb(e,t){if(Ii(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ii(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cb(e){var t=lb(e,"string");return Ii(t)=="symbol"?t:t+""}function ub(e,t,r){return(t=cb(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sf(Object(r),!0).forEach(function(n){ub(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const db=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),hb=()=>Headers,fb=(e,t,r)=>{const n=db(r),s=hb();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,de(de({},o),{},{headers:u}))}};function mb(e){return e.endsWith("/")?e:e+"/"}function pb(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:h,global:f}=t,m={db:de(de({},c),s),auth:de(de({},u),i),realtime:de(de({},h),o),storage:{},global:de(de(de({},f),l),{},{headers:de(de({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function gb(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(mb(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var yb=class extends tb{constructor(e){super(e)}},vb=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=gb(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:ib,realtime:ob,auth:de(de({},ab),{},{storageKey:o}),global:sb},c=pb(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=fb(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(de({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new Yx(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new Qw(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Kx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:u},h,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yb({url:this.authUrl.href,headers:de(de({},m),h),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new mw(this.realtimeUrl.href,de(de({},e),{},{params:de(de({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const xb=(e,t,r)=>new vb(e,t,r);function wb(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}wb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _b="https://fkpwibismkewrezgchbq.supabase.co",bb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZrcHdpYmlzbWtld3JlemdjaGJxIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NjYzMDM0NSwiZXhwIjoyMDgyMjA2MzQ1fQ.I8JiWEwrT9logY7rC9E3CbT4tBvY0n2qkizAQjTPeSg",q=xb(_b,bb,{auth:{persistSession:!0,autoRefreshToken:!0}}),vg=j.createContext(void 0);function jb({children:e}){const[t,r]=j.useState(null),[n,s]=j.useState(null),[i,o]=j.useState(!0);j.useEffect(()=>{q.auth.getSession().then(({data:{session:f}})=>{s(f),r((f==null?void 0:f.user)??null),o(!1)});const{data:{subscription:h}}=q.auth.onAuthStateChange((f,m)=>{s(m),r((m==null?void 0:m.user)??null),o(!1)});return()=>h.unsubscribe()},[]);const u={user:t,session:n,loading:i,signIn:async(h,f)=>{const{error:m}=await q.auth.signInWithPassword({email:h,password:f});if(m)throw m},signOut:async()=>{const{error:h}=await q.auth.signOut();if(h)throw h}};return a.jsx(vg.Provider,{value:u,children:e})}function Xu(){const e=j.useContext(vg);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Q=(e,t)=>{const r=j.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},h)=>j.createElement("svg",{ref:h,...Nb,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${kb(e)}`,l].join(" "),...u},[...t.map(([f,m])=>j.createElement(f,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=Q("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=Q("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=Q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=Q("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Q("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=Q("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=Q("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=Q("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=Q("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=Q("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=Q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=Q("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=Q("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=Q("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=Q("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=Q("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=Q("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=Q("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=Q("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=Q("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=Q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=Q("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=Q("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=Q("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=Q("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=Q("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=Q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=Q("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=Q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=Q("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=Q("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=Q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=Q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=Q("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=Q("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=Q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=Q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=Q("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=Q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function $b(){const[e,t]=j.useState(!1),r=On(),n=$s(),{signOut:s,user:i}=Xu(),o=async()=>{await s(),n("/login")},l=[{name:"Dashboard",href:"/dashboard",icon:Tb},{name:"Members",href:"/members",icon:cr},{name:"Payments",href:"/payments",icon:Ts},{name:"Reports",href:"/reports",icon:Hi}],c=u=>r.pathname===u;return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:a.jsxs("div",{className:"flex flex-col flex-grow bg-gradient-to-b from-emerald-800 to-emerald-900 overflow-y-auto border-r-4 border-yellow-600",children:[a.jsx("div",{className:"flex items-center flex-shrink-0 px-6 py-6 border-b border-emerald-700",children:a.jsxs("div",{className:"text-center w-full",children:[a.jsx("h1",{className:"text-2xl font-bold text-yellow-400 drop-shadow-lg",children:"Central Region"}),a.jsx("p",{className:"text-sm text-yellow-200 mt-1",children:"Muslim Funeral Service"}),a.jsx("div",{className:"mt-2 h-1 w-20 mx-auto bg-gradient-to-r from-transparent via-yellow-400 to-transparent"})]})}),a.jsx("nav",{className:"mt-6 flex-1 px-4 space-y-2",children:l.map(u=>{const h=u.icon;return a.jsxs(Dt,{to:u.href,className:`
                    group flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200
                    ${c(u.href)?"bg-yellow-600 text-white shadow-lg":"text-emerald-100 hover:bg-emerald-700 hover:text-white"}
                  `,children:[a.jsx(h,{className:`mr-3 h-5 w-5 flex-shrink-0 ${c(u.href)?"text-white":"text-emerald-300"}`}),u.name]},u.name)})}),a.jsx("div",{className:"flex-shrink-0 border-t border-emerald-700 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-emerald-100 truncate",children:i==null?void 0:i.email}),a.jsx("p",{className:"text-xs text-emerald-300",children:"Administrator"})]}),a.jsx("button",{onClick:o,className:"ml-3 p-2 rounded-lg hover:bg-emerald-700 transition-colors",title:"Sign out",children:a.jsx(of,{className:"h-5 w-5 text-emerald-300"})})]})})]})}),a.jsx("div",{className:"lg:hidden",children:e&&a.jsxs("div",{className:"fixed inset-0 z-40 flex",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>t(!1)}),a.jsxs("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-gradient-to-b from-emerald-800 to-emerald-900",children:[a.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:a.jsx("button",{className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>t(!1),children:a.jsx(kg,{className:"h-6 w-6 text-white"})})}),a.jsx("div",{className:"flex items-center flex-shrink-0 px-6 py-6 border-b border-emerald-700",children:a.jsxs("div",{className:"text-center w-full",children:[a.jsx("h1",{className:"text-xl font-bold text-yellow-400",children:"Central Region"}),a.jsx("p",{className:"text-xs text-yellow-200 mt-1",children:"Muslim Funeral Service"})]})}),a.jsx("nav",{className:"mt-6 flex-1 px-4 space-y-2",children:l.map(u=>{const h=u.icon;return a.jsxs(Dt,{to:u.href,onClick:()=>t(!1),className:`
                        group flex items-center px-4 py-3 text-sm font-medium rounded-lg
                        ${c(u.href)?"bg-yellow-600 text-white":"text-emerald-100 hover:bg-emerald-700 hover:text-white"}
                      `,children:[a.jsx(h,{className:"mr-3 h-5 w-5"}),u.name]},u.name)})}),a.jsx("div",{className:"flex-shrink-0 border-t border-emerald-700 p-4",children:a.jsxs("button",{onClick:o,className:"w-full flex items-center px-4 py-3 text-sm font-medium text-emerald-100 hover:bg-emerald-700 rounded-lg",children:[a.jsx(of,{className:"mr-3 h-5 w-5"}),"Sign out"]})})]})]})}),a.jsxs("div",{className:"lg:pl-64 flex flex-col flex-1",children:[a.jsx("div",{className:"sticky top-0 z-10 lg:hidden bg-white shadow-sm border-b-2 border-emerald-600",children:a.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[a.jsx("button",{onClick:()=>t(!0),className:"text-emerald-700 hover:text-emerald-900",children:a.jsx(Pb,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-lg font-semibold text-emerald-800",children:"CRMFS"}),a.jsx("div",{className:"w-6"})," "]})}),a.jsx("main",{className:"flex-1",children:a.jsx("div",{className:"py-6 px-4 sm:px-6 lg:px-8",children:a.jsx(Gv,{})})})]})]})}function Lb(){const e=$s(),{data:t,isLoading:r,refetch:n}=qt({queryKey:["applications-in-progress"],queryFn:async()=>{const{data:o,error:l}=await q.from("applications_in_progress").select("*").eq("status","in_progress").order("last_saved_at",{ascending:!1}).limit(10);if(l)throw l;return o||[]}}),s=async o=>{confirm("Are you sure you want to delete this saved application?")&&(await q.from("applications_in_progress").delete().eq("application_reference",o),n())},i=o=>{e("/members/new",{state:{savedApplication:o}})};return r?a.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Applications In Progress"}),a.jsxs("div",{className:"animate-pulse space-y-3",children:[a.jsx("div",{className:"h-16 bg-gray-200 rounded"}),a.jsx("div",{className:"h-16 bg-gray-200 rounded"})]})]}):!t||t.length===0?null:a.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(lo,{className:"h-5 w-5 text-yellow-600 mr-2"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Applications In Progress"})]}),a.jsxs("span",{className:"text-sm text-gray-500",children:[t.length," saved"]})]}),a.jsx("div",{className:"space-y-3",children:t.map(o=>a.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-emerald-300 transition-colors",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("p",{className:"font-medium text-gray-900",children:[o.main_first_name," ",o.main_last_name,o.app_type==="joint"&&o.joint_first_name&&a.jsxs("span",{className:"text-gray-600",children:[" & ",o.joint_first_name," ",o.joint_last_name]})]}),a.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800",children:o.app_type})]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[o.application_reference,"  Step ",o.current_step+1,"/10 ",a.jsx("span",{className:"ml-1",children:new Date(o.last_saved_at).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>i(o),className:"inline-flex items-center px-3 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-sm",children:["Continue",a.jsx(wg,{className:"h-4 w-4 ml-1"})]}),a.jsx("button",{onClick:()=>s(o.application_reference),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(rd,{className:"h-4 w-4"})})]})]},o.id))})]})}function Mb(){const{data:e,isLoading:t}=qt({queryKey:["dashboard-stats"],queryFn:async()=>{var f,m,y;const[i,o]=await Promise.all([q.from("members").select("status",{count:"exact"}),q.from("payments").select("total_amount, payment_status")]),l=i.count||0,c=((f=i.data)==null?void 0:f.filter(v=>v.status==="active").length)||0,u=((m=i.data)==null?void 0:m.filter(v=>v.status==="pending").length)||0,h=((y=o.data)==null?void 0:y.filter(v=>v.payment_status==="completed").reduce((v,w)=>v+Number(w.total_amount),0))||0;return{totalMembers:l,activeMembers:c,pendingMembers:u,totalRevenue:h}}}),{data:r}=qt({queryKey:["recent-members"],queryFn:async()=>{const{data:i}=await q.from("members").select("*").order("created_at",{ascending:!1}).limit(5);return i||[]}}),{data:n}=qt({queryKey:["upcoming-renewals"],queryFn:async()=>{const i=new Date;i.setFullYear(i.getFullYear()-1),i.setMonth(i.getMonth()+1);const{data:o}=await q.from("payments").select("*, members(first_name, last_name, email)").gte("renewal_date",new Date().toISOString()).lte("renewal_date",i.toISOString()).order("renewal_date",{ascending:!0}).limit(5);return o||[]}}),s=[{name:"Total Members",value:(e==null?void 0:e.totalMembers)||0,icon:cr,color:"from-emerald-500 to-emerald-600",bgColor:"bg-emerald-50",iconColor:"text-emerald-600"},{name:"Active Members",value:(e==null?void 0:e.activeMembers)||0,icon:Ib,color:"from-green-500 to-green-600",bgColor:"bg-green-50",iconColor:"text-green-600"},{name:"Pending Applications",value:(e==null?void 0:e.pendingMembers)||0,icon:lo,color:"from-yellow-500 to-yellow-600",bgColor:"bg-yellow-50",iconColor:"text-yellow-600"},{name:"Total Revenue",value:`${((e==null?void 0:e.totalRevenue)||0).toLocaleString()}`,icon:li,color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50",iconColor:"text-blue-600"}];return t?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Welcome back! Here's what's happening today."})]}),a.jsxs(Dt,{to:"/members/new",className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-emerald-600 to-emerald-700 text-white rounded-lg hover:from-emerald-700 hover:to-emerald-800 transition-all shadow-md hover:shadow-lg",children:[a.jsx($o,{className:"h-5 w-5 mr-2"}),"New Member"]})]}),a.jsx(Lb,{}),a.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:s.map(i=>{const o=i.icon;return a.jsxs("div",{className:"bg-white overflow-hidden shadow-lg rounded-xl border border-gray-100 hover:shadow-xl transition-shadow",children:[a.jsx("div",{className:"p-5",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`flex-shrink-0 rounded-lg p-3 ${i.bgColor}`,children:a.jsx(o,{className:`h-6 w-6 ${i.iconColor}`})}),a.jsx("div",{className:"ml-5 w-0 flex-1",children:a.jsxs("dl",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:i.name}),a.jsx("dd",{className:"flex items-baseline",children:a.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:i.value})})]})})]})}),a.jsx("div",{className:`h-2 bg-gradient-to-r ${i.color}`})]},i.name)})}),a.jsxs("div",{className:"grid grid-cols-1 gap-5 lg:grid-cols-2",children:[a.jsxs("div",{className:"bg-white shadow-lg rounded-xl border border-gray-100 overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-emerald-700 px-6 py-4",children:a.jsx("h2",{className:"text-lg font-semibold text-white",children:"Recent Members"})}),a.jsx("div",{className:"divide-y divide-gray-200",children:r&&r.length>0?r.map(i=>a.jsx(Dt,{to:`/members/${i.id}`,className:"px-6 py-4 hover:bg-emerald-50 transition-colors block",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsxs("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-emerald-400 to-emerald-600 flex items-center justify-center text-white font-semibold",children:[i.first_name[0],i.last_name[0]]})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[i.first_name," ",i.last_name]}),a.jsx("p",{className:"text-xs text-gray-500",children:i.email})]})]}),a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.status==="active"?"bg-green-100 text-green-800":i.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:i.status})]})},i.id)):a.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No recent members"})}),a.jsx("div",{className:"bg-gray-50 px-6 py-3",children:a.jsx(Dt,{to:"/members",className:"text-sm font-medium text-emerald-600 hover:text-emerald-700",children:"View all members "})})]}),a.jsxs("div",{className:"bg-white shadow-lg rounded-xl border border-gray-100 overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-yellow-600 to-yellow-700 px-6 py-4",children:a.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center",children:[a.jsx(Ki,{className:"h-5 w-5 mr-2"}),"Upcoming Renewals"]})}),a.jsx("div",{className:"divide-y divide-gray-200",children:n&&n.length>0?n.map(i=>{var o,l,c;return a.jsx("div",{className:"px-6 py-4 hover:bg-yellow-50 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[(o=i.members)==null?void 0:o.first_name," ",(l=i.members)==null?void 0:l.last_name]}),a.jsx("p",{className:"text-xs text-gray-500",children:(c=i.members)==null?void 0:c.email})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:i.renewal_date?new Date(i.renewal_date).toLocaleDateString():"N/A"}),a.jsxs("p",{className:"text-xs text-gray-500",children:["",Number(i.total_amount).toFixed(2)]})]})]})},i.id)}):a.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"No upcoming renewals"})}),a.jsx("div",{className:"bg-gray-50 px-6 py-3",children:a.jsx(Dt,{to:"/payments",className:"text-sm font-medium text-yellow-600 hover:text-yellow-700",children:"View all payments "})})]})]})]})}function Ub(){const[e,t]=j.useState(""),[r,n]=j.useState("all"),{data:s,isLoading:i}=qt({queryKey:["members"],queryFn:async()=>{const{data:c,error:u}=await q.from("members").select("*").order("created_at",{ascending:!1});if(u)throw u;return c}}),o=s==null?void 0:s.filter(c=>{var f,m;const u=e===""||`${c.first_name} ${c.last_name}`.toLowerCase().includes(e.toLowerCase())||((f=c.email)==null?void 0:f.toLowerCase().includes(e.toLowerCase()))||((m=c.mobile)==null?void 0:m.includes(e)),h=r==="all"||c.status===r;return u&&h}),l=c=>{const u={active:"bg-green-100 text-green-800 border-green-200",pending:"bg-yellow-100 text-yellow-800 border-yellow-200",inactive:"bg-gray-100 text-gray-800 border-gray-200",deceased:"bg-red-100 text-red-800 border-red-200"};return a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${u[c]||u.inactive}`,children:c.charAt(0).toUpperCase()+c.slice(1)})};return i?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Members"}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage funeral service memberships"})]}),a.jsxs(Dt,{to:"/members/new",className:"inline-flex items-center justify-center px-4 py-2 bg-gradient-to-r from-emerald-600 to-emerald-700 text-white rounded-lg hover:from-emerald-700 hover:to-emerald-800 transition-all shadow-md hover:shadow-lg",children:[a.jsx($o,{className:"h-5 w-5 mr-2"}),"New Member"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border border-gray-200",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(jg,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Search by name, email, or phone...",value:e,onChange:c=>t(c.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),a.jsx("div",{className:"sm:w-48",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(bg,{className:"h-5 w-5 text-gray-400"})}),a.jsxs("select",{value:r,onChange:c=>n(c.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"inactive",children:"Inactive"}),a.jsx("option",{value:"deceased",children:"Deceased"})]})]})})]})}),a.jsxs("div",{className:"bg-white shadow-lg rounded-xl border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gradient-to-r from-emerald-600 to-emerald-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Member"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Contact"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Joined"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-white uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o&&o.length>0?o.map(c=>a.jsxs("tr",{className:"hover:bg-emerald-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsxs("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-emerald-400 to-emerald-600 flex items-center justify-center text-white font-semibold",children:[c.first_name[0],c.last_name[0]]})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[c.title," ",c.first_name," ",c.last_name]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",c.id.slice(0,8)]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${c.app_type==="joint"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:c.app_type==="joint"?"Joint":"Single"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex flex-col space-y-1",children:[c.email&&a.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[a.jsx(Qi,{className:"h-3 w-3 mr-1"}),c.email]}),c.mobile&&a.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[a.jsx(Pt,{className:"h-3 w-3 mr-1"}),c.mobile]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l(c.status)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(c.created_at).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs(Dt,{to:`/members/${c.id}`,className:"inline-flex items-center px-3 py-1.5 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 transition-colors",children:[a.jsx(_g,{className:"h-4 w-4 mr-1"}),"View"]})})]},c.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:a.jsxs("div",{className:"text-gray-500",children:[a.jsx(cr,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-lg font-medium",children:"No members found"}),a.jsx("p",{className:"text-sm mt-1",children:e||r!=="all"?"Try adjusting your search or filters":"Get started by adding your first member"})]})})})})]})}),o&&o.length>0&&a.jsx("div",{className:"bg-gray-50 px-6 py-3 border-t border-gray-200",children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",a.jsx("span",{className:"font-medium",children:o.length})," of"," ",a.jsx("span",{className:"font-medium",children:s==null?void 0:s.length})," members"]})})]})]})}function Db(){var Wt,hr,fr,$;const{id:e}=Iv(),[t,r]=j.useState("personal"),[n,s]=j.useState(!1),[i,o]=j.useState(null),l=Co(),{data:c,isLoading:u}=qt({queryKey:["member-detail",e],queryFn:async()=>{const[{data:E},{data:O},{data:K},{data:H},{data:Ce},{data:We},{data:Kt},{data:lt},{data:mr}]=await Promise.all([q.from("members").select("*").eq("id",e).single(),q.from("joint_members").select("*").eq("member_id",e).maybeSingle(),q.from("children").select("*").eq("member_id",e),q.from("next_of_kin").select("*").eq("member_id",e),q.from("gp_details").select("*").eq("member_id",e).maybeSingle(),q.from("medical_info").select("*").eq("member_id",e),q.from("documents").select("*").eq("member_id",e),q.from("declarations").select("*").eq("member_id",e).maybeSingle(),q.from("payments").select("*").eq("member_id",e).order("created_at",{ascending:!1})]);return{member:E,jointMember:O,children:K||[],nextOfKin:H||[],gpDetails:Ce,medicalInfo:We||[],documents:Kt||[],declarations:lt,payments:mr||[]}}}),h=so({mutationFn:async E=>{var K;const O=[];if(E.member&&O.push(q.from("members").update(E.member).eq("id",e)),E.jointMember&&(c!=null&&c.jointMember)&&O.push(q.from("joint_members").update(E.jointMember).eq("member_id",e)),E.nextOfKin&&((K=c==null?void 0:c.nextOfKin)!=null&&K[0])&&O.push(q.from("next_of_kin").update(E.nextOfKin).eq("member_id",e)),E.gpDetails&&(c!=null&&c.gpDetails)&&O.push(q.from("gp_details").update(E.gpDetails).eq("member_id",e)),E.children)for(const H of E.children)H.id&&O.push(q.from("children").update(H).eq("id",H.id));if(E.deletedChildren&&E.deletedChildren.length>0)for(const H of E.deletedChildren)O.push(q.from("children").delete().eq("id",H));await Promise.all(O)},onSuccess:()=>{l.invalidateQueries({queryKey:["member-detail",e]}),s(!1),o(null)}}),f=()=>{var E;o({member:{...c==null?void 0:c.member},jointMember:c!=null&&c.jointMember?{...c.jointMember}:null,nextOfKin:(E=c==null?void 0:c.nextOfKin)!=null&&E[0]?{...c.nextOfKin[0]}:null,gpDetails:c!=null&&c.gpDetails?{...c.gpDetails}:null,children:c!=null&&c.children?c.children.map(O=>({...O})):[],deletedChildren:[]}),s(!0)},m=()=>{h.mutate(i)},y=()=>{s(!1),o(null)},v=(E,O,K)=>{o(H=>({...H,[E]:{...H[E],[O]:K}}))},w=(E,O,K)=>{o(H=>{const Ce=[...H.children];return Ce[E]={...Ce[E],[O]:K},{...H,children:Ce}})},x=E=>{o(O=>{const K=O.children[E],H=O.children.filter((We,Kt)=>Kt!==E),Ce=K.id?[...O.deletedChildren,K.id]:O.deletedChildren;return{...O,children:H,deletedChildren:Ce}})},d=E=>{if(!E)return 0;const O=new Date(E),K=new Date;let H=K.getFullYear()-O.getFullYear();const Ce=K.getMonth()-O.getMonth();return(Ce<0||Ce===0&&K.getDate()<O.getDate())&&H--,H},p=E=>{const O={active:"bg-green-100 text-green-800 border-green-200",pending:"bg-yellow-100 text-yellow-800 border-yellow-200",inactive:"bg-gray-100 text-gray-800 border-gray-200",deceased:"bg-red-100 text-red-800 border-red-200"};return a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${O[E]||O.inactive}`,children:E.charAt(0).toUpperCase()+E.slice(1)})},g=[{id:"personal",label:"Personal Info",icon:co},{id:"joint",label:"Joint Member",icon:cr,show:((Wt=c==null?void 0:c.member)==null?void 0:Wt.app_type)==="joint"},{id:"children",label:"Children",icon:Ro,count:(hr=c==null?void 0:c.children)==null?void 0:hr.length},{id:"nok",label:"Next of Kin",icon:ed},{id:"gp",label:"GP Details",icon:td},{id:"medical",label:"Medical Info",icon:Hi},{id:"documents",label:"Documents",icon:Lo,count:(fr=c==null?void 0:c.documents)==null?void 0:fr.length},{id:"declarations",label:"Declarations",icon:Ao},{id:"payments",label:"Payments",icon:Ts,count:($=c==null?void 0:c.payments)==null?void 0:$.length}];if(u)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})});if(!(c!=null&&c.member))return a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-500",children:"Member not found"})});const{member:b,jointMember:N,children:k,nextOfKin:T,gpDetails:S,medicalInfo:A,documents:R,declarations:Y,payments:ge}=c,je=d(b.dob),Ft=N!=null&&N.dob?d(N.dob):null;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Dt,{to:"/members",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(xg,{className:"h-5 w-5 text-gray-600"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[b.title," ",b.first_name," ",b.last_name]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Member ID: ",b.id.slice(0,8)]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[p(b.status),n?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:y,disabled:h.isPending,className:"inline-flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50",children:[a.jsx(kg,{className:"h-4 w-4 mr-2"}),"Cancel"]}),a.jsx("button",{onClick:m,disabled:h.isPending,className:"inline-flex items-center px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50",children:h.isPending?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Rb,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]}):a.jsxs("button",{onClick:f,className:"inline-flex items-center px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:[a.jsx(Ab,{className:"h-4 w-4 mr-2"}),"Edit"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:a.jsx(co,{className:"h-5 w-5 text-emerald-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Membership Type"}),a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:b.app_type==="joint"?"Joint":"Single"})]})]})}),a.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(Zu,{className:"h-5 w-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Current Age"}),a.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[je," years old"]})]})]})}),a.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:a.jsx(Pt,{className:"h-5 w-5 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Mobile"}),a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:b.mobile||"N/A"})]})]})}),a.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:a.jsx(Ts,{className:"h-5 w-5 text-yellow-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Total Paid"}),a.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["",ge.filter(E=>E.payment_status==="completed").reduce((E,O)=>E+Number(O.total_amount),0).toFixed(2)]})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:a.jsx("nav",{className:"flex space-x-1 px-4",children:g.filter(E=>E.show!==!1).map(E=>{const O=E.icon;return a.jsxs("button",{onClick:()=>r(E.id),className:`flex items-center px-4 py-3 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${t===E.id?"border-emerald-600 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(O,{className:"h-4 w-4 mr-2"}),E.label,E.count!==void 0&&E.count>0&&a.jsx("span",{className:"ml-2 px-2 py-0.5 bg-gray-200 text-gray-700 rounded-full text-xs",children:E.count})]},E.id)})})}),a.jsxs("div",{className:"p-6",children:[t==="personal"&&a.jsx(Bb,{member:n?i==null?void 0:i.member:b,age:je,isEditing:n,updateField:(E,O)=>v("member",E,O)}),t==="joint"&&a.jsx(zb,{jointMember:n?i==null?void 0:i.jointMember:N,age:Ft,isEditing:n,updateField:(E,O)=>v("jointMember",E,O)}),t==="children"&&a.jsx(qb,{children:n?i==null?void 0:i.children:k,isEditing:n,updateChild:w,removeChild:x,calculateAge:d}),t==="nok"&&a.jsx(Vb,{nextOfKin:n&&(i!=null&&i.nextOfKin)?[i.nextOfKin]:T,isEditing:n,updateField:(E,O)=>v("nextOfKin",E,O)}),t==="gp"&&a.jsx(Fb,{gpDetails:n?i==null?void 0:i.gpDetails:S,isEditing:n,updateField:(E,O)=>v("gpDetails",E,O)}),t==="medical"&&a.jsx(Wb,{medicalInfo:A,appType:b.app_type}),t==="documents"&&a.jsx(Kb,{documents:R}),t==="declarations"&&a.jsx(Hb,{declarations:Y}),t==="payments"&&a.jsx(Qb,{payments:ge})]})]})]})}function Bb({member:e,age:t,isEditing:r,updateField:n}){const s=new Date().toISOString().split("T")[0];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(z,{label:"Title",value:e==null?void 0:e.title,isEditing:r,type:"select",options:["Mr","Mrs","Miss","Ms","Dr"],onChange:i=>n==null?void 0:n("title",i)}),a.jsx(z,{label:"First Name",value:e==null?void 0:e.first_name,isEditing:r,onChange:i=>n==null?void 0:n("first_name",i)}),a.jsx(z,{label:"Last Name",value:e==null?void 0:e.last_name,isEditing:r,onChange:i=>n==null?void 0:n("last_name",i)}),a.jsx(z,{label:"Date of Birth",value:e==null?void 0:e.dob,displayValue:e!=null&&e.dob?new Date(e.dob).toLocaleDateString():"N/A",isEditing:r,type:"date",max:s,onChange:i=>n==null?void 0:n("dob",i)}),a.jsx(pt,{label:"Current Age",value:`${t} years old`,highlight:!0}),a.jsx(z,{label:"Status",value:e==null?void 0:e.status,isEditing:r,type:"select",options:["active","pending","inactive","deceased"],onChange:i=>n==null?void 0:n("status",i)})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(z,{label:"Mobile Phone",value:e==null?void 0:e.mobile,isEditing:r,icon:Pt,onChange:i=>n==null?void 0:n("mobile",i)}),a.jsx(z,{label:"Home Phone",value:e==null?void 0:e.home_phone,isEditing:r,icon:Pt,onChange:i=>n==null?void 0:n("home_phone",i)}),a.jsx(z,{label:"Work Phone",value:e==null?void 0:e.work_phone,isEditing:r,icon:Pt,onChange:i=>n==null?void 0:n("work_phone",i)}),a.jsx(z,{label:"Email",value:e==null?void 0:e.email,isEditing:r,type:"email",icon:Qi,onChange:i=>n==null?void 0:n("email",i)})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Address"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(z,{label:"Address Line 1",value:e==null?void 0:e.address_line_1,isEditing:r,icon:Io,onChange:i=>n==null?void 0:n("address_line_1",i)})}),a.jsx(z,{label:"Town",value:e==null?void 0:e.town,isEditing:r,onChange:i=>n==null?void 0:n("town",i)}),a.jsx(z,{label:"City",value:e==null?void 0:e.city,isEditing:r,onChange:i=>n==null?void 0:n("city",i)}),a.jsx(z,{label:"Postcode",value:e==null?void 0:e.postcode,isEditing:r,onChange:i=>n==null?void 0:n("postcode",i)})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notes"}),r?a.jsx("textarea",{value:(e==null?void 0:e.notes)||"",onChange:i=>n==null?void 0:n("notes",i.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 min-h-[100px]",placeholder:"Add notes..."}):a.jsx("p",{className:"text-gray-700 bg-gray-50 p-4 rounded-lg",children:(e==null?void 0:e.notes)||"No notes"})]}),a.jsx("div",{className:"border-t border-gray-200 pt-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(pt,{label:"Created On",value:new Date(e==null?void 0:e.created_at).toLocaleString()}),a.jsx(pt,{label:"Last Updated",value:new Date(e==null?void 0:e.updated_at).toLocaleString()})]})})]})}function zb({jointMember:e,age:t,isEditing:r,updateField:n}){const s=new Date().toISOString().split("T")[0];return e?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(z,{label:"Title",value:e==null?void 0:e.title,isEditing:r,type:"select",options:["Mr","Mrs","Miss","Ms","Dr"],onChange:i=>n==null?void 0:n("title",i)}),a.jsx(z,{label:"First Name",value:e==null?void 0:e.first_name,isEditing:r,onChange:i=>n==null?void 0:n("first_name",i)}),a.jsx(z,{label:"Last Name",value:e==null?void 0:e.last_name,isEditing:r,onChange:i=>n==null?void 0:n("last_name",i)}),a.jsx(z,{label:"Date of Birth",value:e==null?void 0:e.dob,displayValue:e!=null&&e.dob?new Date(e.dob).toLocaleDateString():"N/A",isEditing:r,type:"date",max:s,onChange:i=>n==null?void 0:n("dob",i)}),t&&a.jsx(pt,{label:"Current Age",value:`${t} years old`,highlight:!0})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(z,{label:"Mobile Phone",value:e==null?void 0:e.mobile,isEditing:r,icon:Pt,onChange:i=>n==null?void 0:n("mobile",i)}),a.jsx(z,{label:"Home Phone",value:e==null?void 0:e.home_phone,isEditing:r,icon:Pt,onChange:i=>n==null?void 0:n("home_phone",i)}),a.jsx(z,{label:"Work Phone",value:e==null?void 0:e.work_phone,isEditing:r,icon:Pt,onChange:i=>n==null?void 0:n("work_phone",i)}),a.jsx(z,{label:"Email",value:e==null?void 0:e.email,isEditing:r,type:"email",icon:Qi,onChange:i=>n==null?void 0:n("email",i)})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Address"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(z,{label:"Address Line 1",value:e==null?void 0:e.address_line_1,isEditing:r,icon:Io,onChange:i=>n==null?void 0:n("address_line_1",i)})}),a.jsx(z,{label:"Town",value:e==null?void 0:e.town,isEditing:r,onChange:i=>n==null?void 0:n("town",i)}),a.jsx(z,{label:"City",value:e==null?void 0:e.city,isEditing:r,onChange:i=>n==null?void 0:n("city",i)}),a.jsx(z,{label:"Postcode",value:e==null?void 0:e.postcode,isEditing:r,onChange:i=>n==null?void 0:n("postcode",i)})]})]})]}):a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(cr,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"No joint member information"})]})}function qb({children:e,isEditing:t,updateChild:r,removeChild:n,calculateAge:s}){const i=new Date().toISOString().split("T")[0];return!e||e.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(Ro,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"No children registered"})]}):a.jsx("div",{className:"space-y-4",children:e.map((o,l)=>{const c=o.dob?s(o.dob):0;return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 relative",children:[t&&a.jsx("button",{onClick:()=>n==null?void 0:n(l),className:"absolute top-3 right-3 p-1 text-red-600 hover:bg-red-50 rounded",title:"Remove child",children:a.jsx(rd,{className:"h-5 w-5"})}),a.jsxs("h3",{className:"font-semibold text-gray-900 mb-3",children:["Child ",l+1]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(z,{label:"First Name",value:o.first_name,isEditing:t,onChange:u=>r==null?void 0:r(l,"first_name",u)}),a.jsx(z,{label:"Last Name",value:o.last_name,isEditing:t,onChange:u=>r==null?void 0:r(l,"last_name",u)}),a.jsx(z,{label:"Date of Birth",value:o.dob,displayValue:o.dob?new Date(o.dob).toLocaleDateString():"N/A",isEditing:t,type:"date",max:i,onChange:u=>r==null?void 0:r(l,"dob",u)}),a.jsx(pt,{label:"Current Age",value:o.dob?`${c} years old`:"N/A",highlight:!0}),a.jsx(z,{label:"Relation",value:o.relation,isEditing:t,type:"select",options:["son","daughter","stepson","stepdaughter"],onChange:u=>r==null?void 0:r(l,"relation",u)})]})]},o.id||l)})})}function Vb({nextOfKin:e,isEditing:t,updateField:r}){if(e.length===0)return a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(ed,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"No next of kin information"})]});const n=e[0];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(z,{label:"Title",value:n==null?void 0:n.title,isEditing:t,type:"select",options:["Mr","Mrs","Miss","Ms","Dr"],onChange:s=>r==null?void 0:r("title",s)}),a.jsx(z,{label:"First Name",value:n==null?void 0:n.first_name,isEditing:t,onChange:s=>r==null?void 0:r("first_name",s)}),a.jsx(z,{label:"Last Name",value:n==null?void 0:n.last_name,isEditing:t,onChange:s=>r==null?void 0:r("last_name",s)}),a.jsx(z,{label:"Relationship",value:n==null?void 0:n.relationship,isEditing:t,onChange:s=>r==null?void 0:r("relationship",s)})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(z,{label:"Mobile Phone",value:n==null?void 0:n.mobile,isEditing:t,icon:Pt,onChange:s=>r==null?void 0:r("mobile",s)}),a.jsx(z,{label:"Home Phone",value:n==null?void 0:n.phone,isEditing:t,icon:Pt,onChange:s=>r==null?void 0:r("phone",s)}),a.jsx(z,{label:"Email",value:n==null?void 0:n.email,isEditing:t,type:"email",icon:Qi,onChange:s=>r==null?void 0:r("email",s)})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Address"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(z,{label:"Address Line 1",value:n==null?void 0:n.address_line_1,isEditing:t,icon:Io,onChange:s=>r==null?void 0:r("address_line_1",s)})}),a.jsx(z,{label:"Town",value:n==null?void 0:n.town,isEditing:t,onChange:s=>r==null?void 0:r("town",s)}),a.jsx(z,{label:"City",value:n==null?void 0:n.city,isEditing:t,onChange:s=>r==null?void 0:r("city",s)}),a.jsx(z,{label:"Postcode",value:n==null?void 0:n.postcode,isEditing:t,onChange:s=>r==null?void 0:r("postcode",s)})]})]})]})}function Fb({gpDetails:e,isEditing:t,updateField:r}){return e?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.jsx("div",{className:"md:col-span-2",children:a.jsx(z,{label:"GP Name / Surgery",value:e==null?void 0:e.gp_name_surgery,isEditing:t,onChange:n=>r==null?void 0:r("gp_name_surgery",n)})})}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(z,{label:"Phone",value:e==null?void 0:e.phone,isEditing:t,icon:Pt,onChange:n=>r==null?void 0:r("phone",n)}),a.jsx(z,{label:"Email",value:e==null?void 0:e.email,isEditing:t,type:"email",icon:Qi,onChange:n=>r==null?void 0:r("email",n)})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Address"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(z,{label:"Address Line 1",value:e==null?void 0:e.address_line_1,isEditing:t,icon:Io,onChange:n=>r==null?void 0:r("address_line_1",n)})}),a.jsx(z,{label:"Town",value:e==null?void 0:e.town,isEditing:t,onChange:n=>r==null?void 0:r("town",n)}),a.jsx(z,{label:"City",value:e==null?void 0:e.city,isEditing:t,onChange:n=>r==null?void 0:r("city",n)}),a.jsx(z,{label:"Postcode",value:e==null?void 0:e.postcode,isEditing:t,onChange:n=>r==null?void 0:r("postcode",n)})]})]})]}):a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(td,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"No GP details registered"})]})}function Wb({medicalInfo:e,appType:t}){const r=e.find(s=>s.member_type==="main"),n=e.find(s=>s.member_type==="joint");return e.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(Hi,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"No medical information registered"})]}):a.jsxs("div",{className:"space-y-6",children:[r&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Main Member"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(pt,{label:"Disclaimer",value:r.disclaimer}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical Conditions"}),a.jsx("p",{className:"text-gray-900 bg-gray-50 p-4 rounded-lg",children:r.conditions||"None listed"})]})]})]}),t==="joint"&&n&&a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Joint Member"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(pt,{label:"Disclaimer",value:n.disclaimer}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical Conditions"}),a.jsx("p",{className:"text-gray-900 bg-gray-50 p-4 rounded-lg",children:n.conditions||"None listed"})]})]})]})]})}function Kb({documents:e}){return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Lo,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-500",children:"Document management coming soon"}),a.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[e.length," document(s) registered in the system"]})]})}function Hb({declarations:e}){return e?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Agreement Signatures"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Bn,{label:"Main Member Agreement",checked:e.agreement_sig_1}),a.jsx(Bn,{label:"Joint Member Agreement",checked:e.agreement_sig_2})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Funding Signatures"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Bn,{label:"Main Member Funding",checked:e.funding_sig_1}),a.jsx(Bn,{label:"Joint Member Funding",checked:e.funding_sig_2})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Declaration Signatures"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Bn,{label:"Main Member Declaration",checked:e.declaration_sig_1}),a.jsx(Bn,{label:"Joint Member Declaration",checked:e.declaration_sig_2})]})]}),a.jsx("div",{className:"border-t border-gray-200 pt-6",children:a.jsx(pt,{label:"Signed At",value:new Date(e.signed_at).toLocaleString()})})]}):a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(Ao,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"No declarations registered"})]})}function Qb({payments:e}){if(e.length===0)return a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(Ts,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"No payment records"})]});const t=r=>{const n={completed:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"};return a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n[r]||n.pending}`,children:r.charAt(0).toUpperCase()+r.slice(1)})};return a.jsx("div",{className:"space-y-4",children:e.map(r=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 bg-white shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-900",children:["Payment #",r.id.slice(0,8)]}),a.jsx("p",{className:"text-sm text-gray-500",children:r.payment_date?new Date(r.payment_date).toLocaleDateString():new Date(r.created_at).toLocaleDateString()})]}),t(r.payment_status)]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsx(pt,{label:"Payment Type",value:r.payment_type}),a.jsx(pt,{label:"Payment Method",value:r.payment_method}),r.reference_no&&a.jsx(pt,{label:"Reference No",value:r.reference_no}),r.processed_by&&a.jsx(pt,{label:"Processed By",value:r.processed_by})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Fee Breakdown"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[r.main_joining_fee>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Main Member - Joining Fee"}),a.jsxs("span",{className:"font-medium",children:["",Number(r.main_joining_fee).toFixed(2)]})]}),r.main_membership_fee>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Main Member - Membership Fee"}),a.jsxs("span",{className:"font-medium",children:["",Number(r.main_membership_fee).toFixed(2)]})]}),r.joint_joining_fee>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Joint Member - Joining Fee"}),a.jsxs("span",{className:"font-medium",children:["",Number(r.joint_joining_fee).toFixed(2)]})]}),r.joint_membership_fee>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Joint Member - Membership Fee"}),a.jsxs("span",{className:"font-medium",children:["",Number(r.joint_membership_fee).toFixed(2)]})]}),r.late_fee>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Late Fee"}),a.jsxs("span",{className:"font-medium",children:["",Number(r.late_fee).toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-300",children:[a.jsx("span",{className:"font-semibold text-gray-900",children:"Total Amount"}),a.jsxs("span",{className:"font-bold text-emerald-600",children:["",Number(r.total_amount).toFixed(2)]})]})]})]}),r.notes&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),a.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:r.notes})]})]},r.id))})}function z({label:e,value:t,displayValue:r,isEditing:n,type:s="text",icon:i,options:o,max:l,onChange:c}){return n?s==="select"?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),a.jsxs("select",{value:t||"",onChange:u=>c(u.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[a.jsxs("option",{value:"",children:["Select ",e]}),o==null?void 0:o.map(u=>a.jsx("option",{value:u,children:u.charAt(0).toUpperCase()+u.slice(1)},u))]})]}):a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),a.jsxs("div",{className:"flex items-center",children:[i&&a.jsx(i,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsx("input",{type:s,value:t||"",max:l,onChange:u=>c(u.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:`Enter ${e.toLowerCase()}`})]})]}):a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:e}),a.jsxs("div",{className:"flex items-center",children:[i&&a.jsx(i,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsx("p",{className:`text-gray-900 ${!t||t==="N/A"?"text-gray-400":""}`,children:r||t||"N/A"})]})]})}function pt({label:e,value:t,icon:r,highlight:n}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:e}),a.jsxs("div",{className:"flex items-center",children:[r&&a.jsx(r,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsx("p",{className:`text-gray-900 ${n?"font-semibold text-emerald-600":""} ${!t||t==="N/A"?"text-gray-400":""}`,children:t||"N/A"})]})]})}function Bn({label:e,checked:t}){return a.jsxs("div",{className:"flex items-center justify-between py-2",children:[a.jsx("span",{className:"text-sm text-gray-700",children:e}),t?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(Ao,{className:"h-3 w-3 mr-1"}),"Signed"]}):a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-500",children:"Not Signed"})]})}function nd({value:e,onChange:t,label:r,required:n=!1,className:s="",placeholder:i="DD/MM/YYYY",minDate:o,maxDate:l,errorMessage:c}){const[u,h]=j.useState(""),[f,m]=j.useState(!1),[y,v]=j.useState(""),w=j.useRef(null),x=j.useRef(null);console.log(f),j.useEffect(()=>{if(e){const[S,A,R]=e.split("-");h(`${R}/${A}/${S}`)}else h("")},[e]);const d=S=>{if(!S)return!0;const A=new Date(S);if(o){const R=new Date(o);if(A<R)return v(c||`Date must be after ${p(o)}`),!1}if(l){const R=new Date(l);if(A>R)return v(c||`Date must be before ${p(l)}`),!1}return v(""),!0},p=S=>{const[A,R,Y]=S.split("-");return`${Y}/${R}/${A}`},g=S=>{const A=S.replace(/\D/g,"");if(A.length===8){const R=A.substring(0,2),Y=A.substring(2,4),ge=A.substring(4,8),je=parseInt(R),Ft=parseInt(Y),Wt=parseInt(ge);if(je>=1&&je<=31&&Ft>=1&&Ft<=12&&Wt>=1900&&Wt<=2100)return`${ge}-${Y}-${R}`}return""},b=S=>{let A=S.target.value;A=A.replace(/[^\d/]/g,""),(A.length===2&&!A.includes("/")||A.length===5&&A.split("/").length===2)&&(A=A+"/"),A.length>10&&(A=A.substring(0,10)),h(A);const R=g(A);R?(d(R),t(R)):A===""&&(v(""),t(""))},N=()=>{w.current&&w.current.select()},k=S=>{const A=S.target.value;d(A),t(A),m(!1)},T=()=>{m(!0),setTimeout(()=>{var S,A;(A=(S=x.current)==null?void 0:S.showPicker)==null||A.call(S)},0)};return a.jsxs("div",{className:s,children:[r&&a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r,n&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{ref:w,type:"text",value:u,onChange:b,onFocus:N,placeholder:i,required:n,className:`w-full px-4 py-2 pr-10 border rounded-lg focus:ring-2 focus:ring-emerald-500 transition-colors ${y?"border-red-300 focus:border-red-500 bg-red-50":"border-gray-300 focus:border-emerald-500"}`}),a.jsx("button",{type:"button",onClick:T,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:a.jsx(Zu,{className:"h-5 w-5"})}),a.jsx("input",{ref:x,type:"date",value:e,onChange:k,min:o,max:l,className:"absolute opacity-0 pointer-events-none",style:{width:0,height:0}})]}),y&&a.jsxs("div",{className:"mt-2 flex items-start text-sm text-red-600",children:[a.jsx(Ki,{className:"h-4 w-4 mr-1 mt-0.5 flex-shrink-0"}),a.jsx("span",{children:y})]})]})}const lf=[cr,co,cr,Ro,ed,td,Hi,Lo,Ao,Ts];function Gb(){var sd;const e=$s(),r=(sd=On().state)==null?void 0:sd.savedApplication,[n,s]=j.useState((r==null?void 0:r.current_step)||0),[i,o]=j.useState((r==null?void 0:r.current_step)||0),[l,c]=j.useState({}),[u,h]=j.useState({}),[f,m]=j.useState(!1),[y,v]=j.useState(""),[w,x]=j.useState((r==null?void 0:r.application_reference)||null),[d,p]=j.useState((r==null?void 0:r.form_data)||{app_type:"single",title:"",first_name:"",last_name:"",dob:"",address_line_1:"",town:"",city:"",postcode:"",mobile:"",home_phone:"",work_phone:"",email:"",joint_title:"",joint_first_name:"",joint_last_name:"",joint_dob:"",joint_address_line_1:"",joint_town:"",joint_city:"",joint_postcode:"",joint_mobile:"",joint_home_phone:"",joint_work_phone:"",joint_email:"",children:[],nok_title:"",nok_first_name:"",nok_last_name:"",nok_relationship:"",nok_address_line_1:"",nok_town:"",nok_city:"",nok_postcode:"",nok_mobile:"",nok_phone:"",nok_email:"",gp_name_surgery:"",gp_address_line_1:"",gp_town:"",gp_city:"",gp_postcode:"",gp_phone:"",gp_email:"",main_disclaimer:"",main_conditions:"",joint_disclaimer:"",joint_conditions:"",documents_acknowledged:!1,agreement_sig_1:!1,agreement_sig_2:!1,funding_sig_1:!1,funding_sig_2:!1,declaration_sig_1:!1,declaration_sig_2:!1,main_joining_fee:0,main_membership_fee:100,joint_joining_fee:0,joint_membership_fee:100,total_amount:0,payment_method:""}),{data:g}=qt({queryKey:["fee-structure"],queryFn:async()=>{const{data:C}=await q.from("fee_structure").select("*").order("age_min",{ascending:!0});return C||[]}}),b=C=>{if(!C)return 0;const V=new Date(C),F=new Date;let fe=F.getFullYear()-V.getFullYear();const Ne=F.getMonth()-V.getMonth();return(Ne<0||Ne===0&&F.getDate()<V.getDate())&&fe--,fe},N=C=>{const V=b(C);if(!g||V===0)return{joining:0,membership:100};const F=g.find(fe=>V>=fe.age_min&&V<=fe.age_max);return{joining:F?F.joining_fee:0,membership:F?F.membership_fee:100}};j.useEffect(()=>{if(d.dob){const C=N(d.dob);p(V=>({...V,main_joining_fee:C.joining,main_membership_fee:C.membership}))}},[d.dob,g]),j.useEffect(()=>{if(d.app_type==="joint"&&d.joint_dob){const C=N(d.joint_dob);p(V=>({...V,joint_joining_fee:C.joining,joint_membership_fee:C.membership}))}},[d.joint_dob,d.app_type,g]),j.useEffect(()=>{const C=d.main_joining_fee+d.main_membership_fee+(d.app_type==="joint"?d.joint_joining_fee+d.joint_membership_fee:0);p(V=>({...V,total_amount:C}))},[d.main_joining_fee,d.main_membership_fee,d.joint_joining_fee,d.joint_membership_fee,d.app_type]),j.useEffect(()=>{d.app_type==="single"&&n===2&&s(3),d.app_type==="single"&&i===2&&o(3)},[d.app_type,n,i]);const k=so({mutationFn:async()=>{const{data:C,error:V}=await q.from("members").insert({app_type:d.app_type,title:d.title,first_name:d.first_name,last_name:d.last_name,dob:d.dob,address_line_1:d.address_line_1,town:d.town,city:d.city,postcode:d.postcode,mobile:d.mobile,home_phone:d.home_phone,work_phone:d.work_phone,email:d.email,status:"pending"}).select().single();if(V)throw V;const F=C.id;return d.app_type==="joint"&&await q.from("joint_members").insert({member_id:F,title:d.joint_title,first_name:d.joint_first_name,last_name:d.joint_last_name,dob:d.joint_dob,address_line_1:d.joint_address_line_1,town:d.joint_town,city:d.joint_city,postcode:d.joint_postcode,mobile:d.joint_mobile,home_phone:d.joint_home_phone,work_phone:d.joint_work_phone,email:d.joint_email}),d.children.length>0&&await q.from("children").insert(d.children.map(fe=>({member_id:F,...fe}))),await q.from("next_of_kin").insert({member_id:F,title:d.nok_title,first_name:d.nok_first_name,last_name:d.nok_last_name,relationship:d.nok_relationship,address_line_1:d.nok_address_line_1,town:d.nok_town,city:d.nok_city,postcode:d.nok_postcode,mobile:d.nok_mobile,phone:d.nok_phone,email:d.nok_email}),await q.from("gp_details").insert({member_id:F,gp_name_surgery:d.gp_name_surgery,address_line_1:d.gp_address_line_1,town:d.gp_town,city:d.gp_city,postcode:d.gp_postcode,phone:d.gp_phone,email:d.gp_email}),await q.from("medical_info").insert({member_id:F,member_type:"main",disclaimer:d.main_disclaimer,conditions:d.main_conditions}),d.app_type==="joint"&&await q.from("medical_info").insert({member_id:F,member_type:"joint",disclaimer:d.joint_disclaimer,conditions:d.joint_conditions}),await q.from("declarations").insert({member_id:F,agreement_sig_1:d.agreement_sig_1,agreement_sig_2:d.agreement_sig_2,funding_sig_1:d.funding_sig_1,funding_sig_2:d.funding_sig_2,declaration_sig_1:d.declaration_sig_1,declaration_sig_2:d.declaration_sig_2}),await q.from("payments").insert({member_id:F,payment_type:"registration",payment_method:d.payment_method,main_joining_fee:d.main_joining_fee,main_membership_fee:d.main_membership_fee,main_misc:0,joint_joining_fee:d.joint_joining_fee,joint_membership_fee:d.joint_membership_fee,joint_misc:0,late_fee:0,total_amount:d.total_amount,payment_status:"pending",join_date:new Date().toISOString()}),F},onSuccess:C=>{e(`/members/${C}`)}}),T=so({mutationFn:async()=>{if(m(!0),w){const{error:C}=await q.from("applications_in_progress").update({form_data:d,current_step:n,app_type:d.app_type,main_first_name:d.first_name,main_last_name:d.last_name,main_email:d.email,main_mobile:d.mobile,joint_first_name:d.joint_first_name,joint_last_name:d.joint_last_name}).eq("application_reference",w);if(C)throw C;return w}else{const{data:C,error:V}=await q.from("applications_in_progress").insert({form_data:d,current_step:n,app_type:d.app_type,main_first_name:d.first_name,main_last_name:d.last_name,main_email:d.email,main_mobile:d.mobile,joint_first_name:d.joint_first_name,joint_last_name:d.joint_last_name,status:"in_progress"}).select("application_reference").single();if(V)throw V;return C.application_reference}},onSuccess:C=>{x(C),v(` Progress saved! Reference: ${C}`),m(!1),setTimeout(()=>v(""),3e3)},onError:C=>{console.error("Save error:",C),v(" Failed to save progress"),m(!1),setTimeout(()=>v(""),3e3)}}),S=()=>{T.mutate()},A=["Membership Type","Main Member","Joint Member","Children","Next of Kin","GP Details","Medical Info","Documents","Declarations","Payment"],R=()=>{const C={};return d.title||(C.title="Title is required"),d.first_name||(C.first_name="First name is required"),d.last_name||(C.last_name="Last name is required"),d.dob||(C.dob="Date of birth is required"),d.address_line_1||(C.address_line_1="Address is required"),d.town||(C.town="Town is required"),d.city||(C.city="City is required"),d.postcode||(C.postcode="Postcode is required"),d.mobile||(C.mobile="Mobile phone is required"),d.email||(C.email="Email is required"),c(C),Object.keys(C).length===0},Y=()=>{const C={};return d.joint_first_name||(C.joint_first_name="First name is required"),d.joint_last_name||(C.joint_last_name="Last name is required"),d.joint_dob||(C.joint_dob="Date of birth is required"),c(C),Object.keys(C).length===0},ge=C=>{if(!C)return!0;const V=b(C),F=new Date;return new Date(C)>F?!1:V<18},je=()=>{if(d.children.length===0)return!0;const C={};let V=!1;return d.children.forEach((F,fe)=>{const Ne={};F.first_name||(Ne.first_name="First name is required"),F.last_name||(Ne.last_name="Last name is required"),F.dob?ge(F.dob)||(Ne.dob="Child must be under 18 years old and DOB cannot be in the future"):Ne.dob="Date of birth is required",F.relation||(Ne.relation="Relation is required"),Object.keys(Ne).length>0&&(C[fe]=Ne,V=!0)}),h(C),!V},Ft=()=>{const C={};return d.nok_first_name||(C.nok_first_name="First name is required"),d.nok_last_name||(C.nok_last_name="Last name is required"),d.nok_relationship||(C.nok_relationship="Relationship is required"),d.nok_mobile||(C.nok_mobile="Mobile phone is required"),c(C),Object.keys(C).length===0},Wt=()=>{const C={};return d.agreement_sig_1||(C.agreement_sig_1="Main member agreement is required"),d.funding_sig_1||(C.funding_sig_1="Main member funding acknowledgment is required"),d.declaration_sig_1||(C.declaration_sig_1="Main member declaration is required"),d.app_type==="joint"&&(d.agreement_sig_2||(C.agreement_sig_2="Joint member agreement is required"),d.funding_sig_2||(C.funding_sig_2="Joint member funding acknowledgment is required"),d.declaration_sig_2||(C.declaration_sig_2="Joint member declaration is required")),c(C),Object.keys(C).length===0},hr=()=>{const C={};return d.payment_method||(C.payment_method="Payment method is required"),c(C),Object.keys(C).length===0},fr=()=>n===1?R():n===2?Y():n===3?je():n===4?Ft():n===8?Wt():n===9?hr():!0,$=()=>{if(!fr())return;c({}),h({});let C;n===1&&d.app_type==="single"?C=3:C=Math.min(n+1,A.length-1),s(C),o(V=>Math.max(V,C))},E=()=>{c({}),h({}),n===3&&d.app_type==="single"?s(1):s(C=>Math.max(C-1,0))},O=(C,V)=>{p(F=>({...F,[C]:V}))},K=()=>{p(C=>({...C,children:[...C.children,{first_name:"",last_name:"",dob:"",relation:""}]}))},H=C=>{p(V=>({...V,children:V.children.filter((F,fe)=>fe!==C)})),h(V=>{const F={...V};delete F[C];const fe={};return Object.keys(F).forEach(Ne=>{const ct=parseInt(Ne);ct>C?fe[ct-1]=F[ct]:fe[ct]=F[ct]}),fe})},Ce=(C,V,F)=>{p(fe=>({...fe,children:fe.children.map((Ne,ct)=>ct===C?{...Ne,[V]:F}:Ne)}))},We=d.app_type==="single"?A.filter((C,V)=>V!==2):A,Kt=d.app_type==="single"?lf.filter((C,V)=>V!==2):lf,lt=d.app_type==="single"?[0,1,3,4,5,6,7,8,9]:[0,1,2,3,4,5,6,7,8,9],mr=lt.indexOf(n);return a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"New Member Registration"}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Complete all steps to register a new funeral service member"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-8",children:a.jsx("div",{className:"flex items-center justify-center gap-2",children:We.map((C,V)=>{const F=lt[V],fe=Kt[V],Ne=F===n,ct=F<n,Mo=F<=i,id=Mo,Sg=()=>{id&&(c({}),h({}),s(F))};return a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("button",{type:"button",onClick:Sg,disabled:!id,className:`relative flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all duration-300 ${Ne?"border-emerald-600 bg-emerald-600 text-white shadow-lg shadow-emerald-300 ring-2 ring-emerald-300 ring-offset-2":ct?"border-emerald-600 bg-emerald-600 text-white hover:bg-emerald-700 hover:border-emerald-700 hover:shadow-md cursor-pointer":Mo?"border-emerald-400 bg-white text-emerald-600 hover:bg-emerald-50 cursor-pointer":"border-gray-300 bg-white text-gray-400 cursor-not-allowed"}`,children:ct?a.jsx(_n,{className:"h-5 w-5"}):a.jsx(fe,{className:"h-5 w-5"})}),a.jsx("span",{className:`mt-2 text-xs font-medium text-center max-w-[80px] leading-tight transition-colors duration-300 ${Ne?"text-emerald-600 font-semibold":ct?"text-emerald-700":Mo?"text-emerald-600":"text-gray-500"}`,children:C})]}),V<We.length-1&&a.jsx("div",{className:`h-1 w-12 mx-3 rounded-full transition-all duration-500 ${ct?"bg-emerald-600":"bg-gray-300"}`})]},C)})})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-8",children:[n===0&&a.jsx(Jb,{formData:d,updateFormData:O}),n===1&&a.jsx(Yb,{formData:d,updateFormData:O,validationErrors:l}),n===2&&a.jsx(Xb,{formData:d,updateFormData:O,validationErrors:l}),n===3&&a.jsx(Zb,{formData:d,addChild:K,removeChild:H,updateChild:Ce,childValidationErrors:u}),n===4&&a.jsx(ej,{formData:d,updateFormData:O,validationErrors:l}),n===5&&a.jsx(tj,{formData:d,updateFormData:O}),n===6&&a.jsx(rj,{formData:d,updateFormData:O}),n===7&&a.jsx(nj,{formData:d,updateFormData:O}),n===8&&a.jsx(sj,{formData:d,updateFormData:O,validationErrors:l}),n===9&&a.jsx(ij,{formData:d,updateFormData:O,validationErrors:l})]}),a.jsxs("div",{className:"flex justify-between items-center bg-white rounded-xl shadow-md border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:E,disabled:n===0,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(xg,{className:"h-4 w-4 mr-2"})," Back"]}),a.jsx("button",{onClick:S,disabled:f||!d.first_name||!d.last_name,className:"inline-flex items-center px-4 py-2 border-2 border-emerald-600 text-emerald-600 rounded-lg text-sm font-medium hover:bg-emerald-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?a.jsxs(a.Fragment,{children:[a.jsx(af,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Save Progress"]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsxs("span",{className:"text-sm text-gray-600",children:["Step ",mr+1," of ",We.length]}),y&&a.jsx("span",{className:`text-xs mt-1 ${y.includes("")?"text-green-600":"text-red-600"}`,children:y}),w&&a.jsxs("span",{className:"text-xs text-gray-500 mt-1",children:["Ref: ",w]})]}),n<A.length-1?a.jsxs("button",{onClick:$,className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-emerald-600 to-emerald-700 text-white rounded-lg hover:from-emerald-700 hover:to-emerald-800 transition-all shadow-md",children:["Next ",a.jsx(wg,{className:"h-4 w-4 ml-2"})]}):a.jsx("button",{onClick:()=>k.mutate(),disabled:k.isPending,className:"inline-flex items-center px-6 py-2 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg hover:from-green-700 hover:to-green-800 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:k.isPending?a.jsxs(a.Fragment,{children:[a.jsx(af,{className:"h-4 w-4 mr-2 animate-spin"})," Submitting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(_n,{className:"h-4 w-4 mr-2"})," Submit Registration"]})})]})]})}function Jb({formData:e,updateFormData:t}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Membership Type"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Choose between single or joint membership"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("button",{type:"button",onClick:()=>t("app_type","single"),className:`relative p-6 rounded-xl border-2 transition-all ${e.app_type==="single"?"border-emerald-600 bg-emerald-50":"border-gray-200 hover:border-emerald-300"}`,children:[a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx(co,{className:"h-12 w-12 mb-3 text-emerald-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Single Membership"}),a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"For individual membership"})]}),e.app_type==="single"&&a.jsx("div",{className:"absolute top-3 right-3",children:a.jsx("div",{className:"h-6 w-6 rounded-full bg-emerald-600 flex items-center justify-center",children:a.jsx(_n,{className:"h-4 w-4 text-white"})})})]}),a.jsxs("button",{type:"button",onClick:()=>t("app_type","joint"),className:`relative p-6 rounded-xl border-2 transition-all ${e.app_type==="joint"?"border-emerald-600 bg-emerald-50":"border-gray-200 hover:border-emerald-300"}`,children:[a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx(cr,{className:"h-12 w-12 mb-3 text-emerald-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Joint Membership"}),a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"For couples/spouses"})]}),e.app_type==="joint"&&a.jsx("div",{className:"absolute top-3 right-3",children:a.jsx("div",{className:"h-6 w-6 rounded-full bg-emerald-600 flex items-center justify-center",children:a.jsx(_n,{className:"h-4 w-4 text-white"})})})]})]})]})}function Yb({formData:e,updateFormData:t,validationErrors:r}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Main Member Details"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Enter the primary member's personal information"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Title ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:e.title,onChange:n=>t("title",n.target.value),required:!0,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${r.title?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select title"}),a.jsx("option",{value:"Mr",children:"Mr"}),a.jsx("option",{value:"Mrs",children:"Mrs"}),a.jsx("option",{value:"Miss",children:"Miss"}),a.jsx("option",{value:"Ms",children:"Ms"}),a.jsx("option",{value:"Dr",children:"Dr"}),a.jsx("option",{value:"Prof",children:"Prof"})]}),r.title&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.title})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:e.first_name,onChange:n=>t("first_name",n.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${r.first_name?"border-red-500":"border-gray-300"}`,placeholder:"Enter first name"}),r.first_name&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.first_name})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:e.last_name,onChange:n=>t("last_name",n.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${r.last_name?"border-red-500":"border-gray-300"}`,placeholder:"Enter last name"}),r.last_name&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.last_name})]}),a.jsxs("div",{children:[a.jsx(nd,{label:"Date of Birth",required:!0,value:e.dob,onChange:n=>t("dob",n)}),r.dob&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.dob})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Address Line 1 ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:e.address_line_1,onChange:n=>t("address_line_1",n.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${r.address_line_1?"border-red-500":"border-gray-300"}`,placeholder:"Enter street address"}),r.address_line_1&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.address_line_1})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Town ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:e.town,onChange:n=>t("town",n.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${r.town?"border-red-500":"border-gray-300"}`,placeholder:"Enter town"}),r.town&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.town})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["City ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:e.city,onChange:n=>t("city",n.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${r.city?"border-red-500":"border-gray-300"}`,placeholder:"Enter city"}),r.city&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.city})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Postcode ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:e.postcode,onChange:n=>t("postcode",n.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${r.postcode?"border-red-500":"border-gray-300"}`,placeholder:"Enter postcode"}),r.postcode&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.postcode})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Mobile Phone ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"tel",required:!0,value:e.mobile,onChange:n=>t("mobile",n.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${r.mobile?"border-red-500":"border-gray-300"}`,placeholder:"Enter mobile number"}),r.mobile&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.mobile})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Home Phone"}),a.jsx("input",{type:"tel",value:e.home_phone,onChange:n=>t("home_phone",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter home phone"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Work Phone"}),a.jsx("input",{type:"tel",value:e.work_phone,onChange:n=>t("work_phone",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter work phone"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",required:!0,value:e.email,onChange:n=>t("email",n.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${r.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email address"}),r.email&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.email})]})]})]})}function Xb({formData:e,updateFormData:t,validationErrors:r}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Joint Member Details"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Enter the spouse/partner's information"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),a.jsxs("select",{value:e.joint_title,onChange:n=>t("joint_title",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[a.jsx("option",{value:"",children:"Select title"}),a.jsx("option",{value:"Mr",children:"Mr"}),a.jsx("option",{value:"Mrs",children:"Mrs"}),a.jsx("option",{value:"Miss",children:"Miss"}),a.jsx("option",{value:"Ms",children:"Ms"}),a.jsx("option",{value:"Dr",children:"Dr"}),a.jsx("option",{value:"Prof",children:"Prof"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:e.joint_first_name,onChange:n=>t("joint_first_name",n.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${r.joint_first_name?"border-red-500":"border-gray-300"}`,placeholder:"Enter first name"}),r.joint_first_name&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.joint_first_name})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:e.joint_last_name,onChange:n=>t("joint_last_name",n.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${r.joint_last_name?"border-red-500":"border-gray-300"}`,placeholder:"Enter last name"}),r.joint_last_name&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.joint_last_name})]}),a.jsxs("div",{children:[a.jsx(nd,{label:"Date of Birth",required:!0,value:e.joint_dob,onChange:n=>t("joint_dob",n)}),r.joint_dob&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.joint_dob})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Line 1"}),a.jsx("input",{type:"text",value:e.joint_address_line_1,onChange:n=>t("joint_address_line_1",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter street address"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Town"}),a.jsx("input",{type:"text",value:e.joint_town,onChange:n=>t("joint_town",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter town"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),a.jsx("input",{type:"text",value:e.joint_city,onChange:n=>t("joint_city",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter city"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Postcode"}),a.jsx("input",{type:"text",value:e.joint_postcode,onChange:n=>t("joint_postcode",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter postcode"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile Phone"}),a.jsx("input",{type:"tel",value:e.joint_mobile,onChange:n=>t("joint_mobile",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter mobile number"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Home Phone"}),a.jsx("input",{type:"tel",value:e.joint_home_phone,onChange:n=>t("joint_home_phone",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter home phone"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Work Phone"}),a.jsx("input",{type:"tel",value:e.joint_work_phone,onChange:n=>t("joint_work_phone",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter work phone"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:e.joint_email,onChange:n=>t("joint_email",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter email address"})]})]})]})}function Zb({formData:e,addChild:t,removeChild:r,updateChild:n,childValidationErrors:s}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Children"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Add children covered under this membership (optional)"})]}),a.jsxs("button",{type:"button",onClick:t,className:"inline-flex items-center px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:[a.jsx($o,{className:"h-4 w-4 mr-2"})," Add Child"]})]}),e.children.length===0?a.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[a.jsx(Ro,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No children added yet"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:'Click "Add Child" to include children in this membership'})]}):a.jsx("div",{className:"space-y-4",children:e.children.map((i,o)=>{const l=s[o]||{};return a.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50 relative",children:[a.jsx("button",{type:"button",onClick:()=>r(o),className:"absolute top-3 right-3 p-1 text-red-600 hover:bg-red-50 rounded",children:a.jsx(rd,{className:"h-5 w-5"})}),a.jsxs("h3",{className:"font-medium text-gray-900 mb-3",children:["Child ",o+1]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:i.first_name,onChange:c=>n(o,"first_name",c.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${l.first_name?"border-red-500":"border-gray-300"}`,placeholder:"Enter first name"}),l.first_name&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.first_name})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:i.last_name,onChange:c=>n(o,"last_name",c.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${l.last_name?"border-red-500":"border-gray-300"}`,placeholder:"Enter last name"}),l.last_name&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.last_name})]}),a.jsxs("div",{children:[a.jsx(nd,{label:"Date of Birth",required:!0,value:i.dob,onChange:c=>n(o,"dob",c),minDate:(()=>{const c=new Date;return c.setFullYear(c.getFullYear()-18),c.setDate(c.getDate()+1),c.toISOString().split("T")[0]})(),maxDate:new Date().toISOString().split("T")[0],errorMessage:"Child must be under 18 years old and DOB cannot be in the future"}),l.dob&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.dob})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Relation ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{required:!0,value:i.relation,onChange:c=>n(o,"relation",c.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${l.relation?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select relation"}),a.jsx("option",{value:"son",children:"Son"}),a.jsx("option",{value:"daughter",children:"Daughter"}),a.jsx("option",{value:"stepson",children:"Stepson"}),a.jsx("option",{value:"stepdaughter",children:"Stepdaughter"})]}),l.relation&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.relation})]})]})]},o)})})]})}function ej({formData:e,updateFormData:t,validationErrors:r}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Next of Kin"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Emergency contact information"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),a.jsxs("select",{value:e.nok_title,onChange:n=>t("nok_title",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[a.jsx("option",{value:"",children:"Select title"}),a.jsx("option",{value:"Mr",children:"Mr"}),a.jsx("option",{value:"Mrs",children:"Mrs"}),a.jsx("option",{value:"Miss",children:"Miss"}),a.jsx("option",{value:"Ms",children:"Ms"}),a.jsx("option",{value:"Dr",children:"Dr"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:e.nok_first_name,onChange:n=>t("nok_first_name",n.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${r.nok_first_name?"border-red-500":"border-gray-300"}`,placeholder:"Enter first name"}),r.nok_first_name&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.nok_first_name})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:e.nok_last_name,onChange:n=>t("nok_last_name",n.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${r.nok_last_name?"border-red-500":"border-gray-300"}`,placeholder:"Enter last name"}),r.nok_last_name&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.nok_last_name})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Relationship ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:e.nok_relationship,onChange:n=>t("nok_relationship",n.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${r.nok_relationship?"border-red-500":"border-gray-300"}`,placeholder:"e.g., Son, Daughter, Brother"}),r.nok_relationship&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.nok_relationship})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Line 1"}),a.jsx("input",{type:"text",value:e.nok_address_line_1,onChange:n=>t("nok_address_line_1",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter street address"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Town"}),a.jsx("input",{type:"text",value:e.nok_town,onChange:n=>t("nok_town",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter town"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),a.jsx("input",{type:"text",value:e.nok_city,onChange:n=>t("nok_city",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter city"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Postcode"}),a.jsx("input",{type:"text",value:e.nok_postcode,onChange:n=>t("nok_postcode",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter postcode"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Mobile Phone ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"tel",required:!0,value:e.nok_mobile,onChange:n=>t("nok_mobile",n.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${r.nok_mobile?"border-red-500":"border-gray-300"}`,placeholder:"Enter mobile number"}),r.nok_mobile&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.nok_mobile})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Home Phone"}),a.jsx("input",{type:"tel",value:e.nok_phone,onChange:n=>t("nok_phone",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-emerald-500 focus:border-emerald-500",placeholder:"Enter home phone"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:e.nok_email,onChange:n=>t("nok_email",n.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter email address"})]})]})]})}function tj({formData:e,updateFormData:t}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"GP Details"}),a.jsx("p",{className:"text-sm text-gray-600",children:"General Practitioner / Doctor information"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GP Name / Surgery"}),a.jsx("input",{type:"text",value:e.gp_name_surgery,onChange:r=>t("gp_name_surgery",r.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter GP name or surgery name"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Line 1"}),a.jsx("input",{type:"text",value:e.gp_address_line_1,onChange:r=>t("gp_address_line_1",r.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter street address"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Town"}),a.jsx("input",{type:"text",value:e.gp_town,onChange:r=>t("gp_town",r.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter town"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),a.jsx("input",{type:"text",value:e.gp_city,onChange:r=>t("gp_city",r.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter city"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Postcode"}),a.jsx("input",{type:"text",value:e.gp_postcode,onChange:r=>t("gp_postcode",r.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter postcode"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),a.jsx("input",{type:"tel",value:e.gp_phone,onChange:r=>t("gp_phone",r.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter phone number"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:e.gp_email,onChange:r=>t("gp_email",r.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter email address"})]})]})]})}function rj({formData:e,updateFormData:t}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Medical Information"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Optional medical conditions or disclaimers"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:"Main Member"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Disclaimer"}),a.jsx("input",{type:"text",value:e.main_disclaimer,onChange:r=>t("main_disclaimer",r.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Any disclaimers"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical Conditions"}),a.jsx("textarea",{value:e.main_conditions,onChange:r=>t("main_conditions",r.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"List any relevant medical conditions"})]})]})]}),e.app_type==="joint"&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:e.joint_first_name&&e.joint_last_name?`${e.joint_first_name} ${e.joint_last_name}`:"Joint Member"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Disclaimer"}),a.jsx("input",{type:"text",value:e.joint_disclaimer,onChange:r=>t("joint_disclaimer",r.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Any disclaimers"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical Conditions"}),a.jsx("textarea",{value:e.joint_conditions,onChange:r=>t("joint_conditions",r.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"List any relevant medical conditions"})]})]})]})]})]})}function nj({formData:e,updateFormData:t}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Documents"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Document upload feature (coming soon)"})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[a.jsx(Lo,{className:"h-12 w-12 mx-auto text-blue-600 mb-4"}),a.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Document Upload Placeholder"}),a.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Document upload functionality will be added in the next phase. Required documents include:"}),a.jsxs("ul",{className:"text-sm text-blue-700 text-left max-w-md mx-auto space-y-1",children:[a.jsx("li",{children:" Photo ID (main member)"}),a.jsx("li",{children:" Proof of Address (main member)"}),e.app_type==="joint"&&a.jsxs(a.Fragment,{children:[a.jsx("li",{children:" Photo ID (joint member)"}),a.jsx("li",{children:" Proof of Address (joint member)"})]}),a.jsx("li",{children:" Birth certificates (children, if applicable)"})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("label",{className:"flex items-center justify-center",children:[a.jsx("input",{type:"checkbox",checked:e.documents_acknowledged,onChange:r=>t("documents_acknowledged",r.target.checked),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"I acknowledge documents will be provided"})]})})]})]})}function sj({formData:e,updateFormData:t,validationErrors:r}){const n=e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:"Main member",s=e.joint_first_name&&e.joint_last_name?`${e.joint_first_name} ${e.joint_last_name}`:"Joint member";return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Declarations"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Please confirm the following declarations"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-3",children:["Agreement Signatures ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-start",children:[a.jsx("input",{type:"checkbox",checked:e.agreement_sig_1,onChange:i=>t("agreement_sig_1",i.target.checked),className:"h-4 w-4 mt-1 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),a.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:[a.jsx("strong",{children:n})," agrees to the terms and conditions of the funeral service"]})]}),r.agreement_sig_1&&a.jsx("p",{className:"text-red-500 text-xs mt-1 ml-6",children:r.agreement_sig_1}),e.app_type==="joint"&&a.jsxs(a.Fragment,{children:[a.jsxs("label",{className:"flex items-start",children:[a.jsx("input",{type:"checkbox",checked:e.agreement_sig_2,onChange:i=>t("agreement_sig_2",i.target.checked),className:"h-4 w-4 mt-1 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),a.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:[a.jsx("strong",{children:s})," agrees to the terms and conditions of the funeral service"]})]}),r.agreement_sig_2&&a.jsx("p",{className:"text-red-500 text-xs mt-1 ml-6",children:r.agreement_sig_2})]})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-3",children:["Funding Signatures ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-start",children:[a.jsx("input",{type:"checkbox",checked:e.funding_sig_1,onChange:i=>t("funding_sig_1",i.target.checked),className:"h-4 w-4 mt-1 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),a.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:[a.jsx("strong",{children:n})," acknowledges the funding requirements"]})]}),r.funding_sig_1&&a.jsx("p",{className:"text-red-500 text-xs mt-1 ml-6",children:r.funding_sig_1}),e.app_type==="joint"&&a.jsxs(a.Fragment,{children:[a.jsxs("label",{className:"flex items-start",children:[a.jsx("input",{type:"checkbox",checked:e.funding_sig_2,onChange:i=>t("funding_sig_2",i.target.checked),className:"h-4 w-4 mt-1 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),a.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:[a.jsx("strong",{children:s})," acknowledges the funding requirements"]})]}),r.funding_sig_2&&a.jsx("p",{className:"text-red-500 text-xs mt-1 ml-6",children:r.funding_sig_2})]})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-3",children:["Declaration Signatures ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-start",children:[a.jsx("input",{type:"checkbox",checked:e.declaration_sig_1,onChange:i=>t("declaration_sig_1",i.target.checked),className:"h-4 w-4 mt-1 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),a.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:[a.jsx("strong",{children:n})," declares all information provided is accurate"]})]}),r.declaration_sig_1&&a.jsx("p",{className:"text-red-500 text-xs mt-1 ml-6",children:r.declaration_sig_1}),e.app_type==="joint"&&a.jsxs(a.Fragment,{children:[a.jsxs("label",{className:"flex items-start",children:[a.jsx("input",{type:"checkbox",checked:e.declaration_sig_2,onChange:i=>t("declaration_sig_2",i.target.checked),className:"h-4 w-4 mt-1 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),a.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:[a.jsx("strong",{children:s})," declares all information provided is accurate"]})]}),r.declaration_sig_2&&a.jsx("p",{className:"text-red-500 text-xs mt-1 ml-6",children:r.declaration_sig_2})]})]})]})]})]})}function ij({formData:e,updateFormData:t,validationErrors:r}){const n=e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:"Main Member",s=e.joint_first_name&&e.joint_last_name?`${e.joint_first_name} ${e.joint_last_name}`:"Joint Member";return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Summary"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Review fees and select payment method"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-yellow-50 border-2 border-emerald-200 rounded-xl p-6",children:[a.jsx("h3",{className:"font-semibold text-emerald-900 mb-4",children:"Fee Breakdown"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-emerald-200",children:[a.jsxs("span",{className:"text-gray-700",children:[n," - Joining Fee"]}),a.jsxs("span",{className:"font-semibold text-gray-900",children:["",e.main_joining_fee.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-emerald-200",children:[a.jsxs("span",{className:"text-gray-700",children:[n," - Membership Fee"]}),a.jsxs("span",{className:"font-semibold text-gray-900",children:["",e.main_membership_fee.toFixed(2)]})]}),e.app_type==="joint"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-emerald-200",children:[a.jsxs("span",{className:"text-gray-700",children:[s," - Joining Fee"]}),a.jsxs("span",{className:"font-semibold text-gray-900",children:["",e.joint_joining_fee.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-emerald-200",children:[a.jsxs("span",{className:"text-gray-700",children:[s," - Membership Fee"]}),a.jsxs("span",{className:"font-semibold text-gray-900",children:["",e.joint_membership_fee.toFixed(2)]})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-3 border-t-2 border-emerald-400",children:[a.jsx("span",{className:"text-lg font-bold text-emerald-900",children:"Total Amount"}),a.jsxs("span",{className:"text-2xl font-bold text-emerald-900",children:["",e.total_amount.toFixed(2)]})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Payment Method ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("button",{type:"button",onClick:()=>t("payment_method","cash"),className:`p-4 rounded-lg border-2 transition-all ${e.payment_method==="cash"?"border-emerald-600 bg-emerald-50":"border-gray-200 hover:border-emerald-300"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-semibold text-gray-900",children:"Cash"}),e.payment_method==="cash"&&a.jsx(_n,{className:"h-5 w-5 mx-auto mt-2 text-emerald-600"})]})}),a.jsx("button",{type:"button",onClick:()=>t("payment_method","cheque"),className:`p-4 rounded-lg border-2 transition-all ${e.payment_method==="cheque"?"border-emerald-600 bg-emerald-50":"border-gray-200 hover:border-emerald-300"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-semibold text-gray-900",children:"Cheque"}),e.payment_method==="cheque"&&a.jsx(_n,{className:"h-5 w-5 mx-auto mt-2 text-emerald-600"})]})}),a.jsx("button",{type:"button",onClick:()=>t("payment_method","bank_transfer"),className:`p-4 rounded-lg border-2 transition-all ${e.payment_method==="bank_transfer"?"border-emerald-600 bg-emerald-50":"border-gray-200 hover:border-emerald-300"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-semibold text-gray-900",children:"Bank Transfer"}),e.payment_method==="bank_transfer"&&a.jsx(_n,{className:"h-5 w-5 mx-auto mt-2 text-emerald-600"})]})})]}),r.payment_method&&a.jsx("p",{className:"text-red-500 text-xs mt-2",children:r.payment_method})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("strong",{children:"Note:"})," PayPal integration coming soon. For now, payment will be marked as pending and can be processed manually."]})})]})}function aj(){const[e,t]=j.useState(!1),[r,n]=j.useState(""),[s,i]=j.useState("all"),[o,l]=j.useState("all"),{data:c,isLoading:u}=qt({queryKey:["payments"],queryFn:async()=>{const{data:y}=await q.from("payments").select(`
          *,
          members (
            id,
            first_name,
            last_name,
            email,
            mobile,
            status
          )
        `).order("created_at",{ascending:!1});return y||[]}}),h={totalRevenue:(c==null?void 0:c.filter(y=>y.payment_status==="completed").reduce((y,v)=>y+Number(v.total_amount),0))||0,pendingPayments:(c==null?void 0:c.filter(y=>y.payment_status==="pending").length)||0,completedToday:(c==null?void 0:c.filter(y=>{if(y.payment_status!=="completed")return!1;const v=new Date(y.payment_date||y.created_at),w=new Date;return v.toDateString()===w.toDateString()}).length)||0,overdueRenewals:(c==null?void 0:c.filter(y=>y.renewal_date?new Date(y.renewal_date)<new Date&&y.payment_status!=="completed":!1).length)||0},f=c==null?void 0:c.filter(y=>{var p,g;const v=y.members,w=r===""||`${v==null?void 0:v.first_name} ${v==null?void 0:v.last_name}`.toLowerCase().includes(r.toLowerCase())||((p=v==null?void 0:v.email)==null?void 0:p.toLowerCase().includes(r.toLowerCase()))||((g=y.reference_no)==null?void 0:g.toLowerCase().includes(r.toLowerCase())),x=s==="all"||y.payment_status===s;let d=!0;if(o!=="all"){const b=new Date(y.payment_date||y.created_at),N=new Date;if(o==="today")d=b.toDateString()===N.toDateString();else if(o==="week"){const k=new Date(N.getTime()-6048e5);d=b>=k}else if(o==="month"){const k=new Date(N.getTime()-2592e6);d=b>=k}}return w&&x&&d}),m=y=>{const v={completed:{bg:"bg-green-100",text:"text-green-800",icon:Cb},pending:{bg:"bg-yellow-100",text:"text-yellow-800",icon:lo},failed:{bg:"bg-red-100",text:"text-red-800",icon:qc},refunded:{bg:"bg-gray-100",text:"text-gray-800",icon:qc}},w=v[y]||v.pending,x=w.icon;return a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${w.bg} ${w.text}`,children:[a.jsx(x,{className:"h-3 w-3 mr-1"}),y.charAt(0).toUpperCase()+y.slice(1)]})};return u?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Payments"}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage membership payments and renewals"})]}),a.jsxs("button",{onClick:()=>t(!0),className:"inline-flex items-center justify-center px-4 py-2 bg-gradient-to-r from-emerald-600 to-emerald-700 text-white rounded-lg hover:from-emerald-700 hover:to-emerald-800 transition-all shadow-md hover:shadow-lg",children:[a.jsx($o,{className:"h-5 w-5 mr-2"}),"Record Payment"]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsxs("div",{className:"bg-white overflow-hidden shadow-lg rounded-xl border border-gray-100",children:[a.jsx("div",{className:"p-5",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 rounded-lg p-3 bg-green-100",children:a.jsx(li,{className:"h-6 w-6 text-green-600"})}),a.jsx("div",{className:"ml-5 w-0 flex-1",children:a.jsxs("dl",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Revenue"}),a.jsx("dd",{className:"flex items-baseline",children:a.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:["",h.totalRevenue.toFixed(2)]})})]})})]})}),a.jsx("div",{className:"h-2 bg-gradient-to-r from-green-500 to-green-600"})]}),a.jsxs("div",{className:"bg-white overflow-hidden shadow-lg rounded-xl border border-gray-100",children:[a.jsx("div",{className:"p-5",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 rounded-lg p-3 bg-yellow-100",children:a.jsx(lo,{className:"h-6 w-6 text-yellow-600"})}),a.jsx("div",{className:"ml-5 w-0 flex-1",children:a.jsxs("dl",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Pending Payments"}),a.jsx("dd",{className:"flex items-baseline",children:a.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:h.pendingPayments})})]})})]})}),a.jsx("div",{className:"h-2 bg-gradient-to-r from-yellow-500 to-yellow-600"})]}),a.jsxs("div",{className:"bg-white overflow-hidden shadow-lg rounded-xl border border-gray-100",children:[a.jsx("div",{className:"p-5",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 rounded-lg p-3 bg-blue-100",children:a.jsx(Ng,{className:"h-6 w-6 text-blue-600"})}),a.jsx("div",{className:"ml-5 w-0 flex-1",children:a.jsxs("dl",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Completed Today"}),a.jsx("dd",{className:"flex items-baseline",children:a.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:h.completedToday})})]})})]})}),a.jsx("div",{className:"h-2 bg-gradient-to-r from-blue-500 to-blue-600"})]}),a.jsxs("div",{className:"bg-white overflow-hidden shadow-lg rounded-xl border border-gray-100",children:[a.jsx("div",{className:"p-5",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 rounded-lg p-3 bg-red-100",children:a.jsx(Ki,{className:"h-6 w-6 text-red-600"})}),a.jsx("div",{className:"ml-5 w-0 flex-1",children:a.jsxs("dl",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Overdue Renewals"}),a.jsx("dd",{className:"flex items-baseline",children:a.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:h.overdueRenewals})})]})})]})}),a.jsx("div",{className:"h-2 bg-gradient-to-r from-red-500 to-red-600"})]})]}),a.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border border-gray-200",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(jg,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Search by member name, email, or reference...",value:r,onChange:y=>n(y.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),a.jsx("div",{className:"sm:w-48",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(bg,{className:"h-5 w-5 text-gray-400"})}),a.jsxs("select",{value:s,onChange:y=>i(y.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"failed",children:"Failed"}),a.jsx("option",{value:"refunded",children:"Refunded"})]})]})}),a.jsx("div",{className:"sm:w-48",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Zu,{className:"h-5 w-5 text-gray-400"})}),a.jsxs("select",{value:o,onChange:y=>l(y.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[a.jsx("option",{value:"all",children:"All Time"}),a.jsx("option",{value:"today",children:"Today"}),a.jsx("option",{value:"week",children:"Last 7 Days"}),a.jsx("option",{value:"month",children:"Last 30 Days"})]})]})})]})}),a.jsxs("div",{className:"bg-white shadow-lg rounded-xl border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gradient-to-r from-emerald-600 to-emerald-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Member"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Amount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Method"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-white uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f&&f.length>0?f.map(y=>{var v,w,x,d,p,g,b;return a.jsxs("tr",{className:"hover:bg-emerald-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsxs("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-emerald-400 to-emerald-600 flex items-center justify-center text-white font-semibold",children:[(w=(v=y.members)==null?void 0:v.first_name)==null?void 0:w[0],(d=(x=y.members)==null?void 0:x.last_name)==null?void 0:d[0]]})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[(p=y.members)==null?void 0:p.first_name," ",(g=y.members)==null?void 0:g.last_name]}),a.jsx("div",{className:"text-xs text-gray-500",children:(b=y.members)==null?void 0:b.email})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-900",children:y.payment_type||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"text-sm font-semibold text-emerald-600",children:["",Number(y.total_amount).toFixed(2)]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-900",children:y.payment_method||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m(y.payment_status)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.payment_date?new Date(y.payment_date).toLocaleDateString():new Date(y.created_at).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs(Dt,{to:`/members/${y.member_id}`,className:"inline-flex items-center px-3 py-1.5 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 transition-colors",children:[a.jsx(_g,{className:"h-4 w-4 mr-1"}),"View Member"]})})]},y.id)}):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:a.jsxs("div",{className:"text-gray-500",children:[a.jsx(Ts,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-lg font-medium",children:"No payments found"}),a.jsx("p",{className:"text-sm mt-1",children:r||s!=="all"||o!=="all"?"Try adjusting your search or filters":"Payment records will appear here"})]})})})})]})}),f&&f.length>0&&a.jsx("div",{className:"bg-gray-50 px-6 py-3 border-t border-gray-200",children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",a.jsx("span",{className:"font-medium",children:f.length})," of"," ",a.jsx("span",{className:"font-medium",children:c==null?void 0:c.length})," payments"]})})]}),e&&a.jsx(oj,{onClose:()=>t(!1)})]})}function oj({onClose:e}){const t=Co(),[r,n]=j.useState({member_id:"",payment_type:"renewal",payment_method:"cash",amount:"",payment_date:new Date().toISOString().split("T")[0],reference_no:"",notes:""}),{data:s}=qt({queryKey:["active-members"],queryFn:async()=>{const{data:l}=await q.from("members").select("id, first_name, last_name, email, app_type").in("status",["active","pending"]).order("first_name",{ascending:!0});return l||[]}}),i=so({mutationFn:async()=>{const{data:l,error:c}=await q.from("payments").insert({member_id:r.member_id,payment_type:r.payment_type,payment_method:r.payment_method,total_amount:parseFloat(r.amount),main_joining_fee:0,main_membership_fee:parseFloat(r.amount),main_misc:0,joint_joining_fee:0,joint_membership_fee:0,joint_misc:0,late_fee:0,payment_date:r.payment_date,payment_status:"completed",reference_no:r.reference_no||null,notes:r.notes||null});if(c)throw c;return l},onSuccess:()=>{t.invalidateQueries({queryKey:["payments"]}),e()}}),o=l=>{l.preventDefault(),!(!r.member_id||!r.amount)&&i.mutate()};return a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Record Payment"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(qc,{className:"h-6 w-6"})})]}),a.jsxs("form",{onSubmit:o,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Member ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{required:!0,value:r.member_id,onChange:l=>n({...r,member_id:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[a.jsx("option",{value:"",children:"Select member"}),s==null?void 0:s.map(l=>a.jsxs("option",{value:l.id,children:[l.first_name," ",l.last_name," (",l.email,")"]},l.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Type"}),a.jsxs("select",{value:r.payment_type,onChange:l=>n({...r,payment_type:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[a.jsx("option",{value:"registration",children:"Registration"}),a.jsx("option",{value:"renewal",children:"Renewal"}),a.jsx("option",{value:"late_fee",children:"Late Fee"}),a.jsx("option",{value:"misc",children:"Miscellaneous"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Amount () ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",required:!0,step:"0.01",min:"0",value:r.amount,onChange:l=>n({...r,amount:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"100.00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),a.jsxs("select",{value:r.payment_method,onChange:l=>n({...r,payment_method:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"cheque",children:"Cheque"}),a.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),a.jsx("option",{value:"card",children:"Card"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Date"}),a.jsx("input",{type:"date",value:r.payment_date,onChange:l=>n({...r,payment_date:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reference Number"}),a.jsx("input",{type:"text",value:r.reference_no,onChange:l=>n({...r,reference_no:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Optional reference number"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),a.jsx("textarea",{value:r.notes,onChange:l=>n({...r,notes:l.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Optional notes"})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:i.isPending,className:"px-6 py-2 bg-gradient-to-r from-emerald-600 to-emerald-700 text-white rounded-lg hover:from-emerald-700 hover:to-emerald-800 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:i.isPending?"Recording...":"Record Payment"})]})]})]})})}function lj(){const{data:e,isLoading:t}=qt({queryKey:["reports"],queryFn:async()=>{const[{data:x},{data:d},{data:p},{data:g}]=await Promise.all([q.from("members").select("*"),q.from("payments").select("*"),q.from("children").select("*"),q.from("fee_structure").select("*").order("age_min",{ascending:!0})]);return{members:x,payments:d,children:p,feeStructure:g}}});if(t)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})});const{members:r=[],payments:n=[],children:s=[],feeStructure:i=[]}=e||{},o={total:(r==null?void 0:r.length)||0,active:(r==null?void 0:r.filter(x=>x.status==="active").length)||0,pending:(r==null?void 0:r.filter(x=>x.status==="pending").length)||0,inactive:(r==null?void 0:r.filter(x=>x.status==="inactive").length)||0,deceased:(r==null?void 0:r.filter(x=>x.status==="deceased").length)||0,single:(r==null?void 0:r.filter(x=>x.app_type==="single").length)||0,joint:(r==null?void 0:r.filter(x=>x.app_type==="joint").length)||0,totalChildren:(s==null?void 0:s.length)||0},l={totalRevenue:(n==null?void 0:n.filter(x=>x.payment_status==="completed").reduce((x,d)=>x+Number(d.total_amount),0))||0,pendingRevenue:(n==null?void 0:n.filter(x=>x.payment_status==="pending").reduce((x,d)=>x+Number(d.total_amount),0))||0,totalPayments:(n==null?void 0:n.length)||0,completedPayments:(n==null?void 0:n.filter(x=>x.payment_status==="completed").length)||0,pendingPayments:(n==null?void 0:n.filter(x=>x.payment_status==="pending").length)||0,averagePayment:n&&n.length>0?n.reduce((x,d)=>x+Number(d.total_amount),0)/n.length:0},c=x=>{if(!x)return 0;const d=new Date(x),p=new Date;let g=p.getFullYear()-d.getFullYear();const b=p.getMonth()-d.getMonth();return(b<0||b===0&&p.getDate()<d.getDate())&&g--,g},u=(i==null?void 0:i.map(x=>{const d=(r==null?void 0:r.filter(p=>{const g=c(p.dob);return g>=x.age_min&&g<=x.age_max}).length)||0;return{range:`${x.age_min}-${x.age_max}`,count:d,joiningFee:x.joining_fee}}))||[],h=(n==null?void 0:n.reduce((x,d)=>{const p=d.payment_method||"unknown";return x[p]=(x[p]||0)+1,x},{}))||{},f=Array.from({length:6},(x,d)=>{const p=new Date;return p.setMonth(p.getMonth()-d),{month:p.toLocaleDateString("en-GB",{month:"short",year:"numeric"}),count:(r==null?void 0:r.filter(g=>{const b=new Date(g.created_at);return b.getMonth()===p.getMonth()&&b.getFullYear()===p.getFullYear()}).length)||0}}).reverse(),m=(x,d)=>{if(x.length===0)return;const p=Object.keys(x[0]),g=[p.join(","),...x.map(T=>p.map(S=>JSON.stringify(T[S]||"")).join(","))].join(`
`),b=new Blob([g],{type:"text/csv"}),N=window.URL.createObjectURL(b),k=document.createElement("a");k.href=N,k.download=`${d}_${new Date().toISOString().split("T")[0]}.csv`,k.click()},y=()=>{const x=(r==null?void 0:r.map(d=>({ID:d.id,Type:d.app_type,Title:d.title,FirstName:d.first_name,LastName:d.last_name,DOB:d.dob,Email:d.email,Mobile:d.mobile,Status:d.status,CreatedAt:new Date(d.created_at).toLocaleDateString()})))||[];m(x,"members_report")},v=()=>{const x=(n==null?void 0:n.map(d=>({ID:d.id,MemberID:d.member_id,Type:d.payment_type,Method:d.payment_method,Amount:d.total_amount,Status:d.payment_status,Date:d.payment_date||d.created_at,Reference:d.reference_no})))||[];m(x,"payments_report")},w=()=>{const x=[{Metric:"Total Revenue",Value:`${l.totalRevenue.toFixed(2)}`},{Metric:"Pending Revenue",Value:`${l.pendingRevenue.toFixed(2)}`},{Metric:"Total Payments",Value:l.totalPayments},{Metric:"Completed Payments",Value:l.completedPayments},{Metric:"Pending Payments",Value:l.pendingPayments},{Metric:"Average Payment",Value:`${l.averagePayment.toFixed(2)}`},{Metric:"Total Members",Value:o.total},{Metric:"Active Members",Value:o.active},{Metric:"Pending Members",Value:o.pending}];m(x,"financial_summary")};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reports & Analytics"}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Comprehensive insights into membership and financials"})]}),a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("button",{onClick:w,className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all shadow-md",children:[a.jsx(Dn,{className:"h-4 w-4 mr-2"}),"Export Summary"]})})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsxs("div",{className:"bg-white overflow-hidden shadow-lg rounded-xl border border-gray-100",children:[a.jsx("div",{className:"p-5",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 rounded-lg p-3 bg-emerald-100",children:a.jsx(cr,{className:"h-6 w-6 text-emerald-600"})}),a.jsx("div",{className:"ml-5 w-0 flex-1",children:a.jsxs("dl",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Members"}),a.jsxs("dd",{className:"flex items-baseline",children:[a.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:o.total}),a.jsxs("div",{className:"ml-2 text-sm text-emerald-600",children:[o.active," active"]})]})]})})]})}),a.jsx("div",{className:"h-2 bg-gradient-to-r from-emerald-500 to-emerald-600"})]}),a.jsxs("div",{className:"bg-white overflow-hidden shadow-lg rounded-xl border border-gray-100",children:[a.jsx("div",{className:"p-5",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 rounded-lg p-3 bg-green-100",children:a.jsx(li,{className:"h-6 w-6 text-green-600"})}),a.jsx("div",{className:"ml-5 w-0 flex-1",children:a.jsxs("dl",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Revenue"}),a.jsx("dd",{className:"flex items-baseline",children:a.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:["",l.totalRevenue.toFixed(0)]})})]})})]})}),a.jsx("div",{className:"h-2 bg-gradient-to-r from-green-500 to-green-600"})]}),a.jsxs("div",{className:"bg-white overflow-hidden shadow-lg rounded-xl border border-gray-100",children:[a.jsx("div",{className:"p-5",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 rounded-lg p-3 bg-yellow-100",children:a.jsx(Ki,{className:"h-6 w-6 text-yellow-600"})}),a.jsx("div",{className:"ml-5 w-0 flex-1",children:a.jsxs("dl",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Pending Revenue"}),a.jsx("dd",{className:"flex items-baseline",children:a.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:["",l.pendingRevenue.toFixed(0)]})})]})})]})}),a.jsx("div",{className:"h-2 bg-gradient-to-r from-yellow-500 to-yellow-600"})]}),a.jsxs("div",{className:"bg-white overflow-hidden shadow-lg rounded-xl border border-gray-100",children:[a.jsx("div",{className:"p-5",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 rounded-lg p-3 bg-blue-100",children:a.jsx(Ng,{className:"h-6 w-6 text-blue-600"})}),a.jsx("div",{className:"ml-5 w-0 flex-1",children:a.jsxs("dl",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Avg Payment"}),a.jsx("dd",{className:"flex items-baseline",children:a.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:["",l.averagePayment.toFixed(0)]})})]})})]})}),a.jsx("div",{className:"h-2 bg-gradient-to-r from-blue-500 to-blue-600"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ob,{className:"h-5 w-5 text-emerald-600 mr-2"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Membership Breakdown"})]}),a.jsxs("button",{onClick:y,className:"text-sm text-emerald-600 hover:text-emerald-700 flex items-center",children:[a.jsx(Dn,{className:"h-4 w-4 mr-1"}),"Export"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-600 mr-3"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active Members"})]}),a.jsx("span",{className:"text-lg font-bold text-emerald-600",children:o.active})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-600 mr-3"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pending Applications"})]}),a.jsx("span",{className:"text-lg font-bold text-yellow-600",children:o.pending})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-600 mr-3"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Inactive Members"})]}),a.jsx("span",{className:"text-lg font-bold text-gray-600",children:o.inactive})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-red-600 mr-3"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Deceased"})]}),a.jsx("span",{className:"text-lg font-bold text-red-600",children:o.deceased})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Single"}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:o.single})]}),a.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Joint"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.joint})]})]})}),a.jsx("div",{className:"pt-2",children:a.jsxs("div",{className:"text-center p-3 bg-pink-50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Children Covered"}),a.jsx("p",{className:"text-2xl font-bold text-pink-600",children:o.totalChildren})]})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(Eb,{className:"h-5 w-5 text-emerald-600 mr-2"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Age Distribution"})]}),a.jsx("div",{className:"space-y-4",children:u.map(x=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[x.range," years (",x.joiningFee," joining)"]}),a.jsx("span",{className:"text-sm font-bold text-emerald-600",children:x.count})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 h-2 rounded-full transition-all",style:{width:`${o.total>0?x.count/o.total*100:0}%`}})})]},x.range))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(Sb,{className:"h-5 w-5 text-emerald-600 mr-2"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Registration Trend (6 Months)"})]}),a.jsx("div",{className:"space-y-3",children:f.map(x=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:x.month}),a.jsx("span",{className:"text-sm font-bold text-blue-600",children:x.count})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full transition-all",style:{width:`${Math.max(...f.map(d=>d.count))>0?x.count/Math.max(...f.map(d=>d.count))*100:0}%`}})})]},x.month))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(li,{className:"h-5 w-5 text-emerald-600 mr-2"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Payment Methods"})]}),a.jsxs("button",{onClick:v,className:"text-sm text-emerald-600 hover:text-emerald-700 flex items-center",children:[a.jsx(Dn,{className:"h-4 w-4 mr-1"}),"Export"]})]}),a.jsxs("div",{className:"space-y-4",children:[Object.entries(h).map(([x,d])=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:x.replace("_"," ")}),a.jsx("span",{className:"text-sm font-bold text-green-600",children:d})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full transition-all",style:{width:`${l.totalPayments>0?d/l.totalPayments*100:0}%`}})})]},x)),Object.keys(h).length===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(li,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"No payment data available"})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.completedPayments})]}),a.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:l.pendingPayments})]})]})})]})]}),a.jsx("div",{className:"bg-gradient-to-br from-emerald-50 to-yellow-50 border-2 border-emerald-200 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Hi,{className:"h-6 w-6 text-emerald-600 mr-3 mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-emerald-900 mb-2",children:"Export Reports"}),a.jsx("p",{className:"text-sm text-emerald-700 mb-4",children:"Download detailed reports in CSV format for analysis"}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs("button",{onClick:y,className:"inline-flex items-center px-4 py-2 bg-white border border-emerald-300 rounded-lg text-sm font-medium text-emerald-700 hover:bg-emerald-50 transition-colors",children:[a.jsx(Dn,{className:"h-4 w-4 mr-2"}),"Members Report"]}),a.jsxs("button",{onClick:v,className:"inline-flex items-center px-4 py-2 bg-white border border-emerald-300 rounded-lg text-sm font-medium text-emerald-700 hover:bg-emerald-50 transition-colors",children:[a.jsx(Dn,{className:"h-4 w-4 mr-2"}),"Payments Report"]}),a.jsxs("button",{onClick:w,className:"inline-flex items-center px-4 py-2 bg-white border border-emerald-300 rounded-lg text-sm font-medium text-emerald-700 hover:bg-emerald-50 transition-colors",children:[a.jsx(Dn,{className:"h-4 w-4 mr-2"}),"Financial Summary"]})]})]})]})})]})}function cj(){const[e,t]=j.useState(""),[r,n]=j.useState(""),[s,i]=j.useState(""),[o,l]=j.useState(!1),{signIn:c}=Xu(),u=$s(),h=async f=>{f.preventDefault(),i(""),l(!0);try{await c(e,r),u("/dashboard")}catch(m){i(m.message||"Failed to sign in. Please check your credentials.")}finally{l(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-emerald-900 via-emerald-800 to-emerald-900 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("div",{className:"inline-block bg-white/10 backdrop-blur-sm rounded-2xl p-6 border-2 border-yellow-600 shadow-2xl",children:[a.jsx("h1",{className:"text-3xl font-bold text-yellow-400 drop-shadow-lg",children:"Central Region"}),a.jsx("p",{className:"text-yellow-200 mt-2 text-sm",children:"Muslim Funeral Service"}),a.jsx("div",{className:"mt-3 h-1 w-24 mx-auto bg-gradient-to-r from-transparent via-yellow-400 to-transparent"})]}),a.jsx("h2",{className:"mt-8 text-2xl font-semibold text-white",children:"Sign in to your account"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl overflow-hidden border-t-4 border-yellow-600",children:[a.jsxs("div",{className:"px-8 py-8",children:[s&&a.jsx("div",{className:"mb-4 bg-red-50 border-l-4 border-red-500 p-4 rounded",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ki,{className:"h-5 w-5 text-red-500 mr-2"}),a.jsx("p",{className:"text-sm text-red-700",children:s})]})}),a.jsxs("form",{onSubmit:h,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:f=>t(f.target.value),className:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors",placeholder:"Enter your email"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:f=>n(f.target.value),className:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors",placeholder:"Enter your password"})]}),a.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-md text-sm font-semibold text-white bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02]",children:o?a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})]})]}),a.jsx("div",{className:"px-8 py-4 bg-gradient-to-r from-emerald-50 to-yellow-50 border-t border-gray-200",children:a.jsx("p",{className:"text-xs text-center text-gray-600",children:"Secured access for authorized personnel only"})})]}),a.jsxs("p",{className:"mt-6 text-center text-sm text-emerald-200",children:[" ",new Date().getFullYear()," Central Region Muslim Funeral Service"]})]})})}function uj({children:e}){const{user:t,loading:r}=Xu();return r?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-emerald-50 to-yellow-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block h-12 w-12 animate-spin rounded-full border-4 border-solid border-emerald-600 border-r-transparent"}),a.jsx("p",{className:"mt-4 text-emerald-700 font-medium",children:"Loading..."})]})}):t?a.jsx(a.Fragment,{children:e}):a.jsx(qp,{to:"/login",replace:!0})}const dj=new Px({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});function hj(){return a.jsx(Ox,{client:dj,children:a.jsx(jb,{children:a.jsx(sx,{children:a.jsxs(Yv,{children:[a.jsx(At,{path:"/login",element:a.jsx(cj,{})}),a.jsxs(At,{path:"/",element:a.jsx(uj,{children:a.jsx($b,{})}),children:[a.jsx(At,{index:!0,element:a.jsx(qp,{to:"/dashboard",replace:!0})}),a.jsx(At,{path:"dashboard",element:a.jsx(Mb,{})}),a.jsx(At,{path:"members",element:a.jsx(Ub,{})}),a.jsx(At,{path:"members/:id",element:a.jsx(Db,{})}),a.jsx(At,{path:"members/new",element:a.jsx(Gb,{})}),a.jsx(At,{path:"payments",element:a.jsx(aj,{})}),a.jsx(At,{path:"reports",element:a.jsx(lj,{})})]})]})})})})}_l.createRoot(document.getElementById("root")).render(a.jsx(Pf.StrictMode,{children:a.jsx(hj,{})}));
